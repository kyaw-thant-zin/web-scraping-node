"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7785],{78041:(e,t,n)=>{n.r(t),n.d(t,{BasePlugin:()=>Xe,Errors:()=>P,Events:()=>i,I18N:()=>Dt,Plugin:()=>lt,STATE_CLASS:()=>yt,SimplePlayer:()=>Kt,Sniffer:()=>w,Util:()=>g,default:()=>Ia});var i={};n.r(i),n.d(i,{ABORT:()=>W,AFTER_DEFINITION_CHANGE:()=>ce,AUTOPLAY_PREVENTED:()=>Q,AUTOPLAY_STARTED:()=>$,BEFORE_DEFINITION_CHANGE:()=>ae,BUFFER_CHANGE:()=>Z,CANPLAY:()=>L,CANPLAY_THROUGH:()=>D,COMPLETE:()=>J,CSS_FULLSCREEN_CHANGE:()=>oe,DEFINITION_CHANGE:()=>se,DESTROY:()=>te,DURATION_CHANGE:()=>N,EMPTIED:()=>G,ENDED:()=>T,ERROR:()=>x,FULLSCREEN_CHANGE:()=>ie,LOADED_DATA:()=>F,LOAD_START:()=>U,MINI_STATE_CHANGE:()=>re,PAUSE:()=>S,PIP_CHANGE:()=>he,PLAY:()=>C,PLAYER_BLUR:()=>Y,PLAYER_FOCUS:()=>K,PLAYING:()=>E,PLAYNEXT:()=>ye,PROGRESS:()=>H,RATE_CHANGE:()=>B,READY:()=>X,REPLAY:()=>ee,RETRY:()=>ue,ROTATE:()=>pe,SCREEN_SHOT:()=>de,SEEKED:()=>A,SEEKING:()=>R,SEI_PARSED:()=>le,SHORTCUT:()=>ge,STALLED:()=>V,SUSPEND:()=>z,TIME_UPDATE:()=>j,URL_CHANGE:()=>ne,URL_NULL:()=>q,USER_ACTION:()=>me,VIDEO_RESIZE:()=>fe,VOLUME_CHANGE:()=>M,WAITING:()=>I,XGLOG:()=>ve});var o=n(11312),r=n.n(o),s="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,a={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},c="%c[xgplayer]",l={config:{debug:s?3:1},logInfo:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.config.debug>=3&&(t=console).log.apply(t,[c,a.info,e].concat(i))},logWarn:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.config.debug>=1&&(t=console).warn.apply(t,[c,a.warn,e].concat(i))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];(t=console)[n].apply(t,[c,a.error,e].concat(o))}}};function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bufferedList=t}var t,n;return t=e,(n=[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}])&&u(t.prototype,n),e}();function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var d={};function y(e,t){for(var n=0,i=t.length;n<i;n++)if(e.indexOf(t[n])>-1)return!0;return!1}d.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(e);return o.className=i,o.innerHTML=t,Object.keys(n).forEach((function(t){var i=t,r=n[t];"video"===e||"audio"===e||"live-video"===e?r&&o.setAttribute(i,r):o.setAttribute(i,r)})),o},d.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=e;var o=i.children;return i=null,o.length>0?(o=o[0],n&&d.addClass(o,n),t&&Object.keys(t).forEach((function(e){o.setAttribute(e,t[e])})),o):null}catch(e){return l.logError("util.createDomFromHtml",e),null}},d.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(i){var n=e.className&&"object"===p(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},d.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(n){d.hasClass(e,t)||(e.className&&"object"===p(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},d.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(n){d.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===p(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},d.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){d.hasClass(e,t)?d.removeClass(e,t):d.addClass(e,t)}))},d.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===d.typeOf(e[n])?t.push(e[n]):"Object"===d.typeOf(e[n])&&Object.keys(e[n]).map((function(i){e[n][i]&&t.push(i)}))},i=0;i<arguments.length;i++)n(i);return t.join(" ")},d.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(i){l.logError("util.findDom",i),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},d.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},d.padStart=function(e,t,n){for(var i=String(n),o=t>>0,r=Math.ceil(o/i.length),s=[],a=String(e);r--;)s.push(i);return s.join("").substring(0,o-a.length)+a},d.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=d.padStart(Math.floor(e/3600),2,0),n=d.padStart(Math.floor((e-3600*t)/60),2,0),i=d.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},d.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},d.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},d.deepCopy=function(e,t){if("Object"===d.typeOf(t)&&"Object"===d.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==d.typeOf(t[n])||t[n]instanceof Node?"Array"===d.typeOf(t[n])?e[n]="Array"===d.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:d.deepCopy(e[n],t[n])})),e},d.deepMerge=function(e,t){return Object.keys(t).map((function(n){var i,o;"Array"===d.typeOf(t[n])&&"Array"===d.typeOf(e[n])?"Array"===d.typeOf(e[n])&&(i=e[n]).push.apply(i,function(e){if(Array.isArray(e))return h(e)}(o=t[n])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):d.typeOf(e[n])!==d.typeOf(t[n])||null===e[n]||"Object"!==d.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):d.deepMerge(e[n],t[n])})),e},d.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},d.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},d.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},d.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},d.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var i=setTimeout((function(){t(),d.clearTimeout(e,i)}),n);return e._timers.push(i),i},d.clearTimeout=function(e,t){var n=e._timers;if("Array"===d.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1),clearTimeout(t);break}}else clearTimeout(t)},d.clearAllTimers=function(e){var t=e._timers;"Array"===d.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},d.createImgBtn=function(e,t,n,i){var o,r,s,a=d.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return a.style.backgroundImage='url("'.concat(t,'")'),n&&i&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1&&(o=parseFloat(n.slice(0,n.indexOf(e)).trim()),r=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=e,1))})),a.style.width="".concat(o).concat(s),a.style.height="".concat(r).concat(s),a.style.backgroundSize="".concat(o).concat(s," ").concat(r).concat(s),a.style.margin="start"===e?"-".concat(r/2).concat(s," auto auto -").concat(o/2).concat(s):"auto 5px auto 5px"),a},d.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var i="#";e.replace(/[0-9A-F]/gi,(function(e){i+=e+e})),e=i}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},d.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},d.checkIsFunction=function(e){return e&&"function"==typeof e},d.checkIsObject=function(e){return null!==e&&"object"===p(e)},d.hide=function(e){e.style.display="none"},d.show=function(e,t){e.style.display=t||"block"},d.isUndefined=function(e){if(null==e)return!0},d.setStyleFromCsstext=function(e,t){t&&("String"===d.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},d.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),o={},r={};return i.map((function(e){if(e){var n=e.split(":");n.length>1&&(y(n[0],t)?o[n[0]]=n[1]:r[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(r).map((function(t){e.style[t]=r[t]})),o},d.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),i={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(i[t[0]]=t[1])}})),i},d.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=new window.Image;i.complete?t&&t():(i.onload=function(e){i=null,t&&t(e)},i.onerror=function(e){i=null,n&&n(e)}),i.src=e},d.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},d.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},d.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},d.checkTouchSupport=function(){return"ontouchstart"in window},d.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<e.length;i++)n.push({start:e.start(i)<.5?0:e.start(i),end:e.end(i)});n.sort((function(e,t){return e.start-t.start||t.end-e.end}));var o=[];if(t)for(var r=0;r<n.length;r++){var s=o.length;if(s){var a=o[s-1].end;n[r].start-a<t?n[r].end>a&&(o[s-1].end=n[r].end):o.push(n[r])}else o.push(n[r])}else o=n;return new f(o)},d.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},d.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},d.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)};const g=d;var v=/(Android)\s([\d.]+)/,m=/(Version)\/([\d.]+)/,b={get device(){return b.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),r=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!r,a=!(s||i||n||r),c=/(?:iPad|PlayBook)/.test(e);return{isTablet:r,isPhone:s,isIpad:c,isIos:s||c,isAndroid:i,isPc:a,isSymbian:n,isWindowsPhone:t,isFireFox:o}},get osVersion(){var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?m:v)?t.exec(e):[];if(n&&n.length>=3){var i=n[2].split(".");return i.length>0?parseInt(i[0]):0}return 0},get isWeixin(){return"undefined"!=typeof navigator&&(!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())||void 0)}};const w=b,k=JSON.parse('"3.0.0-alpha.99"');function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var O={1:"network",2:"network",3:"decoder",4:"format"},P=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{}};_(this,e);var i=t.i18n.ERROR_TYPES;if(t.video){var o=t.video.error||{},r=t.duration,s=t.currentTime,a=t.ended,c=t.src,l=t.video,u=l.readyState,f=l.networkState,h={playerVersion:k,domain:document.domain,currentTime:s,duration:r,ended:a,readyState:u,networkState:f,src:c,errorType:n.errorType,errorCode:n.errorCode||o.code,message:n.errorMessage||o.message,mediaError:o,originError:n.originError?n.originError.stack:""};return n.ext&&Object.keys(n.ext).map((function(e){h[e]=n.ext[e]})),h}if(arguments.length>1){for(var p={playerVersion:k,domain:document.domain},d=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],y=0;y<arguments.length;y++)p[d[y]]=arguments[y];return p.ex=(i[arguments[0]]||{}).msg,p}},C="play",E="playing",T="ended",S="pause",x="error",R="seeking",A="seeked",j="timeupdate",I="waiting",L="canplay",D="canplaythrough",N="durationchange",M="volumechange",F="loadeddata",B="ratechange",H="progress",U="loadstart",G="emptied",V="stalled",z="suspend",W="abort",Z="bufferedChange",K="focus",Y="blur",X="ready",q="urlNull",$="autoplay_started",Q="autoplay_was_prevented",J="complete",ee="replay",te="destroy",ne="urlchange",ie="fullscreen_change",oe="cssFullscreen_change",re="mini_state_change",se="definition_change",ae="before_definition_change",ce="after_definition_change",le="SEI_PARSED",ue="retry",fe="video_resize",he="pip_change",pe="rotate",de="screenShot",ye="playnext",ge="shortcut",ve="xglog",me="user_action";function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function we(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ke(e,t,n){return ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},ke(e,t,n||e)}function _e(e,t){return _e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_e(e,t)}function Oe(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(e)}var Ce=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadstart","emptied","ratechange","progress","stalled","suspend","abort"];function Ee(e,t){this&&this.emit&&("error"===e?this.errorHandler(e):this.emit(e,t))}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(s,e);var t,n,i,o,r=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pe(i);if(o){var n=Pe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Oe(this,e)});function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,e))._hasStart=!1,t._currentTime=0,t._duration=0,t.videoConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:2,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var n=e["x5-video-player-type"]||e.x5VideoPlayerType;return w.isWeixin&&w.os.isAndroid&&n&&(t.videoConfig["x5-video-player-type"]=n,delete t.videoConfig.playsinline,delete t.videoConfig["webkit-playsinline"],delete t.videoConfig["x5-playsinline"]),e.loop&&(t.videoConfig.loop="loop"),t.video=g.createDom(t.videoConfig.mediaType,"",t.videoConfig,""),e.defaultPlaybackRate&&(t.video.defaultPlaybackRate=t.video.playbackRate=e.defaultPlaybackRate),"Number"===g.typeOf(e.volume)&&(t.volume=e.volume),e.autoplayMuted&&(t.video.muted=!0),e.autoplay&&(t.video.autoplay=!0),t._interval={},t.videoEventMiddleware={},t.attachVideoEvents(),t}return t=s,n=[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.videoEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.videoEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(e){var t=this;this.evHandlers||(this._evHandlers=Ce.map((function(e){return n={},i=e,s=t,a="on".concat((r=e).charAt(0).toUpperCase()).concat(r.slice(1)),s[a]&&"function"==typeof s[a]&&s.on(r,s[a]),o=function(e){var t=r;if(e.player=s,e.eventName=r,"timeupdate"===t&&(s._currentTime=s.video&&s.video.currentTime),"durationchange"===r&&(s._duration=s.video.duration),s.videoEventMiddleware[r]){var n=Ee.bind(s);try{s.videoEventMiddleware[r].call(s,e,n)}catch(e){throw Ee.call(s,t,e),e}}else Ee.call(s,t,e)},i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n;var n,i,o,r,s,a}))),e||(e=this.video),this._evHandlers.map((function(t){var n=Object.keys(t)[0];e.addEventListener(n,t[n],!1)}))}},{key:"detachVideoEvents",value:function(e){e||(e=this.video),this._evHandlers.map((function(t){var n=Object.keys(t)[0];e.removeEventListener(Object.keys(t)[0],t[n],!1)}))}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||t)){var n=this.video.error||t,i=n.code?O[n.code]:"other";this.emit(e,new P(this,{errorType:i,errorCode:n.code,errorMessage:n.message||""}))}}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,this.emit("hasstart"))}},{key:"destroy",value:function(){var e=this;for(var t in this.video&&(this.video.pause&&this.video.pause(),this.video.removeAttribute("src")),this._currentTime=0,this._duration=0,this._hasStart=!1,this.videoConfig=null,this._interval)clearInterval(this._interval[t]),this._interval[t]=null;this.emit(te),this.detachVideoEvents(),this._evHandlers.map((function(t){var n=Object.keys(t)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[i]&&e.off(n,e[i])})),this._evHandlers=null,this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(e){return this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.video)return t;e||(e=this.video.buffered);var n=this.video.currentTime;if(e)for(var i=0,o=e.length;i<o&&(t[0]=e.start(i),t[1]=e.end(i),!(t[0]<=n&&n<=t[1]));i++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return this.video.autoplay},set:function(e){this.video.autoplay=e}},{key:"buffered",get:function(){return this.video.buffered}},{key:"buffered2",get:function(){return g.getBuffered2(this.video.buffered)}},{key:"bufferedPoint",get:function(){var e=this.video.buffered,t={start:0,end:0};if(!e||0===e.length)return t;for(var n=0;n<e.length;n++)if((e.start(n)<=this.currentTime||e.start(n)<.1)&&e.end(n)>=this.currentTime)return{start:e.start(n),end:e.end(n)};return t}},{key:"crossOrigin",get:function(){return this.video.crossOrigin},set:function(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function(){return this.video.currentSrc},set:function(e){this.video.currentSrc=e}},{key:"currentTime",get:function(){return void 0!==this.video.currentTime?this.video.currentTime:this._currentTime},set:function(e){this.video.currentTime=e}},{key:"defaultMuted",get:function(){return this.video.defaultMuted},set:function(e){this.video.defaultMuted=e}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.video.ended}},{key:"error",get:function(){var e=this.video.error;return e?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][e.code-1]:null}},{key:"loop",get:function(){return this.video.loop},set:function(e){this.video.loop=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"networkState",get:function(){return["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"][this.video.networkState]}},{key:"paused",get:function(){return this.video.paused}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.defaultPlaybackRate=e,this.video.playbackRate=e}},{key:"played",get:function(){return this.video.played}},{key:"preload",get:function(){return this.video.preload},set:function(e){this.video.preload=e}},{key:"readyState",get:function(){return["HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA"][this.video.readyState]}},{key:"seekable",get:function(){return this.video.seekable}},{key:"seeking",get:function(){return this.video.seeking}},{key:"src",get:function(){return this.video.src},set:function(e){this.emit(ne,e),this.emit(I),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)?this.onWaiting():this.video.src=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}},{key:"emit",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=ke(Pe(s.prototype),"emit",this)).call.apply(n,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=ke(Pe(s.prototype),"on",this)).call.apply(n,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=ke(Pe(s.prototype),"once",this)).call.apply(n,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=ke(Pe(s.prototype),"off",this)).call.apply(n,[this,e,t].concat(o))}},{key:"offAll",value:function(){ke(Pe(s.prototype),"removeAllListeners",this).call(this)}}],n&&we(t.prototype,n),s}(r());const Se=Te;function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const Ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};xe(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}var t,n;return t=e,(n=[{key:"openDB",value:function(e){var t=this,n=this,i=this.myDB.version||1,o=n.indexedDB.open(n.myDB.name,i);o.onerror=function(e){},o.onsuccess=function(i){t.myDB.db=i.target.result,e.call(n)},o.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)(n=i.add(t[o])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)(n=i.put(t[o])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var i=this,o=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);o.onerror=function(){n.call(i,null)},o.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}])&&Re(t.prototype,n),e}();var je=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Ie=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Le=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"];function De(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Me(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];var s=t.call.apply(t,[e].concat(o));n&&"function"==typeof n&&(s&&s.then?s.then((function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];n.call.apply(n,[e].concat(i))})):n.call.apply(n,[e].concat(o)))}function Fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var i=arguments,o=this;if(n.pre)try{var r;(r=n.pre).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(t.message),t}if(this.__hooks&&this.__hooks[e])try{var s,a=(s=this.__hooks[e]).call.apply(s,[this,this].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then((function(e){!1!==e&&Me.apply(void 0,[o,t,n.next].concat(De(i)))})).catch((function(e){throw e})):Me.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===a&&Me.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(t.message),t}else Me.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function Be(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function He(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.useHooks&&t.useHooks.apply(t,i)}}function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function Ge(e){e.__hooks=null}function Ve(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(o));var s,a=(s=e.__hooks[t]).call.apply(s,[e,e].concat(o));if(a&&a.then)a.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(o))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==a)return n.call.apply(n,[e,e].concat(o))}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ye(e,t){l.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var Xe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),Ue(this),this.__args=t,this.__events={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}var t,n,i;return t=e,n=[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):Ye(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){e&&t&&this.player?this.player.once(e,t):Ye(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(i){delete n.__events[e],n.player.off(i,t)})):Ye(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;Object.keys(this.__events).map((function(t){e.__events[t]&&e.off(t,e.__events[t]),t&&delete e.__events[t]})),this.__events={}}},{key:"emit",value:function(e,t){this.player&&this.player.emit(e,t)}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e){var i="String"===g.typeOf(e)?e:e.type||"";"switch_play_pause"===t&&("Undefined"===g.typeOf(n.paused)&&(n.paused=this.player.paused),n.isFirstStart=!this.player.playing),this.emit(me,We({eventType:i,action:t,pluginName:this.pluginName,currentTime:this.player.currentTime,duration:this.player.duration,ended:this.player.ended,target:e.target||null},n))}}},{key:"hook",value:function(e,t){return Fe.call.apply(Fe,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return Be.call.apply(Be,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),g.clearAllTimers(this),g.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),Ge(this)}}],i=[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}],n&&Ke(t.prototype,n),i&&Ke(t,i),e}(),qe=n(24490),$e=n.n(qe);function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function et(e,t,n){return et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=it(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},et(e,t,n||e)}function tt(e,t){return tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tt(e,t)}function nt(e,t){if(t&&("object"===ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}var rt={CONTROLS:"controls",ROOT:"root"},st={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function at(e){return!!e&&e.indexOf&&/^http/.test(e)}function ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=null;if(e instanceof window.Element)return g.addClass(e,n),Object.keys(i).map((function(t){e.setAttribute(t,i[t])})),e;if(at(e)||at(e.url))return i.src=at(e)?e:e.url||"",r=g.createDom(e.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof e)try{return(r=e())instanceof window.Element?(g.addClass(r,n),Object.keys(i).map((function(e){r.setAttribute(e,i[e])})),r):(l.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(o,"] is a function mast return an Element Object")),null)}catch(e){return l.logError("Plugin named [".concat(o,"]:createIcon"),e),null}return"string"==typeof e?g.createDomFromHtml(e,i,n):(l.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(o,"] is invalid")),null)}var lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=it(o);if(r){var n=it(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return nt(this,e)});function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qe(this,a),(e=s.call(this,t)).__delegates=[],e}return t=a,n=[{key:"__init",value:function(e){if(et(it(a.prototype),"__init",this).call(this,e),e.root){var t=e.root,n=null;this.icons={},this.root=null,this.parent=null,function(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(i){var o=e[i],r=o&&o.class?o.class:"",s=o&&o.attr?o.attr:{},a=null;n&&n[i]&&(r=function(e,t){return"object"===ot(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(n[i],r),s=function(e,t){return"object"===ot(e)&&e.attr&&"object"===ot(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}(n[i],s),a=ct(n[i],i,r,s,t.pluginName)),!a&&o&&(a=ct(o.icon?o.icon:o,s,r,{},t.pluginName)),t.icons[i]=a}))}(this.registerIcons()||{},this),this.langText={};var i,o,r=this.registerLanguageTexts()||{};i=r,o=this,Object.keys(i).map((function(e){Object.defineProperty(o.langText,e,{get:function(){var t=o.lang;return i[e][t]||i[e].zh}})}));var s="";try{s=this.render()}catch(e){throw l.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(s)(n=a.insert(s,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(n=g.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(n)}this.root=n,this.parent=t;var c=this.config.attr||{},u=this.config.style||{};this.setAttr(c),this.setStyle(u),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===ot(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var i,o,r=n,s=t[r],a={root:e.root};"function"==typeof s?(i=e.config[r]||{},o=s):"object"===ot(s)&&"function"==typeof s.plugin&&(i=s.options?g.deepCopy(e.config[r]||{},s.options):e.config[r]||{},o=s.plugin),a.config=i,void 0!==i.index&&(a.index=i.index),i.root&&(a.root=i.root),e.registerPlugin(o,a,r)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,i=this.langText;t&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(t,(function(t){var o=t.getAttribute&&t.getAttribute("lang-key");if(o){var r=n[o.toUpperCase()]||i[o];r&&(t.innerHTML="function"==typeof r?r(e):r)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var o=n[t.toUpperCase()]||i[t];o&&(e.innerHTML=o)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var i=et(it(a.prototype),"registerPlugin",this).call(this,e,t,n);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,n){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){i.bindEL(e,t)})):this.bindEL(e,t);else{var o=a.delegate.call(this,this.root,e,t,n);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var i="".concat(e,"_").concat(t),o=0;o<this.__delegates.length;o++)if(this.__delegates[o].key===i){this.__delegates[o].destroy(),this.__delegates.splice(o,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)return"String"===g.typeOf(e)?this.root.style[e]=t:void("Object"===g.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)return"String"===g.typeOf(e)?this.root.setAttribute(e,t):void("Object"===g.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return l.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),et(it(a.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],i=[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,o=Number(n),r=e instanceof window.Node;if(i){for(var s=0,a=null,c="";s<i;s++){a=t.children[s];var l=Number(a.getAttribute("data-index"));if(l>=o){c="beforebegin";break}l<o&&(c="afterend")}return r?"afterend"===c?t.appendChild(e):t.insertBefore(e,a):a.insertAdjacentHTML(c,e),"afterend"===c?t.children[t.children.length-1]:t.children[s]}return r?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[];if(e instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach((function(n){var s=$e()(e,t,n,i,o);s.key="".concat(t,"_").concat(n),r.push(s)}));else{var s=$e()(e,t,n,i,o);s.key="".concat(t,"_").concat(n),r.push(s)}return r}},{key:"ROOT_TYPES",get:function(){return rt}},{key:"POSITIONS",get:function(){return st}}],n&&Je(t.prototype,n),i&&Je(t,i),a}(Xe);function ut(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ft=function(){function e(){var t=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((function(e){var n=(new Date).getTime();n-t.timeStamp<100||(t.timeStamp=n,t.__trigger(e))})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}var t,n;return t=e,(n=[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=this.__handlers,i=-1,o=0;o<n.length;o++)n[o]&&e===n[o].target&&(i=o);i>-1?this.__handlers[i].handler=t:this.__handlers.push({target:e,handler:t})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,i){e===n.target&&(t=i)}));try{this.observer&&this.observer.unobserve(e)}catch(e){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(e){console.error(e)}return!0}return!1}},{key:"__trigger",value:function(e){for(var t=0;t<e.length&&!this.__runHandler(e[t].target);t++);}}])&&ut(t.prototype,n),e}(),ht=null;function pt(e){return"Object"===Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}const dt={init:function(e){var t,n,i=e._pluginInfoId;i||(i=(new Date).getTime(),e._pluginInfoId=i),this.pluginGroup||(this.pluginGroup={}),!e.config.closeResizeObserver&&(t=e.root,n=function(){e.getVideoSize()},ht||(ht=new ft),ht.addObserver(t,n)),this.pluginGroup[i]={_player:e,_originalOptions:e.config||{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),n=0;n<t.length;n++){var i=this.pluginGroup[t[n]]._player;if(i.root===e)return i}return null}return null},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then((function(t){var i;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),i)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var o=this.pluginGroup[i]._plugins,r=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported()){n.config||(n.config={});for(var a=Object.keys(r),c=0;c<a.length;c++)if(s.toLowerCase()===a[c].toLowerCase()){var l=r[a[c]];pt(l)&&(n.config=Object.assign({},n.config,r[a[c]]));break}t.defaultConfig&&Object.keys(t.defaultConfig).map((function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{o[s.toLowerCase()]&&(this.unRegister(i,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var u=new t(n);return o[s.toLowerCase()]=u,o[s.toLowerCase()].func=t,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(e){throw console.error(e),e}}else console.warn("not supported plugin [".concat(s,"]"))}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(n){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),n)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!this.pluginGroup||!n)return null;var i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(i){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var o=e._pluginInfoId;if(t.pluginGroup[o]){for(var r=t.pluginGroup[o]._plugins,s=[],a=0,c=Object.keys(r);a<c.length;a++){var l=c[a];if(r[l]&&r[l].beforePlayerInit)try{var u=r[l].beforePlayerInit();s.push(n(u))}catch(e){throw s.push(n(null)),e}}Promise.all([].concat(s)).then((function(){i()})).catch((function(e){console.error(e),i()}))}else i()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(this.pluginGroup&&t)for(var n=this.pluginGroup[t]._plugins,i=0,o=Object.keys(n);i<o.length;i++){var r=o[i];n[r]&&n[r].afterPlayerInit&&n[r].afterPlayerInit()}},setLang:function(e,t){var n=t._pluginInfoId;if(this.pluginGroup&&n){var i=this.pluginGroup[n]._plugins;Object.keys(i).map((function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=e._pluginInfoId;if(t){for(var n={},i=this.pluginGroup[t]._plugins,o=0,r=Object.keys(i);o<r.length;o++){var s=r[o];n[s]={plugin:i[s].func,options:i[s]._args},this.unRegister(t,s)}for(var a=0,c=Object.keys(n);a<c.length;a++){var l=c[a];this.register(t,l,n[l].plugin,n[l].options)}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var n;n=e.root,ht.unObserver(n,undefined);for(var i=this.pluginGroup[t]._plugins,o=0,r=Object.keys(i);o<r.length;o++){var s=r[o];this.unRegister(t,s)}delete this.pluginGroup[t],delete e._pluginInfoId}}},yt={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",INNER_FULLSCREEN:"xgplayer-inner-fullscreen",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",AUTOHIDE:"xgplayer_autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function gt(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function kt(e,t,n){return kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ct(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},kt(e,t,n||e)}function _t(e,t){return _t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_t(e,t)}function Ot(e,t){if(t&&("object"===mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pt(e)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ct(o);if(r){var n=Ct(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ot(this,e)});function a(){var e;bt(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Et(Pt(e=s.call.apply(s,[this].concat(n))),"onMouseEnter",(function(t){var n=Pt(e).player;n.userTimer&&(g.clearTimeout(n,n.userTimer),clearTimeout(n.userTimer))})),Et(Pt(e),"onMouseLeave",(function(){var t=Pt(e),n=t.player,i=t.playerConfig,o=i.closeControlsBlur?200:i.inactive;n.focus({delay:o})})),e}return t=a,n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.controls&&(e.config.disable=!e.player.config.controls),e.config.mode||"mobile"!==w.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,i=t.height,o=t.mode,r=t.autoHide;if(!n){"flex"===o&&this.player.addClass(yt.FLEX_CONTROLS),r&&this.player.addClass(yt.AUTOHIDE);var s={height:"".concat(i,"px")};Object.keys(s).map((function(t){e.root.style[t]=s[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(re,(function(t){t?g.addClass(e.root,"mini-controls"):g.removeClass(e.root,"mini-controls")})),"mobile"!==w.device&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"unFocus",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&g.addClass(this.root,"control_autohide")}},{key:"pauseAutoHide",value:function(){g.removeClass(this.root,"control_autohide")}},{key:"show",value:function(){g.addClass(this.root,"show")}},{key:"hide",value:function(){g.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(this.root){var i=e.defaultConfig||{};if(!t.root){var o=t.position?t.position:t.config&&t.config.position?t.config.position:i.position;switch(o){case st.CONTROLS_LEFT:t.root=this.left;break;case st.CONTROLS_RIGHT:t.root=this.right;break;case st.CONTROLS_CENTER:t.root=this.center;break;case st.CONTROLS:t.root=this.root;break;default:t.root=this.left}return kt(Ct(a.prototype),"registerPlugin",this).call(this,e,t,n)}}}},{key:"destroy",value:function(){"mobile"!==w.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,i=e.initShow;if(!e.disable){var o=g.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},{control_autohide:n},{controls_permanent:!n},{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(o,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],i=[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}],n&&wt(t.prototype,n),i&&wt(t,i),a}(lt);var St={},xt={},Rt=[],At={};function jt(){Object.keys(St.en).map((function(e){xt[e]=e.toLowerCase()}))}function It(e){("Array"!==g.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e).map((function(e){St[e.LANG]?g.deepMerge(St[e.LANG]||{},e.TEXT||{}):At[e.LANG]=e.TEXT})),jt()}function Lt(e){var t=e.LANG,n=e.TEXT||{};St[t]||Rt.push(t),St[t]?g.deepMerge(n,St[t]):St[t]=n,At[t]&&(It([{LANG:t,TEXT:At[t]}]),delete At[t]),"zh-cn"===t&&(St.zh=St["zh-cn"]),jt()}Lt({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});const Dt={get textKeys(){return xt},get langKeys(){return Rt},get lang(){var e={};return Rt.map((function(t){e[t]=St[t]})),e.zh=St["zh-cn"],e},extend:It,use:Lt};function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ht(e,t,n){return Ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zt(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Ht(e,t,n||e)}function Ut(e,t){return Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ut(e,t)}function Gt(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vt(e)}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zt=["play","pause","replay","retry"],Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zt(o);if(r){var n=zt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Gt(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n,i=g.deepMerge({id:"",el:null,url:"",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,videoConfig:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}},e);Ue(Vt(t=s.call(this,i)),Zt),t.config=i,(n=Vt(t)).logInfo=l.logInfo.bind(n),n.logWarn=l.logWarn.bind(n),n.logError=l.logError.bind(n);var o=t.constructor.defaultPreset;if(t.config.presets.length){var r=t.config.presets.indexOf("default");r>=0&&o&&(t.config.presets[r]=o)}else o&&t.config.presets.push(o);if(t.userTimer=null,t.waitTimer=null,t.isReady=!1,t.isPlaying=!1,t.isSeeking=!1,t.isCanplay=!1,t._runPending=!1,t.rotateDeg=0,t.isActive=!1,t.isCssfullScreen=!1,t.fullscreen=!1,t._fullscreenEl=null,t._cssfullscreenEl=null,t.curDefinition=null,t._orgCss="",t._fullScreenOffset=null,t._videoHeight=0,t._videoWidth=0,t._played={begin:-1,end:-1,acc:0},t.innerContainer=null,t.controls=null,t.topBar=null,t.topBar=null,t.root=null,w.os.isAndroid&&w.osVersion>0&&w.osVersion<6&&(t.config.autoplay=!1),t.database=new Ae,!t._initDOM())return console.error(new Error("can't find the dom which id is ".concat(t.config.id," or this.config.el does not exist"))),Gt(t);t._bindEvents(),t._registerPresets(),t._registerPlugins(),dt.onPluginsReady(Vt(t)),g.setTimeout(Vt(t),(function(){t.emit(X),t.onReady&&t.onReady(),t.isReady=!0}),0);var c=t.config,u=c.definition;return!c.url&&u&&u.list&&u.list.length>0&&u.defaultDefinition&&u.list.map((function(e){e.definition===u.defaultDefinition&&(t.config.url=e.url,t.curDefinition=e.definition)})),(t.config.videoInit||t.config.autoplay)&&(t.hasStart||t.start()),t}return t=a,n=[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(x,new P("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=t}var n=dt.checkPlayerRoot(this.root);n&&(l.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.videoConfig.mediaType===i.mediaType){var o=this.innerContainer||this.root;this.detachVideoEvents(this.video);var r=new i(o,this.config,this.videoConfig);this.attachVideoEvents(r),this.video=r}if(this.config.controls){var s=dt.register(this,Tt);this.controls=s}var a=this.config.isMobileSimulateMode?"mobile":w.device;if(this.addClass("".concat(yt.DEFAULT," ").concat(yt.ACTIVE," xgplayer-").concat(a," ").concat(this.config.controls?"":yt.NO_CONTROLS)),this.config.autoplay?this.addClass(yt.ENTER):this.addClass(yt.NO_START),this.config.fluid){var c={"max-width":"100%",width:"100%",height:"0","padding-top":"".concat(100*this.config.height/this.config.width,"%"),position:"position",top:"0",left:"0"};Object.keys(c).map((function(t){e.root.style[t]=c[t]}))}else["width","height"].map((function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=g.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=g.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=g.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=g.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])}));var t=function(){e.fullscreen=!1,e._fullScreenOffset=null};this.onFullscreenChange=function(n,i){var o=g.getFullScreenEl();if(e._fullActionFrom?e._fullActionFrom="":e.emit(me,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,fullscreen:e.fullscreen}),i||o&&(o===e._fullscreenEl||"VIDEO"===o.tagName))g.setTimeout(e,(function(){e.getVideoSize()}),100),e.video.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,o,yt.FULLSCREEN),e.emit(ie,!0,e._fullScreenOffset),e.isCssfullScreen&&e.exitCssFullscreen();else if(e.fullscreen){g.setTimeout(e,(function(){e.getVideoSize()}),100);var r=e._fullScreenOffset;if(e.config.needFullscreenScroll)try{window.scrollTo(r.left,r.top),g.setTimeout(e,(function(){t()}),50)}catch(e){l.logError(e),t()}else e.video.focus(),t();e.isCssfullScreen?e.removeClass(yt.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,yt.FULLSCREEN),e._fullscreenEl=null,e.emit(ie,!1)}},je.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),this.__webkitbeginfullscreen=function(t){e._fullscreenEl=e.video,e.onFullscreenChange(t,!0)},this.__webkitendfullscreen=function(t){e.onFullscreenChange(t,!1)},w.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once("loadeddata",this.getVideoSize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.video.focus()},this.once("play",this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),je.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off("play",this.playFunc),this.canPlayFunc&&this.off("canplay",this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.video&&(e&&""!==e||(this.emit(q),l.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.canPlayFunc=function(){if(t.config){var e=t.config,n=e.autoplay,i=e.startTime,o=e.defaultPlaybackRate;l.logInfo("player","canPlayFunc",i),i&&(t.currentTime=i>t.duration?t.duration:i,t.config.startTime=0),1!==o&&(t.playbackRate=o),n&&t.videoPlay(),t.off(L,t.canPlayFunc),t.removeClass(yt.ENTER)}},"Array"===g.typeOf(e)?(e.forEach((function(e){t.video.appendChild(g.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))})),this._attachSourceEvents(this.video)):this.video.src=e,"Number"===g.typeOf(this.config.volume)&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once("loadeddata",this.loadeddataFunc);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild),this.video.readyState>=2?this.canPlayFunc():this.once(L,this.canPlayFunc),l.logInfo("_startInit"),this.config.autoplay&&(this.load(),(w.os.isIpad||w.os.isPhone)&&this.videoPlay()),g.setTimeout(this,(function(){t.emit(J)}),1),this.hasStart||dt.afterInit(this),this.hasStart=!0}}},{key:"_attachSourceEvents",value:function(e){var t=this,n=e.children;this._videoSourceCount=n.length,!this._sourceError&&(this._sourceError=function(e){t._videoSourceCount--,0===t._videoSourceCount&&(t.videoEventMiddleware.error?t.videoEventMiddleware.error.call(t,e,(function(){t.errorHandler("error")})):t.errorHandler("error",{code:4,message:"sources load error"}))});for(var i=0;i<n.length;i++)n[i].addEventListener("error",this._sourceError)}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(0!==t.length&&this._sourceError)for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError)}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var t=this.config.ignores||[],n=this.config.plugins||[];(this.config.i18n||[]).map((function(e){Dt.use(e)}));var i=t.join("||").toLowerCase().split("||");n.map((function(t){try{var n=t.plugin?t.plugin.pluginName:t.pluginName;if(n&&i.indexOf(n.toLowerCase())>-1)return null;if(t.lazy&&t.loader){var o=dt.lazyRegister(e,t);return void(t.forceBeforeInit&&(o.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(o),1)})).catch((function(t){l.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(o),1)})),e._loadingPlugins.push(o)))}return e.registerPlugin(t)}catch(e){return l.logError("_registerPlugins:",e),null}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){var n,i,o,r,s,a,c,l,u,f,h,p,d,y;n=e,l=void 0===(c=(a=(i=t).preset&&i.options?new i.preset(i.options,n.config):new i({},n.config)).plugins)?[]:c,f=void 0===(u=a.ignores)?[]:u,h=a.icons,p=void 0===h?{}:h,y=void 0===(d=a.i18n)?[]:d,n.config.plugins||(n.config.plugins=[]),n.config.ignores||(n.config.ignores=[]),(o=n.config.plugins).push.apply(o,gt(l)),(r=n.config.ignores).push.apply(r,gt(f)),Object.keys(p).map((function(e){n.config.icons[e]||(n.config.icons[e]=p[e])})),(s=n.config.i18n).push.apply(s,gt(y))}))}},{key:"registerPlugin",value:function(e,t){var n=null,i=null;e.plugin&&"function"==typeof e.plugin?(n=e.plugin,i=e.options):(n=e,i={}),t&&(i.config=t);for(var o=Object.keys(this.config),r=0;r<o.length;r++)if(n.pluginName.toLowerCase()===o[r].toLowerCase()){var s=this.config[o[r]];"Object"===g.typeOf(s)&&(s.root&&(i.root=s.root),s.position&&(i.position=s.position));break}var a=i.position?i.position:i.config&&i.config.position||n.defaultConfig&&n.defaultConfig.position,c=lt.POSITIONS;if(!i.root&&"string"==typeof a&&a.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(n,i,n.pluginName);if(!i.root)switch(a){case c.ROOT_RIGHT:i.root=this.rightBar;break;case c.ROOT_LEFT:i.root=this.leftBar;break;case c.ROOT_TOP:i.root=this.topBar;break;default:i.root=this.innerContainer||this.root}return dt.register(this,n,i)}},{key:"deregister",value:function(e){"string"==typeof e?dt.unRegister(this,e):e instanceof Xe&&dt.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){this.deregister(e)}},{key:"plugins",get:function(){return dt.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=dt.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(g.hasClass(this.root,e)||g.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&g.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return g.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!this.hasStart)return this.hasStart=!0,dt.beforeInit(this).then((function(){if(t.config)return e||(e=t.url||t.config.url),t._startInit(e)})).catch((function(e){throw e.fileName="player",e.lineNumber="236",l.logError("start:beforeInit:",e),e}))}},{key:"switchURL",value:function(e,t){this.src=e}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var e=this;if(this.hasStart){this.isPlaying||(this.removeClass(yt.NO_START),!this.isCanplay&&this.addClass(yt.ENTER));var t=Ht(zt(a.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(yt.NOT_ALLOW_AUTOPLAY),e.addClass(yt.PLAYING),e.isPlaying||(l.logInfo(">>>>playPromise.then"),e.isPlaying=!0,e.emit($))})).catch((function(t){if(l.logWarn(">>>>playPromise.catch",t.name),e.video&&e.video.error)return e.onError(),void e.removeClass(yt.ENTER);"NotAllowedError"===t.name&&(e._errorTimer=g.setTimeout(e,(function(){e._errorTimer=null,e.emit(Q),e.addClass(yt.NOT_ALLOW_AUTOPLAY),e.removeClass(yt.ENTER),e.pause()}),0))})):(l.logWarn("video.play not return promise"),this.isPlaying||(this.isPlaying=!0,this.removeClass(yt.NOT_ALLOW_AUTOPLAY),this.removeClass(yt.NO_START),this.removeClass(yt.ENTER),this.addClass(yt.PLAYING),this.emit($))),t}this.removeClass(yt.NO_START),this.addClass(yt.ENTER);var n=this.start();n&&n.then((function(t){!e.config.autoplay&&e.videoPlay()}))}},{key:"videoPause",value:function(){Ht(zt(a.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(yt.PAUSED),Ve(this,"play",(function(){e.videoPlay()}))}},{key:"pause",value:function(){var e=this;Ve(this,"pause",(function(){Ht(zt(a.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e){var t=this;if(this.video&&!isNaN(Number(e))){var n=this.config,i=n.isSeekedPlay,o=n.seekedStatus,r=i?"play":o;e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(L,(function(){switch(t.removeClass(yt.ENTER),t.isSeeking=!1,r){case"play":t.play();break;case"pause":t.pause();break;default:!t.paused&&t.play()}})),this.isPlaying?this.currentTime=e:(this.removeClass(yt.NO_START),this.addClass(yt.ENTER),this.currentTime=e,"play"===r&&this.play())}}},{key:"changeDefinition",value:function(e,t){var n=this;this.emit(se,{from:t,to:e});var i=this.currentTime,o=this.paused;if(this.curDefinition=e.definition,this.hasStart){this.src=e.url;var r=function(){if(n.currentTime=i,o)n.pause();else{var r=n.play();void 0!==r&&r&&r.catch((function(e){}))}n.emit(ce,{from:t,to:e})};w.os.isAndroid?this.once("timeupdate",(function(){r()})):this.once("canplay",(function(){r()}))}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play().catch((function(e){console.log(e)}))},this.once("loadeddata",this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[yt.NOT_ALLOW_AUTOPLAY,yt.PLAYING,yt.NO_START,yt.PAUSED,yt.REPLAY,yt.ENTER,yt.ENDED,yt.ERROR,yt.LOADING];this.hasStart=!1,this.videoPause(),t.forEach((function(t){e.removeClass(t)})),this.addClass(yt.ENTER),this.emit(G)}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,n=this.root,i=this.video;if(n){if(this._unbindEvents(),this._detachSourceEvents(this.video),g.clearAllTimers(this),dt.destroy(this),Ge(this),Ht(zt(a.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root)try{this.exitFullscreen()}catch(e){}if(t)for(var o=t.children,r=0;r<o.length;r++)t.removeChild(o[r]);n.contains(i)&&n.removeChild(i),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&n.removeChild(e[t]),e[t]=null}));var s=n.className.split(" ");s.length>0?n.className=s.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):n.className="",this.removeAttribute("data-xgfill"),["isReady","isPlaying","isSeeking","isCanplay","isActive","isCssfullScreen","fullscreen"].map((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(yt.ENDED),this.currentTime=0,this.isSeeking=!1,Ve(this,"replay",(function(){e.once(L,(function(){var t=e.videoPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.play(),e.emit(ee),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(yt.ERROR),this.addClass(yt.LOADING),Ve(this,"retry",(function(){var t=e.currentTime;e.videoPause(),e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(L,(function(){e.videoPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,i){e&&(i||(i=yt.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=g.filterStyleFromText(e)),g.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=g.filterStyleFromText(t),g.addClass(t,i)))}},{key:"recoverFullStyle",value:function(e,t,n,i){i||(i=yt.PARENT_FULLSCREEN),this._orgCss&&(g.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),g.removeClass(e,n),t&&t!==e&&this._orgPCss&&(g.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",g.removeClass(t,i))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.video;e||(e=t),this._fullScreenOffset={top:g.scrollTop(),left:g.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var i=g.getFullScreenEl();if(i!==this._fullscreenEl)try{for(var o=0;o<Ie.length;o++){var r=Ie[o];if(e[r]){var s="webkitRequestFullscreen"===r?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[r]();return s&&s.then?s:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(e){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this._fullscreenEl&&g.getFullScreenEl()){var t=this.root,n=this.video;e&&(e=t),this._fullActionFrom="exit";for(var i=0;i<Le.length;i++){var o=Le[i];if(document[o]){var r=document[o]();return r&&r.then?r:Promise.resolve()}}return n&&n.webkitSupportsFullscreen?(n.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.fullscreen&&this.exitFullscreen(),this._cssfullscreenEl=e,this.changeFullStyle(this.root,e,e?yt.INNER_FULLSCREEN:yt.CSS_FULLSCREEN),this.isCssfullScreen=!0,this.emit(oe,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?yt.INNER_FULLSCREEN:yt.CSS_FULLSCREEN;this.fullscreen?this.removeClass(e):this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this._cssfullscreenEl=null,this.isCssfullScreen=!1,this.emit(oe,!1)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closePlayerBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(K,Ft({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(Y,Ft({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3};if(this.isActive=!0,this.removeClass(yt.ACTIVE),this.userTimer&&g.clearTimeout(this,this.userTimer),!1!==t.autoHide){var n=t&&t.delay?t.delay:this.config.inactive;this.userTimer=g.setTimeout(this,(function(){e.blur()}),n)}}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};if(this.isActive){var t=this.config.closePauseVideoFocus;this.isActive=!1,(e.ignorePaused||t||!this.paused&&!this.ended)&&this.addClass(yt.ACTIVE)}}},{key:"onCanplay",value:function(){this.hasStart&&this.removeClass(yt.ENTER),this.removeClass(yt.LOADING),this.isCanplay=!0}},{key:"onPlay",value:function(){this.removeClass(yt.PAUSED),this.ended&&this.removeClass(yt.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(yt.PAUSED),this.config.closePauseVideoFocus||(this.userTimer&&g.clearTimeout(this,this.userTimer),this.focus())}},{key:"onEnded",value:function(){this.addClass(yt.ENDED)}},{key:"onError",value:function(){this.removeClass(yt.NOT_ALLOW_AUTOPLAY),this.removeClass(yt.NO_START),this.removeClass(yt.ENTER),this.removeClass(yt.LOADING),this.addClass(yt.ERROR)}},{key:"onSeeking",value:function(){if(!this.isSeeking){var e=this._played;e.acc+=e.begin<e.end&&e.end>-1?e.end-e.begin:0,e.begin=parseInt(1e3*this.video.currentTime,10),e.end=-1}this.isSeeking=!0,this.addClass(yt.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&g.clearTimeout(this,this.waitTimer),this.removeClass(yt.LOADING),this.removeClass(yt.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&g.clearTimeout(this,this.waitTimer),this.waitTimer=g.setTimeout(this,(function(){e.addClass(yt.LOADING),g.clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;[yt.NO_START,yt.PAUSED,yt.ENDED,yt.ERROR,yt.REPLAY,yt.LOADING].forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.getVideoSize(),(this.waitTimer||this.hasClass(yt.LOADING))&&this.video.readyState>2&&(this.removeClass(yt.LOADING),g.clearTimeout(this,this.waitTimer),this.waitTimer=null),this._played.begin<0&&(this._played.begin=parseInt(1e3*this.video.currentTime,10)),this._played.end=parseInt(1e3*this.video.currentTime,10)}},{key:"onVolumechange",value:function(){"Number"===g.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"checkBuffer",value:function(e){var t=this.video.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.video.currentTime||.2,i=t.length,o=0;o<i;o++)if(t.start(o)<=n&&t.end(o)>n)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(e&&e.h){var t=1/e.h,n=1!==t?"scale(".concat(t,")"):"",i=0,o=0;e.y&&(o=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(i=(100-100*e.w)/2-100*e.x),n+=" translate(".concat(i,"%, ").concat(o,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"getVideoSize",value:function(){var e=this,t=this.video,n=t.videoWidth,i=t.videoHeight,o=this.config,r=o.fitVideoSize,s=o.videoFillMode;if("fill"!==s&&"cover"!==s||this.setAttribute("data-xgfill",s),i&&n){this._videoHeight=i,this._videoWidth=n;var a=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=a.width,u=a.height-c,f=parseInt(n/i*1e3,10),h=parseInt(l/u*1e3,10),p=l,d=u,y={};"auto"===r&&h>f||"fixWidth"===r?(d=l/f*1e3,this.config.fluid?y.paddingTop="".concat(100*d/p,"%"):y.height="".concat(d+c,"px")):("auto"===r&&h<f||"fixHeight"===r)&&(p=f*u/1e3,y.width="".concat(p,"px")),this.fullscreen||this.isCssfullScreen||Object.keys(y).map((function(t){e.root.style[t]=y[t]})),("fillHeight"===s&&h<f||"fillWidth"===s&&h>f)&&this.setAttribute("data-xgfill","cover");var g={videoScale:f,vWidth:p,vHeight:d,cWidth:p,cHeight:d+c};this.emit(fe,g)}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video.updateObjectPosition?this.video.updateObjectPosition(e,t):this.video.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition;n.list=e,this.emit("resourceReady",e);var i=null,o=null;e.map((function(e){t.curDefinition===e.definition&&(i=e),n.defaultDefinition===e.definition&&(o=e)})),!o&&e.length>0&&(o=e[0]),i?this.changeDefinition(i):o&&this.changeDefinition(o)}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==Dt.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,dt.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(Dt.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return Dt.lang[e]||Dt.lang.en}},{key:"i18nKeys",get:function(){return Dt.textKeys||{}}},{key:"version",get:function(){return k}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=Ht(zt(a.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=Ht(zt(a.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=Ht(zt(a.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._played,t=e.acc,n=e.end,i=e.begin;return i>-1&&n>i?(t+n-i)/1e3:t/1e3}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"hook",value:function(e,t){return Fe.call.apply(Fe,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return Be.call.apply(Be,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];return He.call.apply(He,[this].concat(Array.prototype.slice.call(arguments)))}}],i=[{key:"debugger",get:function(){return l.config.debug},set:function(e){l.config.debug=e}},{key:"install",value:function(e,t){a.plugins||(a.plugins={}),a.plugins[e]||(a.plugins[e]=t)}},{key:"use",value:function(e,t){a.plugins||(a.plugins={}),a.plugins[e]=t}}],n&&Bt(t.prototype,n),i&&Bt(t,i),a}(Se);function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qt(e,t){return Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qt(e,t)}function Jt(e,t){if(t&&("object"===Yt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return en(e)}function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(){return(new Date).getTime()}Wt(Kt,"defaultPreset",null),Wt(Kt,"XgVideoProxy",null);var rn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tn(o);if(r){var n=tn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jt(this,e)});function a(){var e;qt(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return nn(en(e=s.call.apply(s,[this].concat(n))),"_onReset",(function(){e.vt=0,e.pt=0,e.fvt=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e._isWaiting=!1,e._waitTimer&&g.clearTimeout(en(e),e._waitTimer),e._waittTimer&&g.clearTimeout(en(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e.stall={costTime:0,currentTime:0},e.seekData={costTime:0,currentTime:0}})),nn(en(e),"_onSeeking",(function(){e.seekingStart||(e.seekingStart=on(),e.emitLog("seekStart",{start:on()}))})),nn(en(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),nn(en(e),"_onWaiting",(function(){e._isWaiting||e.seekingStart||(e._isWaiting=!0,e._waitTimer=g.setTimeout(en(e),(function(){e._isWaiting&&(e.waitingStart=on(),g.clearTimeout(en(e),e._waitTimer),e._waitTimer=null,e.emitLog("waitingStart",{start:e.waitingStart}))}),200))})),nn(en(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),nn(en(e),"_onPlaying",(function(){e.suspendWaitingStatus("playing")})),e}return t=a,n=[{key:"afterCreate",value:function(){var e=this;this._onReset(),this.on(U,(function(){e.vt=e.pt=on()})),this.on(F,(function(){e.vt=on(),e.fvt=e.vt-e.pt,e.emitLog("firstFrame",{fvt:e.fvt})})),this.on(I,this._onWaiting),this.on(R,this._onSeeking),this.on(A,this._onSeeked),this.on(E,this._onPlaying),this.on(x,this._onError),this.on(G,this._onReset)}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer=g.setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),g.clearTimeout(e,e._waittTimer),e._waittTimer=null}),2e4)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=on(),n=t-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:t,costTime:n})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(g.clearTimeout(this,this._waitTimer),this._waitTimer=null),this.waitingStart){var t=on()-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{endType:e,costTime:t})}}},{key:"emitLog",value:function(e,t){var n=this.player;this.emit(ve,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},t))}}],i=[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}],n&&$t(t.prototype,n),i&&$t(t,i),a}(lt);function sn(e){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(e)}function an(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ln(e,t){return ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ln(e,t)}function un(e,t){if(t&&("object"===sn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}const hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fn(o);if(r){var n=fn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return un(this,e)});function a(){return an(this,a),s.apply(this,arguments)}return t=a,i=[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}],(n=[{key:"registerIcons",value:function(){return{replay:'<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78"><path fill="#fff" d="M28.227 33.876l3.04-1.229a1 1 0 011.303.553l.374.927a1 1 0 01-.552 1.302l-5.564 2.247-.927.375a1 1 0 01-1.302-.553l-2.622-6.49a1 1 0 01.553-1.302l.927-.374a1 1 0 011.302.552l.92 2.278A15.005 15.005 0 0139.5 23c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15a14.955 14.955 0 01-10.63-4.417 1.5 1.5 0 112.126-2.116A11.956 11.956 0 0039.5 50c6.627 0 12-5.373 12-12s-5.373-12-12-12a12.005 12.005 0 00-11.273 7.876z"/></svg>'}}},{key:"afterCreate",value:function(){var e=this;lt.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayHandler",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind("svg",["click","touchend"],this.__handleReplay),this.bind(".xgplayer-replay-txt",["click","touchend"],this.__handleReplay),this.on(T,(function(){if(e.playerConfig.loop||g.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}}})),this.on(C,(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),g.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind("svg",["click","touchend"],this.__handleReplay),this.unbind(".xgplayer-replay-txt",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}])&&cn(t.prototype,n),i&&cn(t,i),a}(lt);function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function gn(e,t){return gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gn(e,t)}function vn(e,t){if(t&&("object"===pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function mn(e){return mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mn(e)}var bn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mn(o);if(r){var n=mn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return vn(this,e)});function a(){return dn(this,a),s.apply(this,arguments)}return t=a,n=[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){g.addClass(this.root,"hide")}},{key:"show",value:function(){g.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(T,(function(){e.isEndedShow||g.addClass(e.root,"hide")})),this.config.hideCanplay?(this.once(j,(function(){e.onTimeUpdate()})),this.on(ne,(function(){g.removeClass(e.root,"hide"),g.addClass(e.root,"xg-showplay"),e.once(j,(function(){e.onTimeUpdate()}))}))):this.on(C,(function(){g.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?g.removeClass(this.root,"xg-showplay"):this.once(j,(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,n=e.hideCanplay,i=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(i,'">\n    </xg-poster>')}}],i=[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}],n&&yn(t.prototype,n),i&&yn(t,i),a}(lt);const wn=bn;function kn(e){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(e)}function _n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function On(e,t){return On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},On(e,t)}function Pn(e,t){if(t&&("object"===kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cn(e){return Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cn(e)}var En={};const Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cn(o);if(r){var n=Cn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Pn(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).autoPlayStart=!1,t}return t=a,n=[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.playerConfig;this.initIcons(),this.once(X,(function(){n&&(n.lang&&"en"===n.lang?g.addClass(t.root,"lang-is-en"):"jp"===n.lang&&g.addClass(t.root,"lang-is-jp"))})),this.on($,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";g.addClass(e.root,t),e.autoPlayStart=!0,e.onPlayPause("play")})),n.autoplay||this.show(),this.on(Q,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),g.removeClass(e.root,t),e.show()})),this.on(C,(function(){e.onPlayPause("play")})),this.on(S,(function(){e.onPlayPause("pause")})),this.clickHandler=this.hook("click",this.switchPausePlay,{pre:function(t){t.preventDefault(),t.stopPropagation(),e.emitUserAction(t,"switch_play_pause")}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"preventDefault",value:function(e){}},{key:"registerIcons",value:function(){return{startPlay:{icon:'<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',class:"xg-icon-play"},startPause:{icon:'<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){g.addClass(this.root,"hide")}},{key:"show",value:function(){g.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){g.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){g.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};En[e]&&window.clearTimeout(En[e].id),En[e]={},n.start&&n.start(),En[e].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(En[e].id),delete En[e]}),t)}("pauseplay",400,{start:function(){g.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){g.removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"switchPausePlay",value:function(e){var t=this.player;e.preventDefault(),e.stopPropagation(),t.isReady&&(!this.player.paused&&t.isPlaying?t.pause():t.play())}},{key:"onPlayPause",value:function(e){var t=this.config,n=this.player;if(n.isPlaying&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&n.paused&&!n.ended||t.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(En).map((function(e){window.clearTimeout(En[e].id),delete En[e]}))}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],i=[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}],n&&_n(t.prototype,n),i&&_n(t,i),a}(lt);function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function An(e,t){return An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},An(e,t)}function jn(e,t){if(t&&("object"===Sn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function In(e){return In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},In(e)}const Ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=In(o);if(r){var n=In(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return jn(this,e)});function a(){return xn(this,a),s.apply(this,arguments)}return t=a,i=[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}],(n=[{key:"render",value:function(){var e=this.config.innerHtml,t=g.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'.concat(i,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return t}}])&&Rn(t.prototype,n),i&&Rn(t,i),a}(lt);function Dn(e){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dn(e)}function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Fn(e,t){return Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fn(e,t)}function Bn(e,t){if(t&&("object"===Dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Hn(e){return Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hn(e)}const Un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hn(o);if(r){var n=Hn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Bn(this,e)});function a(){return Nn(this,a),s.apply(this,arguments)}return t=a,i=[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:10}}}],(n=[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}])&&Mn(t.prototype,n),i&&Mn(t,i),a}(lt);function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zn(e,t){return zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zn(e,t)}function Wn(e,t){if(t&&("object"===Kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Zn(e){return Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zn(e)}function Kn(e){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(e)}function Yn(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}var Xn=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],qn=Xn.length;function $n(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"===Kn(e)&&e.nodeType){var t=function(e){return window.getComputedStyle(e)}(e);if("none"===t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<qn;t++)e[Xn[t]]=0;return e}();var n={};n.width=e.offsetWidth,n.height=e.offsetHeight;for(var i=n.isBorderBox="border-box"===t.boxSizing,o=0;o<qn;o++){var r=Xn[o],s=t[r],a=parseFloat(s);n[r]=isNaN(a)?0:a}var c=n.paddingLeft+n.paddingRight,l=n.paddingTop+n.paddingBottom,u=n.marginLeft+n.marginRight,f=n.marginTop+n.marginBottom,h=n.borderLeftWidth+n.borderRightWidth,p=n.borderTopWidth+n.borderBottomWidth,d=i,y=Yn(t.width);!1!==y&&(n.width=y+(d?0:c+h));var g=Yn(t.height);return!1!==g&&(n.height=g+(d?0:l+p)),n.innerWidth=n.width-(c+h),n.innerHeight=n.height-(l+p),n.outerWidth=n.width+u,n.outerHeight=n.height+f,n}}function Qn(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.identifier===t)return i}}var Jn={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},ei=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zn(e,t)}(s,e);var t,n,i,o,r=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zn(i);if(o){var n=Zn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wn(this,e)});function s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Gn(this,s),(t=r.call(this)).isEnabled=!0,t.isDragging=!1,t.isDown=!1,t.position={},t.downPoint={},t.dragPoint={x:0,y:0},t.startPos={x:0,y:0},t._root=e instanceof Element?e:document.querySelector(e),t._handlerDom=n.handle instanceof Element?n.handle:document.querySelector(n.handle),t._root&&t._handlerDom?(t._bindStartEvent(),t):Wn(t)}return t=s,n=[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),Jn[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var n=Jn[this._startKey];n.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=Qn(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=Qn(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=Qn(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=$n(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit("dragStart",this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit("dragEnded")),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var n={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,t),n}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var n=this.startPos,i=n.x,o=n.y,r=this._dragPointerMove(e,t),s=r.x,a=r.y;s=this.checkContain("x",s,i),a=this.checkContain("y",a,o),this.position.x=i+s,this.position.y=o+a,this.dragPoint.x=s,this.dragPoint.y=a,this.emit("dragMove",this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,n){return t+n<0?0-n:"x"===e&&t+n>this.startPos.maxX?this.startPos.maxX-n:"y"===e&&t+n>this.startPos.maxY?this.startPos.maxY-n:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),i=0===t.indexOf("matrix3d")?12:4,o=parseInt(n[i],10),r=parseInt(n[i+1],10);this.position.x+=o,this.position.y+=r}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var n=$n(this._root.parentNode);return n?parseFloat(e)/100*n[t]:0}return parseInt(e,10)}}],n&&Vn(t.prototype,n),s}(r());function ti(e){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ti(e)}function ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ii(e,t){return ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ii(e,t)}function oi(e,t){if(t&&("object"===ti(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ri(e)}function ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function si(e){return si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},si(e)}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=si(o);if(r){var n=si(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return oi(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ai(ri(t=s.call(this,e)),"onCancelClick",(function(e){t.exitMini(),t.isClose=!0})),ai(ri(t),"onCenterClick",(function(e){var n=ri(t).player;n.paused?n.play():n.pause()})),ai(ri(t),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-t.pos.scrollY)<50)){var n=parseInt(g.getCss(t.player.root,"height"));n+=t.config.scrollTop,t.pos.scrollY=window.scrollY,window.scrollY>n+5?!t.isMini&&!t.isClose&&t.getMini():window.scrollY<=n&&(t.isMini&&t.exitMini(),t.isClose=!1)}})),t.isMini=!1,t.isClose=!1;var n=ri(t).config;return t.pos={left:n.left<0?window.innerWidth-n.width-20:n.left,top:n.top<0?window.innerHeight-n.height-20:n.top,height:t.config.height,width:t.config.width,scrollY:window.scrollY||0},t.lastStyle=null,t}return t=a,i=[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}],(n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(S,(function(){e.setAttr("data-state","pause")})),this.on(C,(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(Un,n,Un.pluginName)}var i=g.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",i,this.onCancelClick),this.bind(".play-icon",i,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new ei(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:'<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',class:"xg-icon-play"},pause:{icon:'<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},g.addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=i.style[t],i.style[t]="".concat(e.pos[t],"px")})),n.fluid&&(i.style["padding-top"]=""),this.emit(re,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;g.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){i.style[t]=e.lastStyle[t]})),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(re,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=g.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}])&&ni(t.prototype,n),i&&ni(t,i),a}(lt);function li(e){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},li(e)}function ui(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hi(e,t){return hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hi(e,t)}function pi(e,t){if(t&&("object"===li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return di(e)}function di(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yi(e)}function gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vi={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},mi=["videoClick","videoDbClick"],bi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yi(o);if(r){var n=yi(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pi(this,e)});function a(){var e;ui(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return gi(di(e=s.call.apply(s,[this].concat(n))),"onMouseMove",(function(t){var n=di(e),i=n.player,o=n.playerConfig;i.isActive||(i.focus({autoHide:!o.closeDelayBlur}),!o.closeFocusVideoFocus&&i.video.focus())})),gi(di(e),"onMouseEnter",(function(t){var n=di(e),i=n.playerConfig,o=n.player;!i.closeFocusVideoFocus&&o.video.focus(),i.closeDelayBlur?o.focus({autoHide:!1}):o.focus()})),gi(di(e),"onMouseLeave",(function(t){var n=e.playerConfig,i=n.closePlayerBlur,o=n.leavePlayerTime;i||(o?e.player.focus({autoHide:!0,delay:o}):e.player.blur())})),gi(di(e),"onVideoClick",(function(t){var n=di(e),i=n.player,o=n.playerConfig;t.target&&o.closeVideoClick||t.target!==i.root&&t.target!==i.video&&t.target!==i.innerContainer&&t.target!==i.video.__canvas||(t.preventDefault(),o.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,Ve(di(e),mi[0],(function(t,n){e.switchPlayPause(n.e)}),{e:t,paused:i.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),gi(di(e),"onVideoDblClick",(function(t){var n=di(e),i=n.player,o=n.playerConfig;!t.target||t.target!==i.video&&t.target!==i.video.__canvas||o.closeVideoDblclick||(e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),Ve(di(e),mi[1],(function(t,n){e.emitUserAction(n.e,"switch_fullscreen",{fullscreen:i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()}),{e:t,fullscreen:i.fullscreen})))})),e}return t=a,i=[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}],(n=[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,mi.map((function(t){e.__hooks[t]=null}));var t=this.playerConfig,n=t.enableContextmenu;t.isMobileSimulateMode||"mobile"===w.device||(this.config.disableContextmenu=!n,this.initEvents())}},{key:"initEvents",value:function(){var e=this,t=this.player,n=t.video,i=t.root;i.addEventListener("click",this.onVideoClick,!1),n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(vi).map((function(t){i.addEventListener(t,e[vi[t]],!1)})),this.config.disableContextmenu&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause"),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,n=t.video,i=t.root;this.clickTimer&&clearTimeout(this.clickTimer),i.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(vi).map((function(t){i.removeEventListener(t,e[vi[t]],!1)}))}}])&&fi(t.prototype,n),i&&fi(t,i),a}(Xe);function wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ki(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _i="pressend",Oi={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Pi={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Ci(e){return e&&e.length>0?e[e.length-1]:null}function Ei(e){var t=navigator.userAgent;/(?:iPhone|iPad)/.test(t)&&e.cancelable&&e.preventDefault()}var Ti=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};wi(this,e),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:300,disablePress:!1,disableDbClick:!1,miniStep:2},Object.keys(i).map((function(e){n.config[e]=i[e]})),this.root=t,this.events="mouse"===i.eventType?Pi:Oi,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}var t,n;return t=e,n=[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger("press",e),t._pos.press=!0,t.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger("doubleclick",e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger("click",e)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var n=this.__handlers[e],i=-1,o=0;o<n.length;o++)if(n[o]===t){i=o;break}i>=0&&this.__handlers[e].splice(i,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(n){try{n(t)}catch(t){console.error("trigger>>:".concat(e),t)}}))}},{key:"onTouchStart",value:function(e){var t=this._pos,n=this.root;Ei(e);var i=Ci(e.touches);t.x=i?parseInt(i.pageX,10):e.pageX,t.y=i?parseInt(i.pageX,10):e.pageX,t.start=!0,this.__setPress(e),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger("touchstart",e)}},{key:"onTouchCancel",value:function(e){this.onTouchEnd(e)}},{key:"onTouchEnd",value:function(e){var t=this._pos,n=this.root;Ei(e),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&this.trigger(_i,e),this.trigger("touchend",e),!t.press&&!t.moving&&this.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(e){var t=this._pos,n=this.config,i=Ci(e.touches),o=i?parseInt(i.pageX,10):e.pageX,r=i?parseInt(i.pageY,10):e.pageX,s=o-t.x,a=r-t.y;Math.abs(a)<n.miniStep&&Math.abs(s)<n.miniStep||(this.__clearPress(),t.press&&this.trigger(_i,e),t.press=!1,t.moving=!0,this.trigger("touchmove",e))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map((function(n){e.root.removeEventListener("touchend",e[t[n]])}))}}],n&&ki(t.prototype,n),e}();const Si=Ti;function xi(e){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xi(e)}function Ri(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ai(e,t){return Ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ai(e,t)}function ji(e,t){if(t&&("object"===xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ii(e)}function Ii(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Li(e){return Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Li(e)}function Di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ni="auto",Mi="seeking",Fi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ai(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Li(o);if(r){var n=Li(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ji(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Di(Ii(t=s.call(this,e)),"onTouchStart",(function(e){var n=Ii(t),i=n.player,o=n.config,r=n.pos,s=n.playerConfig,a=t.getTouche(e);if(a&&!o.disableGesture&&t.duration>0&&!i.ended){r.isStart=!0,g.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),t.find(".xg-dur").innerHTML=g.format(t.duration);var c=t.root.getBoundingClientRect();90===i.rotateDeg?(r.top=c.left,r.left=c.top,r.width=c.height,r.height=c.width):(r.top=c.top,r.left=c.left,r.width=c.width,r.height=c.height),r.x=parseInt(a.pageX-r.left,10),r.y=parseInt(a.pageY-r.top,10),r.scopeL=o.scopeL*r.width,r.scopeR=(1-o.scopeR)*r.width,r.scopeM1=r.width*(1-o.scopeM)/2,r.scopeM2=r.width-r.scopeM1}})),Di(Ii(t),"onTouchMove",(function(e){var n=t.getTouche(e),i=Ii(t),o=i.pos,r=i.config,s=i.player;if(n&&!r.disableGesture&&t.duration&&o.isStart){var a=r.miniMoveStep,c=r.hideControlsActive,l=parseInt(n.pageX-o.left,10),u=parseInt(n.pageY-o.top,10);if(Math.abs(l-o.x)>a||Math.abs(u-o.y)>a){var f=l-o.x,h=u-o.y,p=o.scope;if(-1===p&&(0===(p=t.checkScope(l,u,f,h,o))&&(c?s.blur():s.focus({autoHide:!1}),!o.time&&(o.time=parseInt(1e3*s.currentTime,10)+1e3*t.timeOffset)),o.scope=p),-1===p||p>0&&!r.gestureY||0===p&&!r.gestureX)return;e.cancelable&&e.preventDefault(),t.executeMove(f,h,p,o.width,o.height),o.x=l,o.y=u}}})),Di(Ii(t),"onTouchEnd",(function(e){var n=Ii(t),i=n.player,o=n.pos,r=n.playerConfig;o.isStart&&(o.scope>-1&&e.cancelable&&e.preventDefault(),t.endLastMove(o.scope),setTimeout((function(){i.getPlugin("progress")&&i.getPlugin("progress").resetSeekState()}),10),o.scope=-1,t.resetPos(),g.checkIsFunction(r.enableSwipeHandler)&&r.enableSwipeHandler(),t.changeAction(Ni))})),Di(Ii(t),"onRootTouchMove",(function(e){!t.config.disableGesture&&t.config.gestureX&&t.checkIsRootTarget(e)&&(e.stopPropagation(),t.pos.isStart?t.onTouchMove(e):t.onTouchStart(e))})),Di(Ii(t),"onRootTouchEnd",(function(e){if(t.pos.isStart&&t.checkIsRootTarget(e)){e.stopPropagation(),t.onTouchEnd(e);var n=t.player.controls;n&&n.recoverAutoHide()}})),t.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},t.timer=null,t}return t=a,n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:'<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".54" d="M7.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 010 7.964V1.036A1 1 0 011.5.17l6 3.464z" fill="#fff"/><path d="M12.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 015 7.964V1.036A1 1 0 016.5.17l6 3.464z" fill="#fff"/></svg>',class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,i=this.player;!0===t.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),g.isUndefined(t.disableGesture)||(n.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=g.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var o="mobile"!==w.device?"mouse":"touch";this.touch=new Si(this.root,{eventType:o}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(N,(function(){var t=e.player,n=e.config;1e3*t.duration<n.moveDuration&&(n.moveDuration=1e3*t.duration)})),this.on([L,T],(function(){var t=e.pos,n=t.time;!t.isStart&&n>0&&(e.pos.time=0)}));var r={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(r).map((function(t){e.touch.on(t,(function(n){e[r[t]](n)}))})),!n.disableActive){var s=i.plugins.progress;s&&(s.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),s.addCallBack("dragend",(function(){e.changeAction(Ni)})))}}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;if(e&&e.usable){this.thumbnail=e.createThumbnail(null,"mobile-thumbnail");var t=this.find(".time-preview");t.insertBefore(this.thumbnail,t.children[0])}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&g.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);var n=t.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,n,i,o){var r=o.width,s=-1;if(e<0||e>r)return s;var a=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&a>=1.73&&e>o.scopeM1&&e<o.scopeM2?s=0:(0===Math.abs(n)||a<=.57)&&(s=e<o.scopeL?1:e>o.scopeR?2:3),s}},{key:"executeMove",value:function(e,t,n,i,o){switch(n){case 0:this.updateTime(e/i*this.config.scopeM);break;case 1:this.updateBrightness(t/o);break;case 2:w.os.isIos||this.updateVolume(t/o)}}},{key:"endLastMove",value:function(e){var t=this,n=this.pos,i=this.player,o=this.config,r=(n.time-this.timeOffset)/1e3;0===e&&(i.seek(Number(r).toFixed(1)),o.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500)),this.changeAction(Ni)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"onClick",value:function(e){var t=this.player,n=this.config,i=this.playerConfig;t.isPlaying?!n.closedbClick||i.closeVideoClick?t.isActive?t.blur():t.focus():i.closeVideoClick||(t.isActive&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),t.focus()):i.closeVideoClick||(this.emitUserAction("click","switch_play_pause"),t.play())}},{key:"onDbClick",value:function(e){var t=this.config,n=this.player;!t.closedbClick&&n.isPlaying&&(this.emitUserAction("dblclick","switch_play_pause"),this.switchPlayPause())}},{key:"onPress",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction("playbackrate"))}},{key:"onPressEnd",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{from:i.playbackRate,to:t.rate}),i.playbackRate=t.rate,t.rate=1,this.changeAction(Ni))}},{key:"updateTime",value:function(e){var t=this.player,n=this.config,i=this.player.duration;e=Number(e.toFixed(4));var o=parseInt(e*n.moveDuration,10)+this.timeOffset;o=(o+=this.pos.time)<0?0:o>1e3*i?1e3*i-200:o,t.getPlugin("time")&&t.getPlugin("time").updateTime(o/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(o/1e3/this.duration,!0),this.activeSeekNote(o/1e3,e>0),n.isTouchingSeek&&t.seek(Number((o-this.timeOffset)/1e3).toFixed(1)),this.pos.time=o}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,n=this.pos;if(e=parseInt(100*e,10),n.volume+=e,!(Math.abs(n.volume)<10)){var i=parseInt(10*t.volume,10)-parseInt(n.volume/10,10);i=i>10?10:i<1?0:i,t.volume=i/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,n=this.config,i=this.xgMask,o=t.light+.8*e;o=o>n.maxDarkness?n.maxDarkness:o<0?0:o,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(o,")")),t.light=o}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,i=this.config,o=!(this.duration!==1/0&&this.duration>0);if(e&&"number"==typeof e&&!o&&!i.disableActive){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(Mi);var r=n.plugins.start;r&&r.focusHide(),this.find(".xg-dur").innerHTML=g.format(this.duration),this.find(".xg-cur").innerHTML=g.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?g.removeClass(this.find(".xg-seek-show"),"xg-back"):g.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(!e.hasStart)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],i=[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{stopPropagation:!0,index:0,disableGesture:!1,gestureX:!0,gestureY:!0,updateGesture:function(){},onTouchStart:function(){},onTouchEnd:function(){},gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1}}}],n&&Ri(t.prototype,n),i&&Ri(t,i),a}(lt);const Bi=Fi;function Hi(e){return Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hi(e)}function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zi(e,t){return zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zi(e,t)}function Wi(e,t){if(t&&("object"===Hi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zi(e)}function Zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ki(e){return Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ki(e)}function Yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xi(e){e.preventDefault(),e.returnValue=!1}function qi(e){var t=e.tagName;return!("INPUT"!==t&&"TEXTAREA"!==t&&!e.isContentEditable)}const $i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zi(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ki(o);if(r){var n=Ki(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wi(this,e)});function a(){var e;Gi(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Yi(Zi(e=s.call.apply(s,[this].concat(n))),"onBodyKeyDown",(function(t){var n=t||window.event;if(!(e.config.disable||e.config.disableBodyTrigger||!e.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var i=n.keyCode;return!(n.target!==document.body&&(!e.config.isGlobalTrigger||qi(n.target))||!e.checkCode(i,!0)||(Xi(n),e.handleKeyCode(i,t),1))}})),Yi(Zi(e),"onKeydown",(function(t){var n=t||window.event;if(!(e.config.disable||n.metaKey||n.altKey||n.ctrlKey)){if(!n||37!==n.keyCode&&!e.checkCode(n.keyCode)||n.target!==e.player.root&&n.target!==e.player.video&&n.target!==e.player.controls.el)return!0;Xi(n),e.handleKeyCode(n.keyCode,t)}})),e}return t=a,n=[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(i){t[n][i]&&(e.keyCodeMap[n][i]=t[n][i])})):e.keyCodeMap[n]=t[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,n=e.top,i=e.bottom,o=window.innerHeight;return!(n<0&&n<0-.9*t||i>0&&i-o>.9*t)}},{key:"checkCode",value:function(e,t){var n=this,i=!1;return Object.keys(this.keyCodeMap).map((function(o){n.keyCodeMap[o]&&e===n.keyCodeMap[o].keyCode&&!n.keyCodeMap[o].disable&&(i=!t||t&&!n.keyCodeMap[o].noBodyTarget)})),i}},{key:"downVolume",value:function(e){var t=this.player,n=parseFloat((t.volume-.1).toFixed(1));this.emitUserAction(e,"change_volume",{from:t.volume,to:n}),t.volume=n>=0?n:0}},{key:"upVolume",value:function(e){var t=this.player,n=parseFloat((t.volume+.1).toFixed(1));this.emitUserAction(e,"change_volume",{from:t.volume,to:n}),t.volume=n<=1?n:1}},{key:"seek",value:function(e){var t,n=this.player,i=n.currentTime,o=n.duration;t=i+this.seekStep<=o?i+this.seekStep:o-1,this.emitUserAction(e,"seek",{from:i,to:t}),this.player.currentTime=t}},{key:"seekBack",value:function(e){var t=this.player.currentTime,n=0;t-this.seekStep>=0&&(n=t-this.seekStep),this.emitUserAction(e,"seek",{from:t,to:n}),this.player.currentTime=n}},{key:"playPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause()}},{key:"exitFullscreen",value:function(e){var t=this.player,n=t.isCssfullScreen,i=t.fullscreen;i&&(t.exitFullscreen(),this.emitUserAction("keyup","switch_fullscreen",{fullscreen:i})),n&&(t.exitCssFullscreen(),this.emitUserAction("keyup","switch_css_fullscreen",{cssfullscreen:n}))}},{key:"handleKeyCode",value:function(e,t){var n=this;Object.keys(this.keyCodeMap).map((function(i){var o=n.keyCodeMap[i],r=o.action,s=o.keyCode,a=o.disable;s!==e||a||("function"==typeof r?r(t,n.player):"string"==typeof r&&"function"==typeof n[r]&&n[r](t,n.player),n.emit(ge,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){Yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:i,target:t.target},n.keyCodeMap[i])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],i=[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1}}}],n&&Vi(t.prototype,n),i&&Vi(t,i),a}(Xe);function Qi(e){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qi(e)}function Ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function to(e,t){return to=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},to(e,t)}function no(e,t){if(t&&("object"===Qi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function io(e){return io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},io(e)}const oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&to(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=io(o);if(r){var n=io(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return no(this,e)});function a(){return Ji(this,a),s.apply(this,arguments)}return t=a,i=[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:st.ROOT}}}],(n=[{key:"registerIcons",value:function(){return{loadingIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110"><path d="M100 50A50 50 0 1150 0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"/></svg>'}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}])&&eo(t.prototype,n),i&&eo(t,i),a}(lt);function ro(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var so=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],ao=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fragments=t.fragments||[],this.focusClass="inner-focus",this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}var t,n;return t=e,n=[{key:"updateDuration",value:function(e){var t=this;this.duration=parseInt(1e3*e);var n=0,i=this.fragments;this.fragments=i.map((function(e){return e.start=n,e.end=n+e.percent*t.duration,e.duration=e.percent*t.duration,n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,o=t.newIndex,r=t.curIndex,s=t.millisecond;o!==r&&n.map((function(t,n){n<o?t[e].style.width="100%":n>o&&(t[e].style.width=0)}));var a=i[o],c=0===s?0:(s-a.start)/a.duration;n[o][e].style.width=c<0?0:"".concat(100*c,"%")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(t)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==g.typeOf(e.played)){var o=this.findIndex(1e3*e.played,n);this.updateProgress("played",{newIndex:o,curIndex:n,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=o}if("Undefined"!==g.typeOf(e.cached)){var r=this.findIndex(1e3*e.cached,i);this.updateProgress("cached",{newIndex:r,curIndex:i,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=r}}},{key:"findIndex",value:function(e,t){var n=this.fragments;return 1===n.length?0:(e>n[t].start&&e<n[t].end||this.fragments.map((function(n,i){e>n.start&&e<=n.end&&(t=i)})),t)}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(g.hasClass(e[t],this.focusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)g.removeClass(e[t],this.focusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return g.addClass(t[e],this.focusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var e=this,t=this.style.progressColor;return this.root=g.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map((function(n){var i=g.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?"inner-focus":""," xgplayer-progress-inner"));return e.root.appendChild(i),so.map((function(t){i.appendChild(g.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:i.children[0],played:i.children[1]}}))),this.root}}],n&&ro(t.prototype,n),e}();function co(e){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(e)}function lo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function uo(e,t){return uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uo(e,t)}function fo(e,t){if(t&&("object"===co(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ho(e)}function ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function po(e){return po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},po(e)}function yo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=po(o);if(r){var n=po(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fo(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),yo(ho(t=s.call(this,e)),"onMoveOnly",(function(e){var n=ho(t),i=n.pos,o=n.config,r=n.player;g.event(e);var s=g.getEventPos(e,r.zoom),a=90===r.rotateDeg?s.clientY:s.clientX;if(!(i.moving&&Math.abs(i.x-a)<o.miniMoveStep)){i.moving=!0,i.x=a;var c=t.computeTime(e);t.triggerCallbacks("dragmove",c)}})),yo(ho(t),"onBodyClick",(function(e){e.preventDefault(),e.stopPropagation()})),yo(ho(t),"onMouseDown",(function(e){var n=ho(t),i=n.player,o=n.pos,r=n.config,s=n.playerConfig,a=g.getEventPos(e,i.zoom),c=90===i.rotateDeg?a.clientY:a.clientX;if(!(i.isMini||r.closeMoveSeek||!s.allowSeekAfterEnded&&i.ended)){e.stopPropagation(),e.preventDefault(),t.focus(),g.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),g.checkIsFunction(r.onMoveStart)&&r.onMoveStart(),g.event(e),o.x=c,o.isDown=!0,o.moving=!1,i.focus({autoHide:!1}),t.isProgressMoving=!0,g.addClass(t.progressBtn,"active");var l=t.computeTime(e);return t._state.time=l.currentTime,t.updateWidth(l.currentTime,l.percent,0),t.isMobile?(t.bind("touchmove",t.onMouseMove),t.bind("touchend",t.onMouseUp)):(t.unbind("mousemove",t.onMoveOnly),document.addEventListener("mousemove",t.onMouseMove,!1),document.addEventListener("mouseup",t.onMouseUp,!1),i.root.addEventListener("click",t.onBodyClick,!1)),!0}})),yo(ho(t),"onMouseUp",(function(e){var n=ho(t),i=n.player,o=n.config,r=n.pos,s=n.playerConfig,a=n._state;e.stopPropagation(),e.preventDefault(),g.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),g.checkIsFunction(o.onMoveEnd)&&o.onMoveEnd(),g.event(e),g.removeClass(t.progressBtn,"active");var c=t.computeTime(e);r.moving?(t.updateWidth(c.currentTime,c.percent,2),t.triggerCallbacks("dragend",c)):t.triggerCallbacks("click",c),r.moving=!1,r.isDown=!1,r.x=0,r.y=0,a.time=0,t.isMobile?(t.unbind("touchmove",t.onMouseMove),t.unbind("touchend",t.onMouseUp),t.blur()):(document.removeEventListener("mousemove",t.onMouseMove,!1),document.removeEventListener("mouseup",t.onMouseUp,!1),i.root.removeEventListener("click",t.onBodyClick,!1),r.isEnter?!s.isMobileSimulateMode&&t.bind("mousemove",t.onMoveOnly):t.onMouseLeave(e)),g.setTimeout(ho(t),(function(){t.resetSeekState()}),10),i.focus()})),yo(ho(t),"onMouseMove",(function(e){var n=ho(t),i=n.pos,o=n.player,r=n.config,s=n._state;t.isMobile&&(e.stopPropagation(),e.preventDefault()),g.event(e);var a=g.getEventPos(e,o.zoom),c=90===o.rotateDeg?a.clientY:a.clientX,l=Math.abs(i.x-c);if(!(i.moving&&l<r.miniMoveStep||!i.moving&&l<r.miniStartStep)){i.x=c;var u=t.computeTime(e);s.time<u.currentTime?u.forward=!0:u.forward=!1,s.time=u.currentTime,i.isDown&&!i.moving&&(i.moving=!0,r.isPauseMoving&&o.pause(),t.triggerCallbacks("dragstart",u)),t.updateWidth(u.currentTime,u.percent,1),t.triggerCallbacks("dragmove",u)}})),yo(ho(t),"onMouseEnter",(function(e){var n=ho(t),i=n.player,o=n.pos;o.isDown||o.isEnter||i.isMini||!i.config.allowSeekAfterEnded&&i.ended||(o.isEnter=!0,t.bind("mousemove",t.onMoveOnly),t.bind("mouseleave",t.onMouseLeave),t.focus())})),yo(ho(t),"onMouseLeave",(function(e){var n=ho(t),i=n.player,o=n.pos;o.isEnter=!1,i.isMini||(t.unbind("mousemove",t.onMoveOnly),o.isDown?t.unbind("mouseleave",t.onMouseLeave):t.blur())})),t.useable=!1,t.isProgressMoving=!1,t.__dragCallBacks=[],t._state={now:-1,direc:0,time:0},t}return t=a,n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.progress&&(e.config.disable=!e.player.config.progress)}},{key:"createInner",value:function(){var e=this;this.innerList=new ao({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)}))}},{key:"afterCreate",value:function(){var e=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),"mobile"===w.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(j,(function(){e.onTimeupdate()})),this.on(A,(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(H,(function(){e.onCacheUpdate()})),this.on(T,(function(){e.onCacheUpdate(),e._state.now=0})),this.on(G,(function(){e.onReset()})),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===co(e)&&Object.keys(e).map((function(n){t.style[n]=e[n]})))}},{key:"triggerCallbacks",value:function(e,t){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(n){if(n&&n.handler&&n.type===e)try{n.handler(t)}catch(e){console.error("[XGPLAYER][triggerCallbacks] ".concat(n," error"),e)}}))}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var n=this.__dragCallBacks,i=-1;n.map((function(n,o){n&&n.type===e&&n.handler===t&&(i=o)})),i>-1&&n.splice(i,1)}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,n=e.config;this.isMobile?(this.bind("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",g.stopPropagation),t.center&&t.center.addEventListener("touchend",g.stopPropagation))):(this.bind("mousedown",this.onMouseDown),!n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),g.addClass(this.root,"active")}},{key:"blur",value:function(){this.player.controls.recoverAutoHide(),g.removeClass(this.root,"active")}},{key:"updateWidth",value:function(e,t,n){var i=this.config,o=this.player;if(!i.isCloseClickSeek||0!==n){var r=e>o.duration?o.duration-.2:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==n||i.isDragingSeek&&"audio"!==o.videoConfig.mediaType)&&(this._state.now=r,this._state.direc=r>o.currentTime?0:1,o.seek(r))}}},{key:"computeTime",value:function(e){var t,n,i,o=this.player,r=this.root.getBoundingClientRect(),s=r.width,a=r.height,c=r.top,l=r.left,u=g.getEventPos(e,o.zoom);90===o.rotateDeg?(t=a,n=c,i=u.clientY):(t=s,n=l,i=u.clientX);var f=i-n,h=(f=f>t?t:f<0?0:f)/t;return{percent:h=h<0?0:h>1?1:h,currentTime:parseInt(h*this.duration*1e3,10)/1e3,offset:f,width:t,left:n,e}}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var i=t.plugins.time;i&&i.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,t=this._state,n=this.duration;if(!e.isSeeking&&!this.isProgressMoving&&e.hasStart){if(t.now>-1){var i=parseInt(1e3*t.now,10)-parseInt(1e3*e.currentTime,10);if(0===t.direc&&i>300||1===t.direc&&i>-300)return void(t.now=-1);t.now=-1}var o=this.timeOffset+e.currentTime;this.innerList.update({played:o},n),this.progressBtn.style.left="".concat(o/n*100,"%");var r=this.player.plugins.miniprogress;r&&r.update({played:o},n)}}},{key:"onCacheUpdate",value:function(){var e=this.player,t=this.duration,n=e.bufferedPoint;this.innerList.update({cached:n.end},t);var i=this.player.plugins.miniprogress;i&&i.update({cached:n.end},t)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,this.isMobile?(this.unbind("touchstart",this.onMouseDown),this.unbind("touchmove",this.onMouseMove),this.unbind("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",g.stopPropagation),t.center&&t.center.removeEventListener("touchend",g.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],i=[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}],n&&lo(t.prototype,n),i&&lo(t,i),a}(lt);const vo=go;function mo(e){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mo(e)}function bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ko(e,t){return ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ko(e,t)}function _o(e,t){if(t&&("object"===mo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Oo(e){return Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oo(e)}const Po=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ko(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Oo(o);if(r){var n=Oo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _o(this,e)});function a(){return bo(this,a),s.apply(this,arguments)}return t=a,i=[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_LEFT,index:0,disable:!1}}}],(n=[{key:"afterCreate",value:function(){var e=this,t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(S,(function(){e.animate(t.paused)})),this.on(C,(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:'<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',class:"xg-icon-play"},pause:{icon:'<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause"),t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t=this.i18nKeys;e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),t.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),t.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}])&&wo(t.prototype,n),i&&wo(t,i),a}(lt);function Co(e){return Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Co(e)}function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function To(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function So(e,t){return So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},So(e,t)}function xo(e,t){if(t&&("object"===Co(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ro(e){return Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ro(e)}var Ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&So(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ro(o);if(r){var n=Ro(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xo(this,e)});function a(){return Eo(this,a),s.apply(this,arguments)}return t=a,i=[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:st.ROOT_TOP,index:0}}}],(n=[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:'<svg width="32" height="40" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M11.237 14l6.382-6.381A.875.875 0 1016.38 6.38l-7 7a.875.875 0 000 1.238l7 7a.875.875 0 101.238-1.238L11.237 14z" fill="#FFF" fill-rule="evenodd"/></svg>',class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){g.addClass(this.root,"show")}},{key:"hide",value:function(){g.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}])&&To(t.prototype,n),i&&To(t,i),a}(lt);function jo(e){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(e)}function Io(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Do(e,t,n){return Do="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bo(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},Do(e,t,n||e)}function No(e,t){return No=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},No(e,t)}function Mo(e,t){if(t&&("object"===jo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fo(e)}function Fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bo(e){return Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Bo(e)}function Ho(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&No(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bo(o);if(r){var n=Bo(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Mo(this,e)});function a(){var e;Io(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Ho(Fo(e=s.call.apply(s,[this].concat(n))),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.setRotateDeg(0):e.setRotateDeg(90))})),e}return t=a,i=[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}],(n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.fullscreen&&(e.config.disable=!e.player.config.fullscreen)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var i=g.getFullScreenEl();n.fullscreenTarget===i&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreen_change",this.changeFullScreen,{pre:function(t){e.emitUserAction(t,"switch_fullscreen",{fullscreen:e.player.fullscreen})}}),this.bind(".xgplayer-fullscreen","mobile"===w.device?"touchend":"click",this.handleFullscreen),this.on(ie,(function(t){e.changeLangTextKey(e.find(".xg-tips"),t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t),e.config.needBackIcon&&e.show()})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:Ao,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===w.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M19.173 6.861h6.798v6.798h-2.694V9.555h-4.104V6.86zm4.104 16.416v-4.104h2.694v6.798h-6.798v-2.694h4.104zM6.861 13.66V6.86h6.798v2.694H9.555v4.104H6.86zm2.694 5.514v4.104h4.104v2.694H6.86v-6.798h2.694z"/></svg>',class:"xg-get-fullscreen"},exitFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M21.867 10.965h4.104v2.694h-6.798V6.86h2.694v4.104zm-2.694 15.006v-6.798h6.798v2.694h-4.104v4.104h-2.694zm-8.208-15.006V6.861h2.694v6.798H6.86v-2.694h4.104zM6.861 21.867v-2.694h6.798v6.798h-2.694v-4.104H6.861z"/></svg>',class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon","mobile"===w.device?"touchend":"click",this.handleFullscreen),"mobile"===w.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"setRotateDeg",value:function(e){var t=this.player;90===window.orientation||-90===window.orientation?t.rotateDeg=0:t.rotateDeg=e}},{key:"getRotateFullscreen",value:function(e){var t=this.player;t.isCssfullScreen&&t.exitCssFullscreen(e);var n=e?yt.INNER_FULLSCREEN:yt.ROTATE_FULLSCREEN;t._fullscreenEl=e||t.root,t.changeFullStyle(t.root,e,n,yt.PARENT_ROTATE_FULLSCREEN),t.fullscreen=!0,this.setRotateDeg(90),this.emit(ie,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this.player;t.fullscreen=!1;var n=t._fullscreenEl!==t.root?yt.INNER_FULLSCREEN:yt.ROTATE_FULLSCREEN;t.recoverFullStyle(t.root,t._fullscreenEl,n,yt.PARENT_ROTATE_FULLSCREEN),this.setRotateDeg(0),this.emit(ie,!1)}},{key:"changeFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,n=this.config,i=!1;if((!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen())&&(i=!0),i)t.fullscreen?(t.fullscreen=!1,t.exitCssFullscreen(),this.emit(ie,!1)):(t.fullscreen=!0,t.getCssFullscreen(),this.emit(ie,!0)),this.animate(t.fullscreen);else if(n.rotateFullscreen)t.fullscreen?this.exitRotateFullscreen():this.getRotateFullscreen(),this.animate(t.fullscreen);else{if(n.switchCallback&&"function"==typeof n.switchCallback)return void n.switchCallback(t.fullscreen);t.fullscreen?t.exitFullscreen():t.getFullscreen()}}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){Do(Bo(a.prototype),"show",this).call(this)}},{key:"hide",value:function(){Do(Bo(a.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</div>\n    </xg-icon>")}}}])&&Lo(t.prototype,n),i&&Lo(t,i),a}(lt);function Go(e){return Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Go(e)}function Vo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zo(e,t,n){return zo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ko(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},zo(e,t,n||e)}function Wo(e,t){return Wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wo(e,t)}function Zo(e,t){if(t&&("object"===Go(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ko(e){return Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ko(e)}var Yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wo(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ko(o);if(r){var n=Ko(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Zo(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).isActiving=!1,t}return t=a,n=[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(N,(function(){e.onTimeUpdate()})),this.on(j,(function(){e.onTimeUpdate()})),this.on(G,(function(){e.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&zo(Ko(a.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!this.config.disable&&!this.isActiving&&e.hasStart){var t=e.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=g.format(t),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=g.format(this.duration))):(this.timeDom.innerHTML=g.format(t),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=g.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=g.format(0),this.centerDurDom.innerHTML=g.format(0)):(this.timeDom.innerHTML=g.format(0),this.durationDom.innerHTML=g.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=g.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=g.createDom("xg-icon","00:00",{},"xgplayer-time right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(g.hide(this.durationDom),g.hide(this.timeDom),g.hide(this.find(".time-separator")),g.show(this.find(".time-live-tag"))):g.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(g.hide(this.durationDom),g.hide(this.timeDom),g.hide(this.find(".time-separator")),g.show(this.find(".time-live-tag"))):(g.hide(this.find(".time-live-tag")),g.show(this.find(".time-separator")),g.show(this.durationDom),g.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=g.format(e):this.centerCurDom.innerHTML=g.format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,n=function(){e.isActiving=!1};this.off(A,n),t.isSeeking?this.once(A,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_LEFT,index:2,disable:!1}}}],n&&Vo(t.prototype,n),i&&Vo(t,i),a}(lt);const Xo=Yo;function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}function $o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jo(e,t){return Jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Jo(e,t)}function er(e,t){if(t&&("object"===qo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tr(e)}function tr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var or=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jo(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nr(o);if(r){var n=nr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return er(this,e)});function a(){var e;$o(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return ir(tr(e=s.call.apply(s,[this].concat(n))),"onBarMousedown",(function(t){var n=tr(e).player,i=e.find(".xgplayer-slider"),o=e.find(".xgplayer-bar");i.focus(),g.event(t);var r=o.getBoundingClientRect(),s=g.getEventPos(t,n.zoom),a=(s.clientX,s.clientY),c=r.height-(s.clientY-r.top);e.updateVolumePos(c,t),e.isMoving=!1;var l=function(t){t.preventDefault(),t.stopPropagation(),g.event(t);var i=g.getEventPos(t,n.zoom);e.isMoving=!0;var o=c-i.clientY+a;o>r.height||e.updateVolumePos(o,t)},u=function t(n){n.preventDefault(),n.stopPropagation(),g.event(n),window.removeEventListener("mousemove",l),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t),e.isMoving=!1};return window.addEventListener("mousemove",l),window.addEventListener("touchmove",l),window.addEventListener("mouseup",u),window.addEventListener("touchend",u),!1})),ir(tr(e),"onMouseenter",(function(t){g.addClass(e.root,"slide-show")})),ir(tr(e),"onMouseleave",(function(t){g.removeClass(e.root,"slide-show")})),ir(tr(e),"onVolumeChange",(function(t){var n=e.player,i=n.muted,o=n.volume;e.isMoving||(e.find(".xgplayer-drag").style.height=i||0===o?"0px":"".concat(100*o,"%")),e.animate(i,o)})),e}return t=a,n=[{key:"registerIcons",value:function(){return{volumeSmall:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM17.554 15.295L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998zm0 0L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',class:"xg-volume-small"},volumeLarge:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.753 18.48l-1.593-1.592c1.437-1.429 2.326-3.407 2.326-5.592s-.89-4.163-2.326-5.591l1.593-1.593c1.845 1.835 2.987 4.376 2.987 7.184s-1.142 5.349-2.987 7.184zm-3.199-3.185L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',class:"xg-volume"},volumeMuted:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.306 9.703l-2.394-2.406-1.604 1.604 2.417 2.395-2.406 2.395 1.604 1.604 2.383-2.418 2.395 2.406 1.604-1.604-2.417-2.383 2.406-2.395-1.604-1.604-2.384 2.418z"/></svg>',class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){this.initIcons();var t=this.playerConfig,n=t.commonStyle,i=t.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("muted_change",(function(t){e.changeMuted(t)}),{pre:function(t){t.preventDefault(),t.stopPropagation(),e.emitUserAction(t,"change_muted",{muted:e.player.muted})}}),"mobile"===w.device||this.playerConfig.isMobileSimulateMode||(this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown)),this.bind(".xgplayer-icon","mobile"===w.device?"touchend":"click",this.changeMutedHandler),this.on(M,this.onVolumeChange),this.once(F,this.onVolumeChange),"Number"!==g.typeOf(i)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var n=this.player,i=this.find(".xgplayer-drag"),o=e/this.find(".xgplayer-bar").getBoundingClientRect().height;i.style.height="".concat(e,"px"),this.emitUserAction(t,"change_volume",{muted:n.muted,volume:n.volume}),n.volume=Math.max(Math.min(o,1),0),n.muted=!1,this.config.showValueLabel&&this.updateVolumeValue()}},{key:"updateVolumeValue",value:function(){var e=this.player.volume,t=this.find(".xgplayer-value-label"),n=Math.max(Math.min(e,1),0);t.innerText=Math.ceil(100*n)}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;t.volume<.01?t.volume=this.config.default:t.muted=!t.muted}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-bar","mousedown",this.onBarMousedown),this.unbind(".xgplayer-icon","mobile"===w.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],i=[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6}}}],n&&Qo(t.prototype,n),i&&Qo(t,i),a}(lt);const rr=or;function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}function ar(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cr(e,t){return cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cr(e,t)}function lr(e,t){if(t&&("object"===sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ur(e)}var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ur(o);if(r){var n=ur(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return lr(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).rotateDeg=t.config.rotateDeg||0,t}return t=a,n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.rotate&&(e.config.disable=!e.player.config.rotate)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(fe,(function(){console.log("Events.VIDEO_RESIZE"),e.rotateDeg&&g.setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var n=this.player;e||(e=0);var i=this.player,o=i.root,r=i.innerContainer,s=i.video,a=o.offsetWidth,c=r&&t?r.offsetHeight:o.offsetHeight,l="100%",u="100%",f=0,h=0;.75!==e&&.25!==e||(l="".concat(c,"px"),u="".concat(a,"px"),f=-(c-a)/2,h=-(a-c)/2);var p="translate(".concat(f,"px,").concat(h,"px) rotate(").concat(e,"turn)"),d={transformOrigin:"center center",transform:p,webKitTransform:p,height:u,width:l},y=t?s:o,g=t?n.getPlugin("poster"):null;Object.keys(d).map((function(e){y.style[e]=d[e],g&&g.root&&(g.root.style[e]=d[e])}))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.player;this.rotateDeg||(this.rotateDeg=0);var o=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*o*n)%1,this.updateRotateDeg(this.rotateDeg,t),i.emit(pe,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none"><g clip-path="url(#clip0)" fill="#fff"><path d="M17.5 13.75H6.25A3.75 3.75 0 002.5 17.5v6.25a3.75 3.75 0 003.75 3.75H17.5a3.75 3.75 0 003.75-3.75V17.5a3.75 3.75 0 00-3.75-3.75z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.822 6.094a1.247 1.247 0 00.156 1.79l4.509 4.204a1.25 1.25 0 101.705-1.828L9.93 8.152l4.799-.018.039-.001a10 10 0 019.521 13.983 1.25 1.25 0 002.292.998 12.5 12.5 0 00-11.88-17.48l-5.05.019 2.293-2.46a1.25 1.25 0 10-1.829-1.705L5.854 6.06l-.032.036z"/></g><defs><clipPath id="RotateSvg-clip0"><path fill="#fff" d="M0 0h40v40H0z"/></clipPath></defs></svg>'}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}],n&&ar(t.prototype,n),i&&ar(t,i),a}(lt);function hr(e){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(e)}function pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yr(e,t){return yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yr(e,t)}function gr(e,t){if(t&&("object"===hr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vr(e)}function vr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e){return mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mr(e)}function br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wr="picture-in-picture",kr="inline",_r="fullscreen",Or=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mr(o);if(r){var n=mr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gr(this,e)});function a(){var e;pr(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return br(vr(e=s.call.apply(s,[this].concat(n))),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{from:"pip",to:"normal"}),e.setAttr("data-state","normal")):4===e.player.video.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{from:"normal",to:"pip"}),e.setAttr("data-state","pip"))})),e}return t=a,n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(this.pMode=kr,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(J,(function(){e.config.showIcon&&(g.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/></svg>',class:"xg-get-pip"},pipIconExit:{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 7.7a.5.5 0 00.5-.5v-.7a.5.5 0 00-.5-.5h-4a.5.5 0 00-.5.5v3.96a.5.5 0 00.5.5h.7a.5.5 0 00.5-.5V8.83l2.07 2.109a.5.5 0 00.707.006l.5-.49a.5.5 0 00.006-.707L7.973 7.7H9.5z" fill="#fff"/></svg>',class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var n=t.paused;g.setTimeout(e,(function(){!n&&t.videoPlay()}),0),!n&&t.videoPlay(),e.setAttr("data-state","normal"),t.emit(he,!1)},this.enterPIPCallback=function(n){t.emit(he,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var i=t.video.webkitPresentationMode;e.pMode===_r&&i!==_r&&t.onFullscreenChange(null,!1),e.pMode=i,i===wr?e.enterPIPCallback(n):i===kr&&e.leavePIPCallback(n)},t.video&&(t.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),a.checkWebkitSetPresentationMode(t.video)&&t.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var n=t.poster;return n&&(e.video.poster="String"===g.typeOf(n)?n:n.poster),a.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("picture-in-picture"):e.video.requestPictureInPicture(),!0}catch(e){return console.error("requestPiP",e),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(a.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(e){return console.error("exitPIP",e),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.video||e.video.webkitPresentationMode===wr}},{key:"isPIPAvailable",value:function(){var e=this.player.video;return document.pictureInPictureEnabled&&("Boolean"===g.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===g.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon||!this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],i=[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}],n&&dr(t.prototype,n),i&&dr(t,i),a}(lt);const Pr=Or;function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Er(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Tr(e,t){return Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tr(e,t)}function Sr(e,t){if(t&&("object"===Cr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xr(e)}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rr(e)}var Ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Rr(o);if(r){var n=Rr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Sr(this,e)});function a(e){var t,n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=function(e){var n=xr(t).player;e.preventDefault(),e.stopPropagation(),t.idx+1<t.config.urlList.length?(t.idx++,n.emit(ye,t.idx+1),t.nextHandler(t.config.urlList[t.idx],t.idx)):(t.nextHandler(),n.emit(ye))},(i="playNext")in(n=xr(t=s.call(this,e)))?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,t.idx=-1,t}return t=a,i=[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}],(n=[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40"><path d="M30.4 10.64v21.504h-4.864v-9.856l-12.16 8.96V11.536l12.16 8.96V10.64z"/></svg>'}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("playNext",this.changeSrc);var e="mobile"===w.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.autoplay=!0,t.src=e)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}])&&Er(t.prototype,n),i&&Er(t,i),a}(lt),jr=n(44785),Ir=n.n(jr);function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function Dr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Nr(e,t){return Nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nr(e,t)}function Mr(e,t){if(t&&("object"===Lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fr(e)}function Fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Br(e){return Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Br(e)}var Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nr(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Br(o);if(r){var n=Br(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Mr(this,e)});function a(e){var t,n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=function(e){if(!t.isLock){t.emitUserAction(e,"download");var n=t.getAbsoluteURL(t.player.src);Ir()(n),t.isLock=!0,t.timer=window.setTimeout((function(){t.isLock=!1,window.clearTimeout(t.timer),t.timer=null}),300)}},(i="download")in(n=Fr(t=s.call(this,e)))?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,t.timer=null,t.isLock=!1,t}return t=a,i=[{key:"pluginName",get:function(){return"downloadIcon"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:3,disable:!0}}}],(n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.download&&(e.config.disable=!e.player.config.download)}},{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="#FFF" fill-rule="evenodd"><rect x="11" y="4" width="2" height="12" rx="1"/><rect x="3" y="18" width="18" height="2" rx="1"/><rect transform="rotate(90 4 17.5)" x="1.5" y="16.5" width="5" height="2" rx="1"/><rect transform="rotate(90 20 17.5)" x="17.5" y="16.5" width="5" height="2" rx="1"/><path d="M11.988 14.3l-4.243-4.242a1 1 0 00-1.414 1.414l4.95 4.95a1 1 0 001.414 0l4.95-4.95a1 1 0 10-1.414-1.414L11.988 14.3z"/></g></svg>'}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}])&&Dr(t.prototype,n),i&&Dr(t,i),a}(lt);function Ur(e){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ur(e)}function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zr(e,t){return zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},zr(e,t)}function Wr(e,t){if(t&&("object"===Ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Zr(e){return Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zr(e)}var Kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zr(o);if(r){var n=Zr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wr(this,e)});function a(){return Gr(this,a),s.apply(this,arguments)}return t=a,n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(fe,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(e,t){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=e||this.config.width,n.height=t||this.config.height}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then((function(e){t.emit(de,e),t.saveScreenShot(e,t.config.name+t.config.format)}))}},{key:"shot",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},o=this.config,r=this.player,s=i.quality||o.quality,a=i.type||o.type;return new Promise((function(i,c){n.canvas?(n.canvas.width=e||o.width,n.canvas.height=t||o.height):n.createCanvans(e,t),n.canvasCtx.drawImage(r.video,0,0,e||o.width,t||o.height);var l=n.canvas.toDataURL(a,s).replace(a,"image/octet-stream");i(l=l.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(fe,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>")," \n      </div>\n    </xg-icon>")}}}],i=[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}],n&&Vr(t.prototype,n),i&&Vr(t,i),a}(lt);function Yr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Xr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t.config,this.parent=t.root,this.root=g.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===w.device?"touchend":"click";this._delegates=lt.delegate.call(this,this.root,"li",n,this.onItemClick)}var t,n;return t=e,(n=[{key:"renderItemList",value:function(e){var t=this,n=this.config,i=this.root;e?n.data=e:e=n.data,n.style&&Object.keys(n.style).map((function(e){i.style[e]=n[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,n){var i=e.isCurrent?"option-item selected":"option-item";e["data-index"]=n,t.root.appendChild(g.createDom("li","<span>".concat(e.showText,"</span>"),e,i))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&g.hasClass(t,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");g.addClass(t,"selected"),i&&g.removeClass(i,"selected"),n(e,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var n={};t.map((function(t){n[t]=e.getAttribute(t)}));var i=e.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){g.removeClass(this.root,"hide"),g.addClass(this.root,"active")}},{key:"hide",value:function(){g.removeClass(this.root,"active"),g.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}])&&Yr(t.prototype,n),e}();function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function $r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qr(e,t){return Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qr(e,t)}function Jr(e,t){if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function es(e){return es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},es(e)}var ts="mobile"===w.device,ns=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=es(o);if(r){var n=es(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Jr(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).isActive=!1,t.curValue=null,t.curIndex=0,t}return t=a,i=[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0}}}],(n=[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;ts&&"middle"!==t.listType&&(t.listType="rightSide"),t.hidePortrait&&g.addClass(this.root,"portrait"),this.once(L,(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),ts&&this.on(K,(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),this.activeEvent=ts?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||g.addClass(this.root,"show")}},{key:"hide",value:function(){g.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var i=this.config.list;!n&&(n=this.player.lang),t=!t||g.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=i[e]);try{return"object"===qr(e[t])?e[t][n]||e[t].zh:e[t]}catch(e){return console.warn(e),""}}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(e){if(e!==this.isActive){var t=this.player.controls,n=this.config.listType;e?("rightSide"===n?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?t.focus():t.unFocus(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.config,i=n.listType,o=n.list;(ts||"rightSide"===i)&&this.onToggle(!1),this.curIndex=t.to.index,this.curItem=o[this.curIndex],this.changeCurrentText()}},{key:"changeCurrentText",value:function(){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}},{key:"renderItemList",value:function(e,t){var n=this,i=this.config,o=this.optionsList,r=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=i.list[t]),o)return o.renderItemList(e),void this.changeCurrentText();var s={config:{data:e||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(e,t){n.onItemClick(e,t)}},root:"rightSide"===i.listType?r.root:this.root};this.optionsList=new Xr(s),this.changeCurrentText(),this.show()}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon btn-text">\n    <span class="icon-text"></span>\n    </div>\n   </xg-icon>')}}])&&$r(t.prototype,n),i&&$r(t,i),a}(lt);function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}function os(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function rs(e,t,n){return rs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cs(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},rs(e,t,n||e)}function ss(e,t){return ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ss(e,t)}function as(e,t){if(t&&("object"===is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function cs(e){return cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cs(e)}var ls=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ss(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cs(o);if(r){var n=cs(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return as(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).curTime=0,t.isPaused=!0,t}return t=a,n=[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;rs(cs(a.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){console.log("resourceReady",t),e.changeDefinitionList(t)})),this.on(se,(function(t){e.renderItemList(t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,n=e.defaultDefinition;if(t.length>0){var i=null;t.map((function(e){e.definition===n&&(i=e)})),i||(i=t[0]),this.changeDefinition(i)}}},{key:"renderItemList",value:function(e){var t=this,n=this.player,i=this.config.list,o=e&&e.url?e.url:n.currentSrc||n.src,r=e&&e.definition?e.definition:this.config.defaultDefinition,s=0,c=i.map((function(e,n){var i={url:e.url,definition:e.definition||"",showText:t.getTextByLang(e)||e.definition,isCurrent:!1};return(e.url===o||!g.isUndefined(e.definition)&&e.definition===r)&&(i.isCurrent=!0,s=n),i}));rs(cs(a.prototype),"renderItemList",this).call(this,c,s)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){var n=this.player;n.switchURL?n.switchUrl(e.url):n.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){rs(cs(a.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to}),this.player.changeDefinition(t.to,t.from)}}],i=[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition"}}}],n&&os(t.prototype,n),i&&os(t,i),a}(ns);function us(e){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},us(e)}function fs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hs(e,t,n){return hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ys(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},hs(e,t,n||e)}function ps(e,t){return ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ps(e,t)}function ds(e,t){if(t&&("object"===us(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ys(e){return ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ys(e)}var gs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ps(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ys(o);if(r){var n=ys(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ds(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).curRate=1,t}return t=a,n=[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,n=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map((function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;hs(ys(a.prototype),"afterCreate",this).call(this),this.on(B,(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&hs(ys(a.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){hs(ys(a.prototype),"onItemClick",this).apply(this,arguments);var n=e.delegateTarget,i=Number(n.getAttribute("rate"));if(!i||i===this.curValue)return!1;this.emitUserAction(e,"change_rate",{from:this.player.playbackRate,to:i}),this.curValue=i,this.player.playbackRate=i}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var n=0,i=this.config.list.map((function(i,o){var r={rate:i.rate};return r.rate===t&&(r.isCurrent=!0,n=o),r.showText=e.getTextByLang(i),r}));hs(ys(a.prototype),"renderItemList",this).call(this,i,n)}},{key:"destroy",value:function(){hs(ys(a.prototype),"destroy",this).call(this)}}],i=[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",hidePortrait:!1}}}],n&&fs(t.prototype,n),i&&fs(t,i),a}(ns);function vs(e){return vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vs(e)}function ms(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ws(e,t){return ws=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ws(e,t)}function ks(e,t){if(t&&("object"===vs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _s(e){return _s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_s(e)}var Os=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ws(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_s(o);if(r){var n=_s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ks(this,e)});function a(){return ms(this,a),s.apply(this,arguments)}return t=a,i=[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:st.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}],(n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(oe,(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.bind(["click","touchend"],this.btnClick))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_css_fullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" class="path_full" d="M11.7 13v1.3a1.17 1.17 0 01-1.3 1.3 1.17 1.17 0 01-1.3-1.3v-2.6a1.17 1.17 0 011.3-1.3H13a1.17 1.17 0 011.3 1.3A1.17 1.17 0 0113 13zm7.8 5.2v-1.3a1.3 1.3 0 012.6 0v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.3 1.3 0 010-2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',class:"xg-get-cssfull"},exitCssFullscreen:{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" d="M11.7 13v-1.3a1.17 1.17 0 011.3-1.3 1.17 1.17 0 011.3 1.3v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.17 1.17 0 01-1.3-1.3 1.17 1.17 0 011.3-1.3zm7.8 5.2v1.3a1.3 1.3 0 01-2.6 0v-2.6a1.17 1.17 0 011.3-1.3h2.6a1.3 1.3 0 010 2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}])&&bs(t.prototype,n),i&&bs(t,i),a}(lt);function Ps(e){return Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ps(e)}function Cs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Es(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ts(e,t){return Ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ts(e,t)}function Ss(e,t){if(t&&("object"===Ps(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xs(e){return xs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xs(e)}var Rs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ts(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xs(o);if(r){var n=xs(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ss(this,e)});function a(){return Cs(this,a),s.apply(this,arguments)}return t=a,n=[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("errorHandler",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(L,(function(){e.handleCanPlay()})),this.on(x,(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(){this.player.retry()}},{key:"handleCanPlay",value:function(){g.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,n=e.errorType,i=t.error;if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],i=[{key:"pluginName",get:function(){return"error"}}],n&&Es(t.prototype,n),i&&Es(t,i),a}(lt);function As(e){return As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},As(e)}function js(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Is(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ls(e,t){return Ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ls(e,t)}function Ds(e,t){if(t&&("object"===As(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ns(e){return Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ns(e)}const Ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ls(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ns(o);if(r){var n=Ns(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ds(this,e)});function a(){return js(this,a),s.apply(this,arguments)}return t=a,n=[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(n){t.root.style[n]=e[n]}))}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=i;var o=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),g.addClass(this.root,"show"),"arrow"===n.mode&&g.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var r="boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide;if(r){var s=n.interval||o;this.intervalId=setTimeout((function(){t.hide()}),s)}}}},{key:"hide",value:function(){g.removeClass(this.root,"show"),g.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(yt.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],i=[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}],n&&Is(t.prototype,n),i&&Is(t,i),a}(lt);var Fs={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Bs(e){Object.keys(Fs).map((function(t){void 0===e[t]&&(e[t]=Fs[t])}))}var Hs={initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this._ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(t&&(Bs(e),this._ispots.push(e)),this._ispotsInit||!t)){var i=this.calcuPosition(e.time,e.duration),o=e.style||{};o.left="".concat(i.left,"%"),o.width="".concat(i.width,"%");var r="xgspot_".concat(e.id," xgplayer-spot");i.isMini&&(r+=" mini");var s=g.createDom("xg-spot","",{"data-text":e.text,"data-time":e.time,"data-id":e.id},r);Object.keys(o).map((function(e){s.style[e]=o[e]})),n.outer&&n.outer.appendChild(s)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,n){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(e.id);if(i&&Object.keys(e).map((function(t){i[t]=e[t]})),this._ispotsInit){var o=n.find('xg-spot[data-id="'.concat(e.id,'"]'));if(o){var r=this.calcuPosition(e.time,e.duration),s=e.style||{};s.left="".concat(r.left,"%"),s.width="".concat(r.width,"%"),o.setAttribute("data-text",e.text),o.setAttribute("data-time",e.time),r.isMini?g.addClass(o,"mini"):g.removeClass(o,"mini"),Object.keys(s).map((function(e){o.style[e]=s[e]})),t&&this.showDot(e.id)}}}},deleteDot:function(e){var t=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],o=0;o<t.length;o++)t[o].id===e&&i.push(o);for(var r=i.length-1;r>=0;r--)if(t.splice(i[r],1),this._ispotsInit){var s=n.find('xg-spot[data-id="'.concat(e,'"]'));s&&s.parentElement.removeChild(s)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this._ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),n=t.length-1;n>=0;n--)e.outer.removeChild(t[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this._ispotsInit){this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),o=i.length;if(o>t.length)for(var r=o-1;r>t.length-1;r--)n.outer.removeChild(i[r]);t.map((function(t,n){n<o?(i[n].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t}};function Us(e){return Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Us(e)}function Gs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vs(e,t){return Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vs(e,t)}function zs(e,t){if(t&&("object"===Us(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ws(e)}function Ws(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zs(e){return Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zs(e)}function Ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ys={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd"},Xs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Zs(o);if(r){var n=Zs(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return zs(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Ks(Ws(t=s.call(this,e)),"onMousemove",(function(e){(t._state.f||g.hasClass(e.target,"xg-spot-content"))&&(g.event(e),e.stopPropagation())})),Ks(Ws(t),"onMousedown",(function(e){(t._state.f||g.hasClass(e.target,"xg-spot-content"))&&(g.event(e),e.stopPropagation())})),t._ispots=[],t.videoPreview=null,t.videothumbnail=null,t.thumbnail=null,t._state={now:0,f:!1},t}return t=a,n=[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),function(e){var t=e.config,n=e.player;Object.keys(Hs).map((function(t){e[t]=Hs[t].bind(e)}));var i=n.config.progressDot||t.ispots||[];e._ispots=i.map((function(e){return Bs(e),e})),e._ispotsInit=!1,n.once(N,(function(){e.initDots()}))}(this),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if("mobile"!==w.device&&t){Object.keys(Ys).map((function(n){e[Ys[n]]=e[Ys[n]].bind(e),t.addCallBack(n,e[Ys[n]])})),this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),n(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e){this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.isDrag=!0,this.videoPreview&&g.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(e){this.isDrag=!1,this.videoPreview&&g.removeClass(this.videoPreview,"show")}},{key:"updateLinePos",value:function(e,t){var n,i,o=this.root,r=this.previewLine,s=this.timePoint,a="flex"===this.player.controls.mode,c=o.getBoundingClientRect().width,l=s.getBoundingClientRect().width,u=e-c/2;u<0&&!a?(u=0,n=e-c/2,!this.thumbnail&&(i=e-c/2-l/2)):u>t-c&&!a?(n=u-(t-c),!this.thumbnail&&(i=u-(t-c)-l/2),u=t-c):(n=0,!this.thumbnail&&(i=-l/2)),void 0!==n&&(r.style.transform="translateX(".concat(n,"px)")),void 0!==i&&(s.style.transform="translateX(".concat(i,"px)")),o.style.transform="translateX(".concat(u,"px)")}},{key:"updateTimeText",value:function(e){var t=this.timeText,n=this.timePoint;t.textContent=e,!this.thumbnail&&(n.textContent=e)}},{key:"updatePosition",value:function(e,t,n,i){var o=this.root,r=this.config,s=this._state;if(o){this.updateLinePos(e,t),s.now=n;var a=g.format(n);i&&i.target&&g.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,a),s.f=!0,r.isFocusDots&&s.f&&(s.now=parseInt(i.target.getAttribute("data-time"),10))):r.defaultText?(s.f=!1,this.showTips(r.defaultText,!0,a)):(s.f=!1,this.hideTips("")),this.updateTimeText(a),this.updateThumbnails(s.now)}}},{key:"updateThumbnails",value:function(e){var t=this.player,n=this.videoPreview,i=t.plugins.thumbnail;if(i&&i.usable){this.thumbnail&&i.update(this.thumbnail,e,160,90);var o=n&&n.getBoundingClientRect();this.videothumbnail&&i.update(this.videothumbnail,e,o.width,o.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==w.device){var t=this.player,n=this.config,i=t.getPlugin("thumbnail");if(i&&Object.keys(e).map((function(t){i.config[t]=e[t]})),i&&i.usable&&n.isShowThumbnail){g.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var o=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(o,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=g.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else g.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var n=this.player.plugins.progress,i=this.player,o=n.root.getBoundingClientRect().width,r=i.duration/o*6,s={};return e+t>i.duration&&(t=i.duration-e),s.left=e/i.duration*100,s.width=t/i.duration,s.isMini=r>t,{left:e/i.duration*100,width:t/i.duration*100,isMini:t<r}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var n=this.root.getBoundingClientRect().width,i=t.time/this.player.duration*n;this.updatePosition(i,n,t.time)}}},{key:"showTips",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e&&(g.addClass(this.root,"no-timepoint"),g.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(g.addClass(this.root,"product"),this.tipText.textContent=e):(g.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){g.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",g.removeClass(this.find(".xg-spot-content"),"show-text"),g.removeClass(this.root,"product")}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys(Ys).map((function(n){t.removeCallBack(n,e[Ys[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===w.device||this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],i=[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:""}}}],n&&Gs(t.prototype,n),i&&Gs(t,i),a}(lt);function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function $s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qs(e,t){return Qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qs(e,t)}function Js(e,t){if(t&&("object"===qs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ea(e){return ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ea(e)}var ta=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qs(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ea(o);if(r){var n=ea(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Js(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).ratio=1,t.interval=null,t.preloadMark={},t}return t=a,n=[{key:"afterCreate",value:function(){this.usable&&this.initThumbnail()}},{key:"usable",get:function(){var e=this.config,t=e.urls,n=e.pic_num;return t&&t.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,n=e.height,i=e.pic_num,o=e.interval;this.ratio=t/n*100,this.interval=o||Math.round(this.player.duration/i),this.preload(0)}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this,n=this.config.urls,i=n.length;[e-1,e,e+1,e+2].map((function(e){!t.preloadMark[e]&&e>=0&&e<i&&(g.preloadImg(n[e]),t.preloadMark[e]=!0)}))}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.config,o=i.pic_num,r=i.row,s=i.col,a=i.width,c=i.height;this.interval=Math.round(this.player.duration/o);var l=Math.ceil(e/this.interval),u=(l=l>o?o:l)<r*s?0:Math.ceil(l/(r*s))-1,f=l-u*(s*r),h=f>0?Math.ceil(f/s)-1:0,p=f>0?f-h*s-1:0,d=0,y=0;if(t&&n){var g=t/n;g<a/c?y=(d=t)/(a/c):d=(y=n)*(a/c)}else y=(d=t||a)/(a/c);var v=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:h,colIndex:p,url:v,height:y,width:d,style:{backgroundImage:"url(".concat(v,")"),backgroundSize:"".concat(d*s,"px auto"),backgroundPosition:"-".concat(p*d,"px -").concat(h*y,"px"),width:"".concat(d,"px"),height:"".concat(y,"px")}}}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=this.config,s=r.pic_num,a=r.urls;if(!(s<=0)&&a&&0!==a.length){var c=this.getPosition(t,n,i);this.preload(c.urlIndex),Object.keys(c.style).map((function(t){e.style[t]=c.style[t]})),Object.keys(o).map((function(t){e.style[t]=o[t]}))}}},{key:"createThumbnail",value:function(e,t){var n=g.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(n),n}}],i=[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}],n&&$s(t.prototype,n),i&&$s(t,i),a}(lt);function na(e){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(e)}function ia(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ra(e,t){return ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ra(e,t)}function sa(e,t){if(t&&("object"===na(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function aa(e){return aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},aa(e)}const ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ra(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=aa(o);if(r){var n=aa(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return sa(this,e)});function a(){return ia(this,a),s.apply(this,arguments)}return t=a,n=[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],i=[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}],n&&oa(t.prototype,n),i&&oa(t,i),a}(lt);function la(e){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},la(e)}function ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ha(e,t){return ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ha(e,t)}function pa(e,t){if(t&&("object"===la(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return da(e)}function da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ya(e){return ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ya(e)}function ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var va="realtime",ma="firstframe";function ba(){try{return window.performance.now()}catch(e){return(new Date).getTime()}}function wa(e){return"safari"!==w.browser||!/^blob/.test(e.currentSrc)&&!/^blob/.test(e.src)}var ka=null,_a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ha(e,t)}(a,e);var t,n,i,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ya(o);if(r){var n=ya(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pa(this,e)});function a(){var e;ua(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return ga(da(e=s.call.apply(s,[this].concat(n))),"onLoadedData",(function(){var t=e.player.video;e.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10)})),ga(da(e),"start",(function(){var t=e.player.video,n=ba();wa(t)&&e.canvasCtx&&(e.stop(),(e.config.mode===va||n-e.preTime>=e.interval)&&(t&&t.videoWidth&&e.update(t,t.videoWidth,t.videoHeight),e.preTime=n),e.frameId=g.requestAnimationFrame(e.start))})),ga(da(e),"stop",(function(){e.frameId&&(g.cancelAnimationFrame(e.frameId),e.frameId=null)})),e}return t=a,n=[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),a.isSupport||(this.config.disable=!0);var t=this.config,n=t.disable,i=t.mode;n||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(J,(function(){e.init(),!e.player.paused&&e.start()})),this.once(F,this.onLoadedData),this.on(ne,(function(){e.once(F,e.onLoadedData)})),i!==ma&&(this.on(C,(function(){e.start()})),this.on(S,(function(){e.stop()}))),i===ma&&this.once(j,(function(){var t=e.player.video;t&&wa(t)&&t.videoWidth&&e.update(t,t.videoWidth,t.videoHeight)})))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=a.supportCanvasFilter();try{var n=e.innerContainer||e.root;n.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=n.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d");var i=this.playerConfig.poster;if(i){var o="String"===g.typeOf(i)?i:"String"===g.typeOf(i.poster)?i.poster:null;this.updateImg(o)}}catch(e){l.logError("plugin:DynamicBg",e)}}},{key:"updateImg",value:function(e){var t=this;if(e){var n=this.canvas.getBoundingClientRect(),i=n.width,o=n.height,r=new window.Image;r.onload=function(){t.canvas&&(t.canvas.height=o,t.canvas.width=i,t.update(r,r.width,r.height),r=null)},r.src=e}}},{key:"update",value:function(e,t,n){if(this.canvas&&this.canvasCtx)try{var i=this._pos,o=this.config,r=this.canvas.getBoundingClientRect(),s=r.width,a=r.height;if(this.videoPI=parseInt(t/n*100,10),s!==i.width||a!==i.height){var c=parseInt(s/a*100,10);i.width=this.canvas.width=s,i.height=this.canvas.height=a;var u=a,f=s;c<this.videoPI?f=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(u=parseInt(100*s/this.videoPI,10)),c<this.videoPI?f=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(u=parseInt(100*s/this.videoPI,10)),i.rwidth=1.2*f,i.rheight=1.2*u,i.x=(s-i.rwidth)/2,i.y=(a-i.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=o.filter),this.canvasCtx.drawImage(e,i.x,i.y,i.rwidth,i.rheight)}catch(e){l.logError("plugin:DynamicBg",e)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],i=[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof ka?ka:ka=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===w.browser||"firefox"===w.browser)}}],n&&fa(t.prototype,n),i&&fa(t,i),a}(lt);const Oa=_a,Pa={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}};function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ea(e){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(e)}function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sa(e,t){return Sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Sa(e,t)}function xa(e,t){if(t&&("object"===Ea(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ra(e){return Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ra(e)}function Aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sa(e,t)}(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=Ra(t);if(n){var o=Ra(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return xa(this,e)});function o(){return Ta(this,o),i.apply(this,arguments)}return o}(Kt);Aa(ja,"defaultPreset",(function e(t,n){var i,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var s,a=n&&n.isMobileSimulateMode,c=n.isLive,l=[].concat(c?[]:[vo,ca,Xs,Xo],[Po,Uo,fr,Ar,ls,gs,Hr,Kr,rr,Pr]),u=[hn,wn,Tn,oo,Ln,Rs,Ms,ta,ci];this.plugins=[rn].concat(function(e){if(Array.isArray(e))return Ca(e)}(s=l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return Ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ca(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u);var f=a?"mobile":w.device;switch(f){case"pc":(i=this.plugins).push.apply(i,[$i,bi,Os]);break;case"mobile":(o=this.plugins).push.apply(o,[Bi]);break;default:(r=this.plugins).push.apply(r,[$i,bi,Os])}(w.os.isIpad||"pc"===f)&&this.plugins.push(Oa),this.ignores=[],this.i18n=[Pa]})),Aa(ja,"Util",g),Aa(ja,"Sniffer",w),Aa(ja,"Errors",P),Aa(ja,"Events",i),Aa(ja,"Plugin",lt),Aa(ja,"BasePlugin",Xe),Aa(ja,"I18N",Dt),Aa(ja,"STATE_CLASS",yt);const Ia=ja},84321:(e,t,n)=>{n.d(t,{ZP:()=>l,Po:()=>c});var i=n(35743),o=n(30543);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c={1:"network",2:"network",3:"decoder",4:"format"},l=s((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};a(this,e);var r=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.video){var s=n.mediaError?n.mediaError:t.video.error||{},c=t.duration,l=t.currentTime,u=t.ended,f=t.src,h=t.currentSrc,p=t.video,d=p.readyState,y=p.networkState,g={playerVersion:i.Z,domain:document.domain,currentTime:l,duration:c,ended:u,readyState:d,networkState:y,src:f||h,errorType:n.errorType,errorCode:n.errorCode||s.code,message:n.errorMessage||s.message,mediaError:s,originError:n.originError?n.originError.stack:"",host:o.ZP.getHostFromUrl(f||h)};return n.ext&&Object.keys(n.ext).map((function(e){g[e]=n.ext[e]})),g}if(arguments.length>1){for(var v={playerVersion:i.Z,domain:document.domain},m=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],b=0;b<arguments.length;b++)v[m[b]]=arguments[b];return v.ex=r?(r[arguments[0]]||{}).msg:"",v}}))},88656:(e,t,n)=>{n.d(t,{pn:()=>i,MH:()=>o,hs:()=>r,rQ:()=>s,c3:()=>a,HX:()=>c,FU:()=>l,Z$:()=>u,Rc:()=>f,nc:()=>h,Pl:()=>p,lB:()=>d,ly:()=>y,t6:()=>g,Kn:()=>v,ij:()=>m,GS:()=>b,HW:()=>w,VF:()=>k,Hr:()=>_,o8:()=>O,km:()=>P,mW:()=>C,xf:()=>E,td:()=>T});var i="error",o="timeupdate",r="waiting",s="canplay",a="loadeddata",c="loadstart",l="focus",u="blur",f="ready",h="urlNull",p="autoplay_started",d="autoplay_was_prevented",y="complete",g="replay",v="destroy",m="urlchange",b="fullscreen_change",w="cssFullscreen_change",k="mini_state_change",_="definition_change",O="after_definition_change",P="video_resize",C="playnext",E="user_action",T="reset"},12480:(e,t,n)=>{n.d(t,{ZP:()=>Ke});var i=n(51962),o=n.n(i),r=n(30543),s=n(19384),a=n(84321),c=n(88656);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=h(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var g=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadstart","emptied","ratechange","progress","stalled","suspend","abort","lowdecode"];function v(e,t){this&&this.emit&&("error"===e?this.errorHandler(e):this.emit(e,t))}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(h,e);var t,n,i,o,l=(i=h,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(i);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=l.call(this,e))._hasStart=!1,t._currentTime=0,t._duration=0,t._internalOp={},t._lastMuted=!1,t.vtype="MP4",t.videoConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:2,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var n=e["x5-video-player-type"]||e.x5VideoPlayerType;return s.Z.isWeixin&&s.Z.os.isAndroid&&n&&(t.videoConfig["x5-video-player-type"]=n,delete t.videoConfig.playsinline,delete t.videoConfig["webkit-playsinline"],delete t.videoConfig["x5-playsinline"]),e.loop&&(t.videoConfig.loop="loop"),t.video=r.ZP.createDom(t.videoConfig.mediaType,"",t.videoConfig,""),e.defaultPlaybackRate&&(t.video.defaultPlaybackRate=t.video.playbackRate=e.defaultPlaybackRate),"Number"===r.ZP.typeOf(e.volume)&&(t.volume=e.volume),e.autoplayMuted&&(t.video.muted=!0,t._lastMuted=!0),e.autoplay&&(t.video.autoplay=!0),t._interval={},t.videoEventMiddleware={},t.attachVideoEvents(),t}return t=h,n=[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.videoEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.videoEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(e){var t=this;this.evHandlers||(this._evHandlers=g.map((function(e){return n={},i=e,a=t,c="on".concat((s=e).charAt(0).toUpperCase()).concat(s.slice(1)),a[c]&&"function"==typeof a[c]&&a.on(s,a[c]),o=function(e){var t=s,n={player:a,eventName:s,timeStamp:e.timeStamp,currentTime:a.currentTime,duration:a.duration,paused:a.paused,ended:a.ended,isInternalOp:!!a._internalOp[e.type],muted:a.muted,volume:a.volume,host:r.ZP.getHostFromUrl(a.currentSrc),vtype:a.vtype};if(a.removeInnerOP(e.type),"timeupdate"===t&&(a._currentTime=a.video&&a.video.currentTime),"durationchange"===t&&(a._duration=a.video.duration),"volumechange"===t&&(n.isMutedChange=a._lastMuted!==a.muted,a._lastMuted=a.muted),a.videoEventMiddleware[s]){var i=v.bind(a);try{a.videoEventMiddleware[s].call(a,n,i)}catch(e){throw v.call(a,t,n),e}}else v.call(a,t,n)},i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n;var n,i,o,s,a,c}))),e||(e=this.video),this._evHandlers.map((function(t){var n=Object.keys(t)[0];e.addEventListener(n,t[n],!1)}))}},{key:"detachVideoEvents",value:function(e){e||(e=this.video),this._evHandlers.map((function(t){var n=Object.keys(t)[0];e.removeEventListener(Object.keys(t)[0],t[n],!1)}))}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),t.forEach((function(e){n.video.appendChild(r.ZP.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))}));var i=e.children;if(i){this._videoSourceCount=i.length,!this._sourceError&&(this._sourceError=function(e){n._videoSourceCount--,0===n._videoSourceCount&&(n.videoEventMiddleware.error?n.videoEventMiddleware.error.call(n,e,(function(){n.errorHandler("error")})):n.errorHandler("error",{code:4,message:"sources load error"}))});for(var o=0;o<i.length;o++)i[o].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0])}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||t)){var n=this.video.error||t,i=n.code?a.Po[n.code]:"other";n.message,this.video.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new a.ZP(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,this.emit("hasstart"))}},{key:"destroy",value:function(){var e=this;for(var t in this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this._hasStart=!1,this.videoConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,t)&&(clearInterval(this._interval[t]),this._interval[t]=null);this.detachVideoEvents(),this._evHandlers.map((function(t){var n=Object.keys(t)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[i]&&e.off(n,e[i])})),this._evHandlers=null,this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(e){return!!this.video&&this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.video)return t;e||(e=this.video.buffered);var n=this.video.currentTime;if(e)for(var i=0,o=e.length;i<o&&(t[0]=e.start(i),t[1]=e.end(i),!(t[0]<=n&&n<=t[1]));i++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.video&&this.video.autoplay},set:function(e){this.video&&(this.video.autoplay=e)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?r.ZP.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.video)return e;var t=this.video.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||t.start(n)<.1)&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(e){this.video&&(this.video.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(e){this.video&&(this.video.currentSrc=e)}},{key:"currentTime",get:function(){return this.video?void 0!==this.video.currentTime?this.video.currentTime:this._currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.video&&this.video.defaultMuted},set:function(e){this.video&&(this.video.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.video&&this.video.ended}},{key:"error",get:function(){return this.video&&this.video.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.video.error.code-1]:null}},{key:"loop",get:function(){return!!this.video&&this.video.loop},set:function(e){this.video&&(this.video.loop=e)}},{key:"muted",get:function(){return!!this.video&&this.video.muted},set:function(e){this.video&&this.video.muted!==e&&(this._lastMuted=this.video.muted,this.video.muted=e)}},{key:"networkState",get:function(){return this.video?this.video.networkState:0}},{key:"paused",get:function(){return!this.video||this.video.paused}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(e){this.video&&e!==1/0&&(this.video.playbackRate=e)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return!!this.video&&this.video.preload},set:function(e){this.video&&(this.video.preload=e)}},{key:"readyState",get:function(){return this.video?this.video.readyState:0}},{key:"seekable",get:function(){return!!this.video&&this.video.seekable}},{key:"seeking",get:function(){return!!this.video&&this.video.seeking}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(e){this.video&&(this.emit(c.ij,e),this.emit(c.hs),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)?this.onWaiting():(this._detachSourceEvents(this.video),"Array"===r.ZP.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,this.load()))}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(e){e!==1/0&&this.video&&(this.video.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=f(y(h.prototype),"emit",this)).call.apply(n,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=f(y(h.prototype),"on",this)).call.apply(n,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=f(y(h.prototype),"once",this)).call.apply(n,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];(n=f(y(h.prototype),"off",this)).call.apply(n,[this,e,t].concat(o))}},{key:"offAll",value:function(){f(y(h.prototype),"removeAllListeners",this).call(this)}}],n&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(o());function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};b(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}var t,n;return t=e,n=[{key:"openDB",value:function(e){var t=this,n=this,i=this.myDB.version||1,o=n.indexedDB.open(n.myDB.name,i);o.onerror=function(e){},o.onsuccess=function(i){t.myDB.db=i.target.result,e.call(n)},o.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)(n=i.add(t[o])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)(n=i.put(t[o])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var i=this,o=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);o.onerror=function(){n.call(i,null)},o.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}],n&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const _=k;var O=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],P=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],C=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],E=n(80138),T=n(41422),S=n(22060),x=n.n(S);function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=I(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function D(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}var F={CONTROLS:"controls",ROOT:"root"},B={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function H(e){return!!e&&e.indexOf&&/^http/.test(e)}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=null;if(e instanceof window.Element)return r.ZP.addClass(e,n),Object.keys(i).map((function(t){e.setAttribute(t,i[t])})),e;if(H(e)||H(e.url))return i.src=H(e)?e:e.url||"",s=r.ZP.createDom(e.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof e)try{return(s=e())instanceof window.Element?(r.ZP.addClass(s,n),Object.keys(i).map((function(e){s.setAttribute(e,i[e])})),s):(T.Z.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(o,"] is a function mast return an Element Object")),null)}catch(e){return T.Z.logError("Plugin named [".concat(o,"]:createIcon"),e),null}return"string"==typeof e?r.ZP.createDomFromHtml(e,i,n):(T.Z.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(o,"] is invalid")),null)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(c,e);var t,n,i,o,s,a=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(o);if(s){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R(this,c),(e=a.call(this,t)).__delegates=[],e}return t=c,n=[{key:"__init",value:function(e){if(j(N(c.prototype),"__init",this).call(this,e),e.root){var t=e.root,n=null;this.icons={},this.root=null,this.parent=null,function(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(i){var o=e[i],r=o&&o.class?o.class:"",s=o&&o.attr?o.attr:{},a=null;n&&n[i]&&(r=function(e,t){return"object"===M(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(n[i],r),s=function(e,t){return"object"===M(e)&&e.attr&&"object"===M(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}(n[i],s),a=U(n[i],i,r,s,t.pluginName)),!a&&o&&(a=U(o.icon?o.icon:o,s,r,{},t.pluginName)),t.icons[i]=a}))}(this.registerIcons()||{},this),this.langText={};var i,o,s=this.registerLanguageTexts()||{};i=s,o=this,Object.keys(i).map((function(e){Object.defineProperty(o.langText,e,{get:function(){var t=o.lang,n=o.i18n;return n[e]?n[e]:i[e]&&i[e][t]||""}})}));var a="";try{a=this.render()}catch(e){throw T.Z.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(a)(n=c.insert(a,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(n=r.ZP.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(n)}this.root=n,this.parent=t;var l=this.config.attr||{},u=this.config.style||{};this.setAttr(l),this.setStyle(u),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===M(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var i,o,s=n,a=t[s],c={root:e.root};"function"==typeof a?(i=e.config[s]||{},o=a):"object"===M(a)&&"function"==typeof a.plugin&&(i=a.options?r.ZP.deepCopy(e.config[s]||{},a.options):e.config[s]||{},o=a.plugin),c.config=i,void 0!==i.index&&(c.index=i.index),i.root&&(c.root=i.root),e.registerPlugin(o,c,s)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,i=this.langText;t&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(t,(function(t){var o=t.getAttribute&&t.getAttribute("lang-key");if(o){var r=n[o.toUpperCase()]||i[o];r&&(t.innerHTML="function"==typeof r?r(e):r)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var o=n[t]||i[t]||"";o&&(e.innerHTML=o)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var i=j(N(c.prototype),"registerPlugin",this).call(this,e,t,n);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,n){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){i.bindEL(e,t)})):this.bindEL(e,t);else{var o=c.delegate.call(this,this.root,e,t,n);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var i="".concat(e,"_").concat(t),o=0;o<this.__delegates.length;o++)if(this.__delegates[o].key===i){this.__delegates[o].destroy(),this.__delegates.splice(o,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)return"String"===r.ZP.typeOf(e)?this.root.style[e]=t:void("Object"===r.ZP.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)return"String"===r.ZP.typeOf(e)?this.root.setAttribute(e,t):void("Object"===r.ZP.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return T.Z.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),j(N(c.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],i=[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,o=Number(n),r=e instanceof window.Node;if(i){for(var s=0,a=null,c="";s<i;s++){a=t.children[s];var l=Number(a.getAttribute("data-index"));if(l>=o){c="beforebegin";break}l<o&&(c="afterend")}return r?"afterend"===c?t.appendChild(e):t.insertBefore(e,a):a.insertAdjacentHTML(c,e),"afterend"===c?t.children[t.children.length-1]:t.children[s]}return r?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[];if(e instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach((function(n){var s=x()(e,t,n,i,o);s.key="".concat(t,"_").concat(n),r.push(s)}));else{var s=x()(e,t,n,i,o);s.key="".concat(t,"_").concat(n),r.push(s)}return r}},{key:"ROOT_TYPES",get:function(){return F}},{key:"POSITIONS",get:function(){return B}}],n&&A(t.prototype,n),i&&A(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}(E.ZP);function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var z=function(){function e(){var t,n,i=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(e){var t=(new Date).getTime();i.timeStamp=t;for(var n=0;n<e.length;n++)i.__runHandler(e[n].target)},(t="__trigger")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((0,r.P2)(this.__trigger,100,{trailing:!0})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}var t,n;return t=e,(n=[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=e.getAttribute("data-playerid"),i=this.__handlers,o=-1,r=0;r<i.length;r++)i[r]&&e===i[r].target&&(o=r);o>-1?this.__handlers[o].handler=t:this.__handlers.push({target:e,handler:t,playerId:n})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,i){e===n.target&&(t=i)}));try{this.observer&&this.observer.unobserve(e)}catch(e){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(e){console.error(e)}return!0}return!1}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),W=null;const Z={pluginGroup:{},init:function(e){var t,n,i=e._pluginInfoId;i||(i=(new Date).getTime(),e._pluginInfoId=i),!e.config.closeResizeObserver&&(t=e.root,n=function(){e.getVideoSize()},W||(W=new z,window.___resizeObserver=W),W.addObserver(t,n)),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[i]={_player:e,_originalOptions:e.config||{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),n=0;n<t.length;n++){var i=this.pluginGroup[t[n]]._player;if(i.root===e)return i}return null}return null},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then((function(t){var i;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),i)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins={});var o=this.pluginGroup[i]._plugins,s=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var a=n.pluginName||t.pluginName;if(!a)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported()){n.config||(n.config={});for(var c=Object.keys(s),l=0;l<c.length;l++)if(a.toLowerCase()===c[l].toLowerCase()){var u=s[c[l]];"Object"===r.ZP.typeOf(u)?n.config=Object.assign({},n.config,s[c[l]]):"Boolean"===r.ZP.typeOf(u)&&(n.config.disable=!u);break}t.defaultConfig&&Object.keys(t.defaultConfig).map((function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{o[a.toLowerCase()]&&(this.unRegister(i,a.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(a,"] exist, destroy the old instance")));var f=new t(n);return o[a.toLowerCase()]=f,o[a.toLowerCase()].func=t,f&&"function"==typeof f.afterCreate&&f.afterCreate(),f}catch(e){throw console.error(e),e}}else console.warn("not supported plugin [".concat(a,"]"))}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(n){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),n)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!this.pluginGroup||!n)return null;var i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(i){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var o=e._pluginInfoId;if(t.pluginGroup[o]){for(var r=t.pluginGroup[o]._plugins,s=[],a=0,c=Object.keys(r);a<c.length;a++){var l=c[a];if(r[l]&&r[l].beforePlayerInit)try{var u=r[l].beforePlayerInit();s.push(n(u))}catch(e){throw s.push(n(null)),e}}Promise.all([].concat(s)).then((function(){i()})).catch((function(e){console.error(e),i()}))}else i()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(this.pluginGroup&&t)for(var n=this.pluginGroup[t]._plugins,i=0,o=Object.keys(n);i<o.length;i++){var r=o[i];n[r]&&n[r].afterPlayerInit&&n[r].afterPlayerInit()}},setLang:function(e,t){var n=t._pluginInfoId;if(this.pluginGroup&&n){var i=this.pluginGroup[n]._plugins;Object.keys(i).map((function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=e._pluginInfoId;if(t){for(var n={},i=this.pluginGroup[t]._plugins,o=0,r=Object.keys(i);o<r.length;o++){var s=r[o];n[s]={plugin:i[s].func,options:i[s]._args},this.unRegister(t,s)}for(var a=0,c=Object.keys(n);a<c.length;a++){var l=c[a];this.register(t,l,n[l].plugin,n[l].options)}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))},setCurrentUserActive:function(e,t){if(this.pluginGroup&&this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var n=Object.keys(this.pluginGroup),i=0;i<n.length;i++){var o=this.pluginGroup[n[i]];o&&o._player&&(this.pluginGroup[n[i]]._player.isUserActive=!1)}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var n=this.pluginGroup[e[t]];if(n&&n._player&&n._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var n;n=e.root,W.unObserver(n,undefined);for(var i=this.pluginGroup[t]._plugins,o=0,r=Object.keys(i);o<r.length;o++){var s=r[o];this.unRegister(t,s)}var a=e.isUseActive;if(delete this.pluginGroup[t],delete e._pluginInfoId,a){var c=Object.keys(this.pluginGroup);c.length>0&&this.setCurrentUserActive(c[c.length-1],!0)}}}},K="xgplayer-is-enter",Y="xgplayer-pause",X="xgplayer-playing",q="xgplayer-ended",$="xgplayer-isloading",Q="xgplayer-is-error",J="xgplayer-replay",ee="xgplayer-nostart",te="xgplayer-inactive",ne="xgplayer-is-fullscreen",ie="xgplayer-is-cssfullscreen",oe="xgplayer-fullscreen-parent",re="xgplayer-inner-fullscreen",se="not-allow-autoplay",ae="seeking";function ce(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(0,r.VQ)(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,videoConfig:{},commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}function le(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var fe=n(5265);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(){return ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=ge(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ye.apply(this,arguments)}function ge(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=we(e)););return e}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ve(e,t)}function me(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return be(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(u,e);var t,n,i,o,a,l=(o=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=we(o);if(a){var n=we(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return me(this,e)});function u(){var e;pe(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return ke(be(e=l.call.apply(l,[this].concat(n))),"onMouseEnter",(function(t){var n=be(e),i=n.player;n.playerConfig.closeControlsBlur&&i.focus({autoHide:!1})})),ke(be(e),"onMouseLeave",(function(){be(e).player.focus()})),e}return t=u,n=[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.controls&&(e.config.disable=!e.player.config.controls),e.config.mode||"mobile"!==s.Z.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,i=t.height,o=t.mode,a=t.autoHide;if(!n){"flex"===o&&this.player.addClass("flex-controls"),a&&this.player.addClass("xgplayer_autohide");var l={height:"".concat(i,"px")};Object.keys(l).map((function(t){e.root.style[t]=l[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(c.VF,(function(t){t?r.ZP.addClass(e.root,"mini-controls"):r.ZP.removeClass(e.root,"mini-controls")}));var u=this.playerConfig.isMobileSimulateMode;"mobile"!==s.Z.device&&"mobile"!==u&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"unFocus",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&r.ZP.addClass(this.root,"control_autohide")}},{key:"pauseAutoHide",value:function(){r.ZP.removeClass(this.root,"control_autohide")}},{key:"show",value:function(){r.ZP.addClass(this.root,"show")}},{key:"hide",value:function(){r.ZP.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(this.root){var i=e.defaultConfig||{};if(!t.root){var o=t.position?t.position:t.config&&t.config.position?t.config.position:i.position;switch(o){case B.CONTROLS_LEFT:t.root=this.left;break;case B.CONTROLS_RIGHT:t.root=this.right;break;case B.CONTROLS_CENTER:t.root=this.center;break;case B.CONTROLS:t.root=this.root;break;default:t.root=this.left}return ye(we(u.prototype),"registerPlugin",this).call(this,e,t,n)}}}},{key:"destroy",value:function(){"mobile"!==s.Z.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,i=e.initShow;if(!e.disable){var o=r.ZP.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},{control_autohide:n},{controls_permanent:!n},{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(o,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],i=[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}],n&&de(t.prototype,n),i&&de(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(G);function Oe(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ce={lang:{},langKeys:[],textKeys:[]},Ee={};function Te(e,t){return Object.keys(t).map((function(n){var i=r.ZP.typeOf(t[n]),o=r.ZP.typeOf(e[n]);if(t[n]instanceof window.Node)e[n]=t[n];else if("Array"===i){var s;"Array"!==o&&(e[n]=[]),(s=e[n]).push.apply(s,Oe(t[n]))}else"Object"===i?("Object"!==o&&(e[n]={}),Te(e[n],t[n])):e[n]=t[n]})),e}function Se(){Object.keys(Ce.lang.en).map((function(e){Ce.textKeys[e]=e}))}function xe(e,t){var n=[];if(t||(t=Ce),t.lang){n="Array"!==r.ZP.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e;var i=t.lang;n.map((function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),i[e.LANG]?Te(i[e.LANG]||{},e.TEXT||{}):Ee[e.LANG]=e.TEXT})),Se()}}function Re(e,t){var n=e.LANG;if(t||(t=Ce),t.lang){var i=e.TEXT||{};"zh"===n&&(n="zh-cn"),t.lang[n]?Te(t.lang[n],i):(t.langKeys.push(n),t.lang[n]=i),Ee[n]&&(xe([{LANG:n,TEXT:Ee[n]}]),delete Ee[n]),Se()}}Re({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});const Ae={get textKeys(){return Ce.textKeys},get langKeys(){return Ce.langKeys},get lang(){var e={};return Ce.langKeys.map((function(t){e[t]=Ce.lang[t]})),e.zh=Ce.lang["zh-cn"],e},extend:xe,use:Re,init:function(e){var t,n={lang:{},langKeys:[],textKeys:{},pId:e};return Te(n.lang,Ce.lang),(t=n.langKeys).push.apply(t,Oe(Ce.langKeys)),Te(n.textKeys,Ce.textKeys),n}};var je=n(35743);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Me(){return Me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=Fe(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Me.apply(this,arguments)}function Fe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ge(e)););return e}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}function He(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ue(e)}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=["play","pause","replay","retry","playnext"],We=0,Ze=0,Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(f,e);var t,n,i,o,l,u=(o=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ge(o);if(l){var n=Ge(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return He(this,e)});function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var n=r.ZP.deepMerge(ce(),e);t=u.call(this,n),(0,fe.ZP)(Ue(t),ze),t.config=n,t._pluginInfoId=r.ZP.generateSessionId(),(0,T.w)(Ue(t));var i=t.constructor.defaultPreset;if(t.config.presets.length){var o=t.config.presets.indexOf("default");o>=0&&i&&(t.config.presets[o]=i)}else i&&t.config.presets.push(i);return t.userTimer=null,t.waitTimer=null,t.isReady=!1,t.isPlaying=!1,t._isError=!1,t.isSeeking=!1,t.isCanplay=!1,t._runPending=!1,t.rotateDeg=0,t.isActive=!1,t.isCssfullScreen=!1,t.fullscreen=!1,t._fullscreenEl=null,t._cssfullscreenEl=null,t.curDefinition=null,t._orgCss="",t._fullScreenOffset=null,t._videoHeight=0,t._videoWidth=0,t._accPlayed={t:0,acc:0,loopAcc:0},t.innerContainer=null,t.controls=null,t.topBar=null,t.topBar=null,t.root=null,t.__i18n=Ae.init(),s.Z.os.isAndroid&&s.Z.osVersion>0&&s.Z.osVersion<6&&(t.config.autoplay=!1),t.database=new _,t.isUserActive=!1,t._initDOM()?(t._bindEvents(),t._registerPresets(),t._registerPlugins(),Z.onPluginsReady(Ue(t)),r.ZP.setTimeout(Ue(t),(function(){t.emit(c.Rc),t.onReady&&t.onReady(),t.isReady=!0}),0),t.getInitDefinition(),(t.config.videoInit||t.config.autoplay)&&(t.hasStart||t.start()),t):(console.error(new Error("can't find the dom which id is ".concat(t.config.id," or this.config.el does not exist"))),He(t))}return t=f,n=[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(c.pn,new a.ZP("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=t}var n=Z.checkPlayerRoot(this.root);n&&(T.Z.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this.root.setAttribute("data-playerid",this.playerId),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.videoConfig.mediaType===i.mediaType){var o=this.innerContainer||this.root;this.detachVideoEvents(this.video);var r=new i(o,this.config,this.videoConfig);this.attachVideoEvents(r),this.video=r}if(this.config.controls){var l=Z.register(this,_e);this.controls=l}var u="mobile"===this.config.isMobileSimulateMode?"mobile":s.Z.device;if(this.addClass("".concat("xgplayer"," ").concat(te," xgplayer-").concat(u," ").concat(this.config.controls?"":"no-controls")),this.config.autoplay?this.addClass(K):this.addClass(ee),this.config.fluid){var f={"max-width":"100%",width:"100%",height:"0","padding-top":"".concat(100*this.config.height/this.config.width,"%"),position:"position",top:"0",left:"0"};Object.keys(f).map((function(t){e.root.style[t]=f[t]}))}else["width","height"].map((function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=r.ZP.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=r.ZP.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=r.ZP.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=r.ZP.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])}));var t=function(){e.fullscreen=!1,e._fullScreenOffset=null};this.onFullscreenChange=function(n,i){var o=r.ZP.getFullScreenEl();if(e._fullActionFrom?e._fullActionFrom="":e.emit(c.xf,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,fullscreen:e.fullscreen}),i||o&&(o===e._fullscreenEl||"VIDEO"===o.tagName))r.ZP.setTimeout(e,(function(){e.getVideoSize()}),100),!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,o,ne),e.emit(c.GS,!0,e._fullScreenOffset),e.isCssfullScreen&&e.exitCssFullscreen();else if(e.fullscreen){r.ZP.setTimeout(e,(function(){e.getVideoSize()}),100);var s=e._fullScreenOffset;if(e.config.needFullscreenScroll)try{window.scrollTo(s.left,s.top),r.ZP.setTimeout(e,(function(){t()}),50)}catch(e){T.Z.logError(e),t()}else!e.config.closeFocusVideoFocus&&e.video.focus(),t();e.isCssfullScreen?e.removeClass(ne):e.recoverFullStyle(e.root,e._fullscreenEl,ne),e._fullscreenEl=null,e.emit(c.GS,!1)}},O.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),this.__webkitbeginfullscreen=function(t){e._fullscreenEl=e.video,e.onFullscreenChange(t,!0)},this.__webkitendfullscreen=function(t){e.onFullscreenChange(t,!1)},s.Z.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once("loadeddata",this.getVideoSize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.video.focus()},this.once("play",this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),O.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off("play",this.playFunc),this.canPlayFunc&&this.off("canplay",this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.video&&(e&&""!==e&&("Array"!==r.ZP.typeOf(e)||0!==e.length)||(e="",this.emit(c.nc),T.Z.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.canPlayFunc=function(){if(t.config){var e=t.config,n=e.autoplay,i=e.startTime,o=e.defaultPlaybackRate;T.Z.logInfo("player","canPlayFunc",i),i&&(t.currentTime=i>t.duration?t.duration:i,t.config.startTime=0),1!==o&&(t.playbackRate=o),n&&t.videoPlay(),t.off(c.rQ,t.canPlayFunc),t.removeClass(K)}},this._detachSourceEvents(this.video),"Array"===r.ZP.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,"Number"===r.ZP.typeOf(this.config.volume)&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once("loadeddata",this.loadeddataFunc);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild);var i=this.video.readyState;T.Z.logInfo("_startInit readyState",i),this.config.autoplay&&(!/^blob/.test(this.video.currentSrc)&&!/^blob/.test(this.video.src)&&this.load(),(s.Z.os.isIpad||s.Z.os.isPhone)&&this.videoPlay()),i>=2?this.canPlayFunc():this.once(c.rQ,this.canPlayFunc),r.ZP.setTimeout(this,(function(){t.emit(c.ly)}),1),this.hasStart||Z.afterInit(this),this.hasStart=!0}}},{key:"_registerPlugins",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._loadingPlugins=[];var n=this.config.ignores||[],i=this.config.plugins||[],o=this.config.i18n||[];t&&Ae.extend(o,this.__i18n);var r=n.join("||").toLowerCase().split("||"),s=this.plugins;i.map((function(n){try{var i=n.plugin?n.plugin.pluginName:n.pluginName;if(i&&r.indexOf(i.toLowerCase())>-1)return null;if(!t&&s[i.toLowerCase()])return;if(n.lazy&&n.loader){var o=Z.lazyRegister(e,n);return void(n.forceBeforeInit&&(o.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(o),1)})).catch((function(t){T.Z.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(o),1)})),e._loadingPlugins.push(o)))}return e.registerPlugin(n)}catch(e){return T.Z.logError("_registerPlugins:",e),null}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){!function(e,t){var n,i,o=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),r=o.plugins,s=void 0===r?[]:r,a=o.ignores,c=void 0===a?[]:a,l=o.icons,u=void 0===l?{}:l,f=o.i18n,h=void 0===f?[]:f;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(n=e.config.plugins).push.apply(n,le(s)),(i=e.config.ignores).push.apply(i,le(c)),Object.keys(u).map((function(t){e.config.icons[t]||(e.config.icons[t]=u[t])}));var p=e.config.i18n||[];h.push.apply(h,le(p)),e.config.i18n=h}(e,t)}))}},{key:"registerPlugin",value:function(e,t){var n=null,i=null;e.plugin&&"function"==typeof e.plugin?(n=e.plugin,i=e.options):(n=e,i={}),t&&(i.config=t);for(var o=this.config.plugins,s=!1,a=0;a<o.length;a++)if(n.pluginName.toLowerCase()===o[a].pluginName.toLowerCase()){s=!0;break}!s&&o.push(n);for(var c=Object.keys(this.config),l=0;l<c.length;l++)if(n.pluginName.toLowerCase()===c[l].toLowerCase()){var u=this.config[c[l]];"Object"===r.ZP.typeOf(u)&&(u.root&&(i.root=u.root),u.position&&(i.position=u.position));break}var f=i.position?i.position:i.config&&i.config.position||n.defaultConfig&&n.defaultConfig.position;if(!i.root&&"string"==typeof f&&f.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(n,i,n.pluginName);if(!i.root)switch(f){case B.ROOT_RIGHT:i.root=this.rightBar;break;case B.ROOT_LEFT:i.root=this.leftBar;break;case B.ROOT_TOP:i.root=this.topBar;break;default:i.root=this.innerContainer||this.root}return Z.register(this,n,i)}},{key:"deregister",value:function(e){"string"==typeof e?Z.unRegister(this,e):e instanceof E.ZP&&Z.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof E.ZP&&(t=e.pluginName),t)for(var n=this.config.plugins.length-1;n>-1;n--)if(this.config.plugins[n].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(n,1);break}}},{key:"plugins",get:function(){return Z.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=Z.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(r.ZP.hasClass(this.root,e)||r.ZP.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&r.ZP.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return r.ZP.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!this.hasStart)return e||this.config.url||this.getInitDefinition(),this.hasStart=!0,this._registerPlugins(!1),Z.beforeInit(this).then((function(){if(t.config)return e||(e=t.url||t.config.url),t._startInit(e)})).catch((function(e){throw e.fileName="player",e.lineNumber="236",T.Z.logError("start:beforeInit:",e),e}))}},{key:"switchURL",value:function(e){var t=this,n=e;"Object"===r.ZP.typeOf(e)&&(n=e.url);var i=this.currentTime,o=this.paused&&!this._isError;return this.src=n,new Promise((function(e){var n=function(){t.currentTime=i,o&&t.once("canplay",(function(){t.pause()})),e()};s.Z.os.isAndroid?t.once("timeupdate",(function(){n()})):t.once("canplay",(function(){n()})),t.play()}))}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var e=this;if(this.hasStart){this.isPlaying||(this.removeClass(ee),!this.isCanplay&&this.addClass(K));var t=Me(Ge(f.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(se),e.addClass(X),e.isPlaying||(T.Z.logInfo(">>>>playPromise.then"),e.isPlaying=!0,e.emit(c.Pl))})).catch((function(t){if(T.Z.logWarn(">>>>playPromise.catch",t.name),e.video&&e.video.error)return e.onError(),void e.removeClass(K);"NotAllowedError"===t.name&&(e._errorTimer=r.ZP.setTimeout(e,(function(){e._errorTimer=null,e.emit(c.lB),e.addClass(se),e.removeClass(K),e.pause()}),0))})):(T.Z.logWarn("video.play not return promise"),this.isPlaying||(this.isPlaying=!0,this.removeClass(se),this.removeClass(ee),this.removeClass(K),this.addClass(X),this.emit(c.Pl))),t}this.removeClass(ee),this.addClass(K);var n=this.start();n&&n.then((function(t){!e.config.autoplay&&e.videoPlay()}))}},{key:"videoPause",value:function(){Me(Ge(f.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(Y),(0,fe.rl)(this,"play",(function(){e.videoPlay()}))}},{key:"pause",value:function(){var e=this;(0,fe.rl)(this,"pause",(function(){Me(Ge(f.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var n=this;if(this.video&&!Number.isNaN(Number(e))&&this.hasStart){var i=this.config,o=i.isSeekedPlay,r=i.seekedStatus,s=t||(o?"play":r);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(c.rQ,(function(){switch(n.removeClass(K),n.isSeeking=!1,s){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.isPlaying?this.currentTime=e:(this.removeClass(ee),this.addClass(K),this.currentTime=e,"play"===s&&this.play())}}},{key:"getInitDefinition",value:function(){var e=this,t=this.config,n=t.definition;!t.url&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map((function(t){t.definition===n.defaultDefinition&&(e.config.url=t.url,e.curDefinition=t.definition)}))}},{key:"changeDefinition",value:function(e,t){var n=this;if(this.emit(c.Hr,{from:t,to:e}),this.curDefinition=e.definition,this.hasStart){var i=this.switchURL(e.url);i&&i.then?i.then((function(){n.emit(c.o8,{from:t,to:e})})):this.emit(c.o8,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once("loadeddata",this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[se,X,ee,Y,J,K,q,Q,$];this.hasStart=!1,this.isPlaying=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(K),this.emit(c.td)}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;this.resetState();var i=this.plugins;if(i&&(t.map((function(t){e.deregister(t)})),n)){var o=ce();Object.keys(this.config).keys((function(t){"undefined"===e.config[t]||"plugins"!==t&&"presets"!==t&&"el"!==t&&"id"!==t||(e.config[t]=o[t])}))}}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,n=this.root,i=this.video;if(n&&i){if(n.removeAttribute("data-playerid"),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),r.ZP.clearAllTimers(this),this.emit(c.Kn),Z.destroy(this),(0,fe.Qs)(this),Me(Ge(f.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root)try{this.exitFullscreen()}catch(e){}if(t)for(var o=t.children,s=0;s<o.length;s++)t.removeChild(o[s]);!t&&i instanceof window.Node&&n.contains(i)&&n.removeChild(i),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&n.removeChild(e[t]),e[t]=null}));var a=n.className.split(" ");a.length>0?n.className=a.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):n.className="",this.removeAttribute("data-xgfill"),["isReady","isPlaying","isSeeking","isCanplay","isActive","isCssfullScreen","fullscreen"].map((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(q),this.currentTime=0,this.isSeeking=!1,(0,fe.rl)(this,"replay",(function(){e.once(c.rQ,(function(){var t=e.videoPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.play(),e.emit(c.t6),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(Q),this.addClass($),(0,fe.rl)(this,"retry",(function(){var t=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(c.rQ,(function(){e.videoPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,i){e&&(i||(i=oe),this._orgCss||(this._orgCss=r.ZP.filterStyleFromText(e)),r.ZP.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=r.ZP.filterStyleFromText(t),r.ZP.addClass(t,i)))}},{key:"recoverFullStyle",value:function(e,t,n,i){i||(i=oe),this._orgCss&&(r.ZP.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),r.ZP.removeClass(e,n),t&&t!==e&&this._orgPCss&&(r.ZP.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",r.ZP.removeClass(t,i))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.video;e||(e=t),this._fullScreenOffset={top:r.ZP.scrollTop(),left:r.ZP.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var i=r.ZP.getFullScreenEl();if(i!==this._fullscreenEl)try{for(var o=0;o<P.length;o++){var s=P[o];if(e[s]){var a="webkitRequestFullscreen"===s?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[s]();return a&&a.then?a:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(e){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this._fullscreenEl||r.ZP.getFullScreenEl()){var t=this.root,n=this.video;e&&(e=t),this._fullActionFrom="exit";for(var i=0;i<C.length;i++){var o=C[i];if(document[o]){var s=document[o]();return s&&s.then?s:Promise.resolve()}}return n&&n.webkitSupportsFullscreen?(n.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.fullscreen&&this.exitFullscreen(),this._cssfullscreenEl=e,this.changeFullStyle(this.root,e,e?re:ie),this.isCssfullScreen=!0,this.emit(c.HW,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?re:ie;this.fullscreen?this.removeClass(e):this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this._cssfullscreenEl=null,this.isCssfullScreen=!1,this.emit(c.HW,!1)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(c.FU,De({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(c.Z$,De({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3};if(this.isActive=!0,this.removeClass(te),this.userTimer&&(r.ZP.clearTimeout(this,this.userTimer),this.userTimer=null),!1!==t.autoHide){var n=t&&t.delay?t.delay:this.config.inactive;this.userTimer=r.ZP.setTimeout(this,(function(){e.userTimer=null,e.blur()}),n)}else this.userTimer&&(r.ZP.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};if(this.isActive){var t=this.config.closePauseVideoFocus;this.isActive=!1,(e.ignorePaused||t||!this.paused&&!this.ended)&&this.addClass(te)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.hasStart&&this.removeClass(K),this.removeClass($),this.isCanplay=!0,this.waitTimer&&r.ZP.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){this.removeClass(Y),this.ended&&this.removeClass(q),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(Y),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(r.ZP.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(q)}},{key:"onError",value:function(){this._isError=!0,this.updateAcc("error"),this.removeClass(se),this.removeClass(ee),this.removeClass(K),this.removeClass($),this.addClass(Q)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(ae)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&r.ZP.clearTimeout(this,this.waitTimer),this.removeClass($),this.removeClass(ae)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&r.ZP.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=r.ZP.setTimeout(this,(function(){e.addClass($),r.ZP.clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;this._isError=!1,[ee,Y,q,Q,J,$].forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.getVideoSize(),(this.waitTimer||this.hasClass($))&&this.video.readyState>2&&(this.removeClass($),r.ZP.clearTimeout(this,this.waitTimer),this.waitTimer=null),this.paused||this.isPlaying||!this.duration||(this.isPlaying=!0,this.emit(c.Pl)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===r.ZP.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.video&&t&&e){var i="String"===r.ZP.typeOf(e)?e:e.type||"";"switch_play_pause"===t&&("Undefined"===r.ZP.typeOf(n.paused)&&(n.paused=this.paused),n.isFirstStart=!this.playing),this.emit(c.xf,De({eventType:i,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.video.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.video.currentTime||.2,i=t.length,o=0;o<i;o++)if(t.start(o)<=n&&t.end(o)>n)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.video&&e&&e.h){var t=1/e.h,n=1!==t?"scale(".concat(t,")"):"",i=0,o=0;e.y&&(o=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(i=(100-100*e.w)/2-100*e.x),n+=" translate(".concat(i,"%, ").concat(o,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(n){if("plugins"!==n){t.config[n]=e[n];var i=t.plugins[n.toLowerCase()];i&&"Function"===r.ZP.typeOf(i.setConfig)&&i.setConfig(e[n])}}))}},{key:"playNext",value:function(e){var t=this;this.resetState(),this._currentTime=0,this._duration=0,this.isPlaying=!1,this.setConfig(e),(0,fe.rl)(this,"playnext",(function(){t.play(),t.emit(c.mW,e)}))}},{key:"getVideoSize",value:function(){var e=this;if(this.video){var t=this.video,n=t.videoWidth,i=t.videoHeight,o=this.config,r=o.fitVideoSize,s=o.videoFillMode;if("fill"!==s&&"cover"!==s||this.setAttribute("data-xgfill",s),i&&n){this._videoHeight=i,this._videoWidth=n;var a=this.root.getBoundingClientRect(),l=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,u=a.width,f=a.height-l,h=parseInt(n/i*1e3,10),p=parseInt(u/f*1e3,10),d=u,y=f,g={};"auto"===r&&p>h||"fixWidth"===r?(y=u/h*1e3,this.config.fluid?g.paddingTop="".concat(100*y/d,"%"):g.height="".concat(y+l,"px")):("auto"===r&&p<h||"fixHeight"===r)&&(d=h*f/1e3,g.width="".concat(d,"px")),this.fullscreen||this.isCssfullScreen||Object.keys(g).map((function(t){e.root.style[t]=g[t]})),("fillHeight"===s&&p<h||"fillWidth"===s&&p>h)&&this.setAttribute("data-xgfill","cover");var v={videoScale:h,vWidth:d,vHeight:y,cWidth:d,cHeight:y+l};this.emit(c.km,v)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video.updateObjectPosition?this.video.updateObjectPosition(e,t):this.video.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition;n.list=e,this.emit("resourceReady",e);var i=null,o=null;e.map((function(e){t.curDefinition===e.definition&&(i=e),n.defaultDefinition===e.definition&&(o=e)})),!o&&e.length>0&&(o=e[0]),i?this.changeDefinition(i):o&&this.changeDefinition(o)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.video||!this.video.getVideoPlaybackQuality)return e;var t=this.video.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==Ae.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,Z.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(Ae.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return"zh"===e&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return je.Z}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=Me(Ge(f.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=Me(Ge(f.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=Me(Ge(f.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"avgSpeed",get:function(){return Ze},set:function(e){Ze=e}},{key:"realTimeSpeed",get:function(){return We},set:function(e){We=e}},{key:"hook",value:function(e,t){return fe.z3.call.apply(fe.z3,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return fe.xn.call.apply(fe.xn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return fe.v8.call.apply(fe.v8,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];return fe.bR.call.apply(fe.bR,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];return fe.g2.call.apply(fe.g2,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),Z.setCurrentUserActive(this.playerId,e)}}],i=[{key:"debugger",get:function(){return T.Z.config.debug},set:function(e){T.Z.config.debug=e}},{key:"pluginsManager",get:function(){return Z}},{key:"getCurrentUserActivePlayerId",value:function(){return Z.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){Z.setCurrentUserActive(e,t)}},{key:"isHevcSupported",value:function(){return s.Z.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return s.Z.probeConfigSupported(e)}},{key:"install",value:function(e,t){f.plugins||(f.plugins={}),f.plugins[e]||(f.plugins[e]=t)}},{key:"use",value:function(e,t){f.plugins||(f.plugins={}),f.plugins[e]=t}}],n&&Ne(t.prototype,n),i&&Ne(t,i),Object.defineProperty(t,"prototype",{writable:!1}),f}(m);Ve(Ke,"defaultPreset",null),Ve(Ke,"XgVideoProxy",null)},80138:(e,t,n)=>{n.d(t,{ZP:()=>f});var i=n(30543),o=n(41422),r=n(5265);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){o.Z.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.ZP.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),(0,r.ZP)(this),this.__args=t,this.__events={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}var t,n,o;return t=e,n=[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=i.ZP.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):u(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){e&&t&&this.player?this.player.once(e,t):u(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(i){delete n.__events[e],n.player.off(i,t)})):u(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;Object.keys(this.__events).map((function(t){e.__events[t]&&e.off(t,e.__events[t]),t&&delete e.__events[t]})),this.__events={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(t=this.player).emit.apply(t,[e].concat(i))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var i=a(a({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,i)}}},{key:"hook",value:function(e,t){return r.z3.call.apply(r.z3,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return r.xn.call.apply(r.xn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return r.v8.call.apply(r.v8,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),i.ZP.clearAllTimers(this),i.ZP.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),(0,r.Qs)(this)}}],o=[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}],n&&l(t.prototype,n),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},5265:(e,t,n)=>{function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];var s=t.call.apply(t,[e].concat(o));n&&"function"==typeof n&&(s&&s.then?s.then((function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];n.call.apply(n,[e].concat(i))})):n.call.apply(n,[e].concat(o)))}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var o=arguments,s=this;if(n.pre)try{var a;(a=n.pre).call.apply(a,[this].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(t.message),t}if(this.__hooks&&this.__hooks[e])try{var c,l=(c=this.__hooks[e]).call.apply(c,[this,this].concat(Array.prototype.slice.call(arguments)));l?l.then?l.then((function(e){!1!==e&&r.apply(void 0,[s,t,n.next].concat(i(o)))})).catch((function(e){throw e})):r.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===l&&r.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(t.message),t}else r.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function a(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function c(e,t){var n=this.__hooks;n&&delete n[e]}function l(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.useHooks&&t.useHooks.apply(t,i)}}function u(e){if(this.plugins&&this.plugins[e.toLowerCase()]){var t=this.plugins[e.toLowerCase()];if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.removeHooks&&t.removeHooks.apply(t,i)}}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function h(e){e.__hooks=null}function p(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(o));var s,a=(s=e.__hooks[t]).call.apply(s,[e,e].concat(o));if(a&&a.then)a.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(o))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==a)return n.call.apply(n,[e,e].concat(o))}n.d(t,{ZP:()=>f,z3:()=>s,xn:()=>a,bR:()=>l,g2:()=>u,v8:()=>c,Qs:()=>h,rl:()=>p})},41422:(e,t,n)=>{n.d(t,{Z:()=>s,w:()=>a});var i="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,o={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},r="%c[xgplayer]",s={config:{debug:i?3:1},logInfo:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];this.config.debug>=3&&(t=console).log.apply(t,[r,o.info,e].concat(i))},logWarn:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];this.config.debug>=1&&(t=console).warn.apply(t,[r,o.warn,e].concat(i))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];(t=console)[n].apply(t,[r,o.error,e].concat(s))}}};function a(e){e.logInfo=s.logInfo.bind(e),e.logWarn=s.logWarn.bind(e),e.logError=s.logError.bind(e)}},19384:(e,t,n)=>{n.d(t,{Z:()=>a});var i=/(Android)\s([\d.]+)/,o=/(Version)\/([\d.]+)/,r=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],s={get device(){return s.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),r=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!r,a=!(s||i||n||r),c=/(?:iPad|PlayBook)/.test(e);return{isTablet:r,isPhone:s,isIpad:c,isIos:s||c,isAndroid:i,isPc:a,isSymbian:n,isWindowsPhone:t,isFireFox:o}},get osVersion(){var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?o:i)?t.exec(e):[];if(n&&n.length>=3){var r=n[2].split(".");return r.length>0?parseInt(r[0]):0}return 0},get isWeixin(){return"undefined"!=typeof navigator&&!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())},isSupportMP4:function(){if(this.supportResult)return this.supportResult;var e=document.createElement("video"),t={isSupport:!1,mime:""};return"function"==typeof e.canPlayType&&r.map((function(n){"probably"===e.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(t.isSupport=!0,t.mime+="||".concat(n))})),this.supportResult=t,e=null,t},isHevcSupported:function(){return MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var n=e.video||{},i=e.audio||{};try{var o=MediaSource.isTypeSupported(n.contentType),r=MediaSource.isTypeSupported(i.contentType);return Promise.resolve({supported:o&&r,smooth:!1,powerEfficient:!1})}catch(e){return Promise.resolve(t)}}};const a=s},30543:(e,t,n)=>{n.d(t,{ZP:()=>c,VQ:()=>h,P2:()=>f});var i=n(41422);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bufferedList=t}var t,n;return t=e,(n=[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var c={};function l(e,t){for(var n=0,i=t.length;n<i;n++)if(e.indexOf(t[n])>-1)return!0;return!1}function u(e){var t=a(e);return null!==e&&("object"===t||"function"===t)}function f(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return u(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),function(e,t,n){var i,o,r,s,a,c,l=0,f=!1,h=!1,p=!0,d=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=i,r=o;return i=o=void 0,l=t,s=e.apply(r,n)}function g(e,t){return d?(window.cancelAnimationFrame(a),window.requestAnimationFrame(e)):setTimeout(e,t)}function v(e){return l=e,a=g(b,t),f?y(e):s}function m(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-l>=r}function b(){var e=Date.now();if(m(e))return w(e);a=g(b,function(e){var n=e-l,i=t-(e-c);return h?Math.min(i,r-n):i}(e))}function w(e){return a=void 0,p&&i?y(e):(i=o=void 0,s)}function k(){for(var e=Date.now(),n=m(e),r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];if(i=l,o=this,c=e,n){if(void 0===a)return v(c);if(h)return a=g(b,t),y(c)}return void 0===a&&(a=g(b,t)),s}return t=+t||0,u(n)&&(f=!!n.leading,r=(h="maxWait"in n)?Math.max(+n.maxWait||0,t):r,p="trailing"in n?!!n.trailing:p),k.cancel=function(){void 0!==a&&function(e){if(d)return window.cancelAnimationFrame(e);clearTimeout(e)}(a),l=0,i=c=o=a=void 0},k.flush=function(){return void 0===a?s:w(Date.now())},k.pending=function(){return void 0!==a},k}(e,t,{leading:i,trailing:o,maxWait:t})}function h(){var e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return"zh-cn"===e&&(e="zh"),e}c.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(e);return o.className=i,o.innerHTML=t,Object.keys(n).forEach((function(t){var i=t,r=n[t];"video"===e||"audio"===e||"live-video"===e?r&&o.setAttribute(i,r):o.setAttribute(i,r)})),o},c.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var o=document.createElement("div");o.innerHTML=e;var r=o.children;return o=null,r.length>0?(r=r[0],n&&c.addClass(r,n),t&&Object.keys(t).forEach((function(e){r.setAttribute(e,t[e])})),r):null}catch(e){return i.Z.logError("util.createDomFromHtml",e),null}},c.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(i){var n=e.className&&"object"===a(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},c.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(n){c.hasClass(e,t)||(e.className&&"object"===a(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},c.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(n){c.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===a(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},c.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){c.hasClass(e,t)?c.removeClass(e,t):c.addClass(e,t)}))},c.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===c.typeOf(e[n])?t.push(e[n]):"Object"===c.typeOf(e[n])&&Object.keys(e[n]).map((function(i){e[n][i]&&t.push(i)}))},i=0;i<arguments.length;i++)n(i);return t.join(" ")},c.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(o){i.Z.logError("util.findDom",o),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},c.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},c.padStart=function(e,t,n){for(var i=String(n),o=t>>0,r=Math.ceil(o/i.length),s=[],a=String(e);r--;)s.push(i);return s.join("").substring(0,o-a.length)+a},c.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=c.padStart(Math.floor(e/3600),2,0),n=c.padStart(Math.floor((e-3600*t)/60),2,0),i=c.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},c.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},c.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},c.deepCopy=function(e,t){if("Object"===c.typeOf(t)&&"Object"===c.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==c.typeOf(t[n])||t[n]instanceof Node?"Array"===c.typeOf(t[n])?e[n]="Array"===c.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:c.deepCopy(e[n],t[n])})),e},c.deepMerge=function(e,t){return Object.keys(t).map((function(n){var i,o;"Array"===c.typeOf(t[n])&&"Array"===c.typeOf(e[n])?"Array"===c.typeOf(e[n])&&(i=e[n]).push.apply(i,function(e){if(Array.isArray(e))return s(e)}(o=t[n])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):c.typeOf(e[n])!==c.typeOf(t[n])||null===e[n]||"Object"!==c.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):c.deepMerge(e[n],t[n])})),e},c.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},c.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},c.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=window.setInterval(n.bind(e),i))},c.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},c.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var i=setTimeout((function(){t(),c.clearTimeout(e,i)}),n);return e._timers.push(i),i},c.clearTimeout=function(e,t){var n=e._timers;if("Array"===c.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1),clearTimeout(t);break}}else clearTimeout(t)},c.clearAllTimers=function(e){var t=e._timers;"Array"===c.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},c.createImgBtn=function(e,t,n,i){var o,r,s,a=c.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return a.style.backgroundImage='url("'.concat(t,'")'),n&&i&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1&&(o=parseFloat(n.slice(0,n.indexOf(e)).trim()),r=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=e,1))})),a.style.width="".concat(o).concat(s),a.style.height="".concat(r).concat(s),a.style.backgroundSize="".concat(o).concat(s," ").concat(r).concat(s),a.style.margin="start"===e?"-".concat(r/2).concat(s," auto auto -").concat(o/2).concat(s):"auto 5px auto 5px"),a},c.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var i="#";e.replace(/[0-9A-F]/gi,(function(e){i+=e+e})),e=i}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},c.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},c.checkIsFunction=function(e){return e&&"function"==typeof e},c.checkIsObject=function(e){return null!==e&&"object"===a(e)},c.hide=function(e){e.style.display="none"},c.show=function(e,t){e.style.display=t||"block"},c.isUndefined=function(e){if(null==e)return!0},c.setStyleFromCsstext=function(e,t){t&&("String"===c.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},c.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),o={},r={};return i.map((function(e){if(e){var n=e.split(":");n.length>1&&(l(n[0],t)?o[n[0]]=n[1]:r[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(r).map((function(t){e.style[t]=r[t]})),o},c.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),i={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(i[t[0]]=t[1])}})),i},c.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var i=new window.Image;i.onload=function(e){i=null,t&&t(e)},i.onerror=function(e){i=null,n&&n(e)},i.src=e}},c.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},c.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},c.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},c.checkTouchSupport=function(){return"ontouchstart"in window},c.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<e.length;i++)n.push({start:e.start(i)<.5?0:e.start(i),end:e.end(i)});n.sort((function(e,t){return e.start-t.start||t.end-e.end}));var o=[];if(t)for(var s=0;s<n.length;s++){var a=o.length;if(a){var c=o[a-1].end;n[s].start-c<t?n[s].end>c&&(o[a-1].end=n[s].end):o.push(n[s])}else o.push(n[s])}else o=n;return new r(o)},c.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},c.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},c.getHostFromUrl=function(e){if(null==e||""===e||"string"!=typeof e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},c.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},c.isMSE=function(e){return!!(e&&e instanceof HTMLMediaElement)&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},c.generateSessionId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new Date).getTime();try{e=parseInt(e)}catch(t){e=0}t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=parseInt(window.performance.now()));var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}));return n}},35743:(e,t,n)=>{n.d(t,{Z:()=>i});const i=JSON.parse('"3.0.0-alpha.106"')}}]);