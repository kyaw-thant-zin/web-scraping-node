"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8004],{2552:(e,t,o)=>{o.d(t,{n:()=>n,_:()=>i});const n=e=>{try{let t=btoa(e);return t=t.replace(/=+$/,""),encodeURIComponent(t)}catch(e){return null}},i=e=>{try{const t=decodeURIComponent(e);let o="";const n=t.length%4;2===n?o="==":3===n&&(o="=");const i=atob(t+o);if(!i)throw Error();return i}catch(e){return null}}},99230:(e,t,o)=>{o.d(t,{wC:()=>P,T:()=>O,yG:()=>L,bg:()=>M,Ly:()=>D,g0:()=>A,yM:()=>T,Hx:()=>R});var n=o(64047),i=o(73566),a=o(48185),r=o(19630),s=o(35167),d=o(86254),l=o.n(d),c=o(82346),m=o(11348),p=o(60595),u=o(20948),h=o(53095),_=o(93859),g=o(10026),y=o(5549),v=o(49584),b=o(68854),f=o(21070),C=o(55481),w=o(53468),x=o(91034),k=o(2552);const I=({reportTarget:e})=>{if(!e)return null;const{report_type:t,video_owner:o,video_id:n,object_id:i}=e;let a=null;if(n&&o){const e=(0,x.fH)({uniqueId:null==o?void 0:o.uniqueId,videoId:n,secUid:null==o?void 0:o.secUid});a=`${location.origin}${e}`,"comment"===t&&(a=`${a}&cid=${(0,k.n)(i)}`)}return a};var S,j=o(61157);!function(e){e[e.Normal=0]="Normal",e[e.Bully=1]="Bully",e[e.Legal=2]="Legal",e[e.Spam=3]="Spam",e[e.UserPretend=4]="UserPretend",e[e.UserProfile=5]="UserProfile",e[e.Netzdg=6]="Netzdg",e[e.Kopig=7]="Kopig",e[e.Avia=8]="Avia"}(S||(S={}));const O=[112,212,9014],P=[222,9015],R=({reportTarget:e})=>{const t=I({reportTarget:e});return"https://www.tiktok.com/legal/report/NetzDG?lang=de"+(t?`&reporturl=${encodeURIComponent(t)}`:"")},A=({reportTarget:e})=>{const t=I({reportTarget:e});return"https://www.tiktok.com/legal/report/lcen?lang=fr"+(t?`&reporturl=${encodeURIComponent(t)}`:"")},T=({reportTarget:e})=>{const t=I({reportTarget:e});return"https://www.tiktok.com/legal/copyright-policy"+(t?`?report_url=${encodeURIComponent(t)}`:"")},L={hideArrow:"hideArrow",hideReportBox:"hideReportBox",avia:"avia",pretend:"pretend",bully:"bully",showDesc:"showDesc",requireDesc:"requireDesc",requireImage:"requireImage",hideBlockUser:"hideBlockUser",needLogin:"needLogin",webappNeedLoginLegal:"webappNeedLoginLegal",webappNeedLoginNetzdg:"webappNeedLoginNetzdg",webappNeedLoginAvia:"webappNeedLoginAvia"};var F;!function(e){e[e.Reason=0]="Reason",e[e.Normal=1]="Normal",e[e.Kopig=2]="Kopig",e[e.User=3]="User",e[e.BlockUser=4]="BlockUser",e[e.Finish=5]="Finish",e[e.Ftcreport=6]="Ftcreport",e[e.ImageDesc=7]="ImageDesc",e[e.Old=8]="Old"}(F||(F={}));const D={User:3,Desc:1,NETZDG:2,Old:8,Counterfeit:7};let M=class extends i.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={reasons:null,showing:!1,loading:!1,requesting:void 0,reportTarget:null,lastStatus:-1,PageState:0,PageStateData:void 0,PreState:[],UserData:{selectedReason:void 0,submitresult:void 0,HistoryReason:[]},blockedVideos:[],reasonsAPIVersion:2}}setReasonsAPIVersion(e,t){e.reasonsAPIVersion=t}setReportTarget(e,t){e.reportTarget=t}judgeFtc(e,t){"kid_mode_video"===t.report_type&&(e.PageState=6)}setReasons(e,t){e.reasons=t,e.PageStateData={reasons:t}}addBlockVideo(e,t){e.blockedVideos.includes(t)||e.blockedVideos.push(t)}removeBlockVideo(e,t){e.blockedVideos=e.blockedVideos.filter((e=>e!==t))}setLoading(e,t){e.loading=t}getReasons(e){return e.pipe((0,u.M)(this.state$),(0,h.z)((([e,t])=>{var o;if(l()(e,t.reportTarget)&&t.reasons&&(null===(o=t.reasons)||void 0===o?void 0:o.length)>0)return(0,c.of)(this.getActions().setReasons(t.reasons));const{report_type:n,lang:i,object_id:a}=e;return this.service.getReportReasons({report_type:n,lang:i,object_id:a,api_version:t.reasonsAPIVersion}).pipe((0,_.b)((({body:e})=>{e.length||C.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:1.2,widthType:"half"})})),(0,h.z)((t=>{var o,n,i;if(0===t.statusCode){let a=null!==(o=t.body)&&void 0!==o?o:[];return"user"===e.report_type&&(a=null!==(i=null===(n=a.find((e=>9101===e.reason_type)))||void 0===n?void 0:n.next_reason)&&void 0!==i?i:a),(0,c.of)(this.getActions().setReasons(a))}return(0,c.of)(this.getActions().setReasons([]))})),(0,g.O)(this.getActions().setLoading(!0)),(0,y.l)(this.getActions().setLoading(!1)))})))}handleNextReason(e){return e.pipe((0,u.M)(this.state$),(0,_.b)((([{reason_id:e},{reportTarget:t}])=>{const{object_id:o="",report_type:n=""}=null!=t?t:{};f.y.handleReportNext({object_id:o,object_type:n,reason_id:e})})),(0,h.z)((([{nextReason:e},{PageStateData:t,PageState:o}])=>(0,c.of)(this.getActions().setPageStateData({reasons:e}),this.getActions().appendToPreState({state:o,data:t})))))}handleNextForm(e){return e.pipe((0,u.M)(this.state$),(0,h.z)((([e,{PageStateData:t,PageState:o}])=>(0,c.of)(this.getActions().setPageState(e),this.getActions().setPageStateData({}),this.getActions().appendToPreState({state:o,data:t})))))}setShowing(e,t){e.showing=t}showReport(e){return e.pipe((0,h.z)((e=>(0,c.of)(this.getActions().setShowing(!0),this.getActions().judgeFtc(e),this.getActions().getReasons(e),this.getActions().setReportTarget(e)))))}hideReport(e){return e.pipe((0,h.z)((()=>(0,c.of)(this.getActions().setShowing(!1)))))}setRequesting(e,t){e.requesting=t}setLastStatus(e,t){e.lastStatus=t}postReport(e){return e.pipe((0,u.M)(this.state$),(0,v.z)((([{reason:e,extraData:t,region:o,uid:n},{reportTarget:i,UserData:a}])=>{if(!i)return m.E;const r=8===(null==a?void 0:a.selectedReason).special_type,s={};Array.isArray(e)&&"kid_mode_video"===i.report_type&&(s.additional_reasons=`%5B${e.join(",")}%5D`,e=e[0]);const d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({app_name:"tiktok_web",aid:1988,current_region:o,reporter_id:n,reason:e},i),{target:i.object_id}),t),{report_type:"kid_mode_video"===i.report_type?"video":i.report_type}),s);return this.service.postReport(d).pipe((0,b.K)((()=>(0,c.of)({status_code:-1}))),(0,h.z)((t=>{let o;switch(t.status_code){case 90002:o={title:this.t("Web_report_thanks_for_report"),content:this.t("Web_report_report_detail"),button:this.t("live_close"),success:!1};break;case 0:o={title:this.t("Web_report_thanks_for_report"),content:r?this.t("avia_law_report_received_confirm"):this.t("Web_report_report_detail"),button:this.t("pm_mt_live_done"),success:!0};break;default:o={title:this.t("Web_report_report_for_error"),content:this.t("Sorry, something wrong with the server, please try again."),button:this.t("live_close"),success:!1}}if(0===t.status_code){const{object_id:t,report_type:o}=i;f.y.handleReportSubmit({object_id:t,object_type:o,reason_id:e})}return"video"===i.report_type&&0===t.status_code&&i.object_id?(0,c.of)(this.getActions().addBlockVideo(i.object_id),this.getActions().setLastStatus(t.status_code),this.getActions().setPageState(5),this.getActions().setUserData({submitresult:o})):(0,c.of)(this.getActions().setLastStatus(t.status_code),this.getActions().setPageState(5),this.getActions().setUserData({submitresult:o}))})),(0,g.O)(this.getActions().setRequesting(!0)),(0,y.l)(this.getActions().setRequesting(!1)))})))}setPageState(e,t){e.PageState=t}appendToPreState(e,t){e.PreState.push(t)}removeFromPreState(e){e.PreState.pop()}resetPreState(e){e.PreState=[]}setUserData(e,t){e.UserData=Object.assign(Object.assign({},e.UserData),t)}setPageStateData(e,t){e.PageStateData=t}resetState(e){return e.pipe((0,h.z)((e=>(0,c.of)(this.getActions().resetPreState(),this.getActions().setUserData({selectedReason:void 0,HistoryReason:[]}),this.getActions().setPageState(0),this.getActions().setPageStateData(null)))))}popHistoryReason(e){return e.pipe((0,u.M)(this.state$),(0,h.z)((([e,{UserData:t}])=>{var o;const n=[...null!==(o=t.HistoryReason)&&void 0!==o?o:[]];return n.pop(),(0,c.of)(this.getActions().setUserData({HistoryReason:n}))})))}handlePrevStep(e){return e.pipe((0,u.M)(this.state$),(0,h.z)((([e,{PreState:t}])=>{if(0===t.length)return m.E;const{state:o,data:n}=t[t.length-1];return(0,c.of)(this.getActions().popHistoryReason(),this.getActions().setPageState(o),this.getActions().setPageStateData(n),this.getActions().removeFromPreState())})))}};(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Number]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setReasonsAPIVersion",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setReportTarget",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"judgeFtc",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setReasons",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"addBlockVideo",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"removeBlockVideo",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setLoading",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"getReasons",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"handleNextReason",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"handleNextForm",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setShowing",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"showReport",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"hideReport",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setRequesting",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Number]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setLastStatus",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"postReport",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Number]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setPageState",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"appendToPreState",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"removeFromPreState",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"resetPreState",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setUserData",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"setPageStateData",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"resetState",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"popHistoryReason",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[p.y]),(0,n.__metadata)("design:returntype",void 0)],M.prototype,"handlePrevStep",null),M=(0,n.__decorate)([(0,r.Y)("Report"),(0,n.__param)(1,(0,s.t)(w.s$)),(0,n.__metadata)("design:paramtypes",[j.r,Function])],M)},61157:(e,t,o)=>{o.d(t,{r:()=>d});var n=o(64047),i=o(57244),a=o(82346),r=o(59674),s=o(71332);let d=class{constructor(e){this.fetch=e}getReportReasons(e){return this.fetch.get("/node/report/reasons",{query:e,baseUrlType:2})}postReport(e){return this.fetch.get("/aweme/v2/aweme/feedback/",{query:e,baseUrlType:2})}uploadImage(e){if(0===e.length)return(0,a.of)({data:[],statusCode:0});const t=new FormData;for(let o=0;o<e.length;o++){const n=e[o];t.append("type",n.type),t.append("size",`${n.size}`),t.append("name",n.name),t.append("height",n.height),t.append("width",n.width),t.append(`file${o}`,n,n.name)}return this.fetch.post("/node/feedback/upload_image/",{body:t,headers:{[r.eD]:this.fetch.csrfToken},baseUrlType:2,omitContentType:!0})}};d=(0,n.__decorate)([(0,i.G)(),(0,n.__metadata)("design:paramtypes",[s.r])],d)},41855:(e,t,o)=>{o.d(t,{PA:()=>n,G2:()=>i,$B:()=>a,xN:()=>r});const n={0:{forceMute:!1,defaultMute:!1},1:{forceMute:!0,defaultMute:!0},2:{forceMute:!1,defaultMute:!1},3:{forceMute:!1,defaultMute:!1},4:{forceMute:!1,defaultMute:!1},6:{forceMute:!1,defaultMute:!1},5:{forceMute:!1,defaultMute:!1}},i=.8,a=.05,r=5},22295:(e,t,o)=>{o.d(t,{Fk:()=>h,Mz:()=>_,s_:()=>g,DZ:()=>y,$v:()=>v,ru:()=>f,A4:()=>C,vN:()=>w});var n=o(9236),i=o(16926),a=o(91051),r=o(10571),s=o(66809),d=o(168),l=o(242),c=o(96137),m=o(41855),p=o(82044),u=o(99510);function h({loadingThreshold:e=1e3,isCurrentVideo:t}){const[o,n]=(0,a.useState)(!1),i=(0,a.useRef)(0),r=(0,a.useCallback)((()=>{i.current&&window.clearTimeout(i.current),n(!1)}),[]),s=(0,a.useCallback)((()=>{e?(i.current&&window.clearTimeout(i.current),i.current=window.setTimeout((()=>{n(!0)}),e)):n(!0)}),[e]);return(0,a.useEffect)((()=>(t||(window.clearTimeout(i.current),n(!1)),()=>window.clearTimeout(i.current))),[t]),{loading:o,handleCanPlayWithLoading:r,handlePauseWithLoading:r,handlePlayingWithLoading:r,handleErrorWithLoading:r,handleWaitingWithLoading:s}}function _(){const[e,t]=(0,a.useState)(!0),o=(0,a.useCallback)((()=>{t(!1)}),[]),n=(0,a.useCallback)((()=>{t(!0)}),[]);return(0,a.useEffect)((()=>{const e=(0,d.Y8)(o,n);return()=>{null==e||e()}}),[n,o]),e}function g(e){const[{mute:t,volume:o},i]=(0,n.b7)(s.x,{selector:e=>({mute:e.mute,volume:e.volume}),dependencies:[]}),d=(0,c.il)(),l=(0,a.useCallback)(((t,n="click",a)=>{if(r.$.handleSwitchSound(Object.assign({muted:t,playMode:e,enter_method:n},a)),r.$.handleVolumeChange({volume_to:o,click_mute:!0}),u.Bv.setItem("muted",t),i.setMute(t),!t&&0===u.Bv.getItem("volume")){let e=.6;"v2"===d?e=.7:"v3"===d?e=.75:"v4"===d?e=.5:"v5"===d&&(e=.4),u.Bv.setItem("volume",e),i.setVolume(e)}}),[i,e,d,o]);return{mute:t,volume:o,setMute:l}}function y(){const[{mute:e,volume:t},o]=(0,n.b7)(s.x,{selector:e=>({mute:e.mute,volume:e.volume}),dependencies:[]}),i=(0,a.useCallback)(((e,t)=>{u.Bv.setItem("volume",e),o.setVolume(e),0===e?(u.Bv.setItem("muted",!0),o.setMute(!0)):t&&(u.Bv.setItem("muted",!1),o.setMute(!1))}),[o]);return{mute:e,volume:t,setVolume:i}}function v(e){const{setMute:t,setVolume:o}=(0,n.qj)(s.x),i=(0,c.il)();let r=.6;"v2"===i?r=.7:"v3"===i?r=.75:"v4"===i?r=.5:"v5"===i&&(r=.4),(0,a.useEffect)((()=>{var n,i;t(null!==(n=u.Bv.getItem("muted"))&&void 0!==n?n:m.PA[e].defaultMute),o(null!==(i=u.Bv.getItem("volume"))&&void 0!==i?i:r)}),[])}const b="video_playback_error";function f(){const e=(0,i.fz)(p.n);return(0,a.useCallback)((t=>{var o,n,i;const a=null!==(n=null===(o=null==t?void 0:t.nativeEvent)||void 0===o?void 0:o.target)&&void 0!==n?n:null===(i=null==t?void 0:t.nativeEvent)||void 0===i?void 0:i.srcElement;if(a){const{error:{code:t=-1,message:o="Empty message"}={},networkState:n,readyState:i,src:r="",currentTime:s=0}=a;e.emitEvent(b,{code:t},{errorMessage:o,errorCode:t,readyState:i,networkState:n,isXgPlayer:"0"});const d={errorCode:t,errorMessage:o,src:r,currentTime:s,networkState:n,readyState:i};e.captureMessage(`Video playback error: ${JSON.stringify(d)}`,"error")}}),[e])}function C(){const e=(0,i.fz)(p.n);return(0,a.useCallback)((t=>{if(t)try{const{error:o,readyState:n,networkState:i,currentTime:a=0,currentSrc:r=""}=t,{code:s=-1,message:d="Empty message"}=null!=o?o:{};e.emitEvent(b,{code:s},{errorMessage:d,errorCode:String(s),readyState:String(n),networkState:String(i),isXgPlayer:"1"});const l={errorCode:s,errorMessage:d,src:r,currentTime:a,networkState:i,readyState:n,isXgPlayer:!0};e.captureMessage(`Video playback error: ${JSON.stringify(l)}`,"error")}catch(e){}}),[e])}function w(e,t){const o=(0,n.mp)(l.A);return(0,a.useMemo)((()=>e.map((e=>{var n,i,a,r,s,d,l,c;const m=null!==(n=e.id)&&void 0!==n?n:"",p=o[m],u=null!==(a=null===(i=null==p?void 0:p.video)||void 0===i?void 0:i.bitrateInfo)&&void 0!==a?a:[];return u.length>1?u.map((t=>{var o,n,i,a;return{id:null==e?void 0:e.id,url:null!==(n=null===(o=t.PlayAddr)||void 0===o?void 0:o.UrlList)&&void 0!==n?n:null===(i=null==p?void 0:p.video)||void 0===i?void 0:i.playAddr,definition:t.GearName,bitrate:t.Bitrate,duration:null===(a=null==p?void 0:p.video)||void 0===a?void 0:a.duration}})):[{id:null==e?void 0:e.id,url:null===(r=null==p?void 0:p.video)||void 0===r?void 0:r.playAddr,definition:null!==(d=null===(s=u[0])||void 0===s?void 0:s.GearName)&&void 0!==d?d:t,bitrate:null===(l=u[0])||void 0===l?void 0:l.Bitrate,duration:null===(c=null==p?void 0:p.video)||void 0===c?void 0:c.duration}]}))),[t,o,e])}},88475:(e,t,o)=>{o.d(t,{Q:()=>F});var n=o(11040),i=o(74820),a=o(91051),r=o(15620),s=o(55481),d=o(60941),l=o(21041),c=o(91034),m=o(82484),p=o(71271),u=o(81830),h=o(32913);const _=(0,h.Z)("span",{target:"efbd9f0"})({fontWeight:400},"label:SpanText;");var g;!function(e){e[e.User=0]="User",e[e.Challenge=1]="Challenge"}(g||(g={}));const y=(e,t,o={})=>(0,n.jsx)(_,Object.assign({style:o},{children:e}),e+t),v={fontWeight:700},b={},f=(0,a.memo)((e=>{const{item:t,DuetComp:o,LinkComp:i,QuestionComp:a,renderText:r=y,shouldReport:s,reportParams:d,styleType:p,mode:h,textExtra:_,desc:g}=e,f=(0,l.TH)();if(!g)return null;const{authorId:C,id:w}=(0,m.m7)(t),x="kep"===p?v:b;return(null==_?void 0:_.length)?(0,n.jsx)(n.Fragment,{children:[..._].sort(((e,t)=>e.start-t.start)).reduce(((t,l,m,_)=>{const{start:y,end:v,awemeId:b,userUniqueId:k,hashtagName:I,type:S,subType:j,userId:O,hashtagId:P,questionId:R="",questionContent:A=""}=l,T=0===m?0:_[m-1].end,L=y,F=g.substring(T,L);F&&t.push(r(F,t.length-1,x));const D=7===(M=j)||5===M;var M;const E=g.substring(y,v);if(0===S&&D){const o=(0,u.C)({to:{pathname:(0,c._9)({questionId:R,questionContent:A})},location:f});t.push((0,n.jsx)(a,{href:o,text:null!=k?k:"",index:t.length-1,id:R,type:"question",authorId:C,groupId:w,shouldReport:s,reportParams:d,styleType:"question",inline:"compact"===h,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},E+m))}else if(0===S&&b){const i=(0,u.C)({to:{pathname:(0,c.fH)({uniqueId:null!=k?k:"",videoId:b})},location:f});t.push((0,n.jsx)(o,{href:i,text:E,index:t.length-1,id:b,type:"video",authorId:C,groupId:w,shouldReport:s,reportParams:d,styleType:"duet",onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},E+m))}else if(0===S&&O){const o=(0,u.C)({to:{pathname:(0,c.yl)({uniqueId:null!=k?k:""})},location:f});t.push((0,n.jsx)(i,{href:o,text:E,index:t.length-1,id:O,type:"user",authorId:C,groupId:w,shouldReport:s,reportParams:d,styleType:p,ariaLabel:`Watch more videos from user ${E}`,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},E+m))}else if(1===S&&I){const o=(0,u.C)({to:{pathname:(0,c.JD)({tagName:I})},location:f});t.push((0,n.jsx)(i,{href:o,text:E,index:t.length-1,id:null!=P?P:"",type:"tag",authorId:C,groupId:w,shouldReport:s,reportParams:d,styleType:p,ariaLabel:`Watch more videos of the ${E} category`,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},E+m))}else t.push(r(E,t.length-1,x));return m===_.length-1&&t.push(r(g.substring(v),t.length,x)),t}),[])},void 0):r(g,0,x)})),C=(0,a.memo)((e=>{const{item:t}=e,{desc:o,contents:i=[],textExtra:r}=(0,m.m7)(t),s=i.length,d=(0,p.Sf)("support_multiline_desc");return o?d&&0!==i.length?(0,n.jsx)(n.Fragment,{children:i.map(((t,i)=>(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(f,Object.assign({},e,{desc:t.desc,textExtra:t.textExtra}),void 0),i!==s-1&&(0,n.jsx)("br",{},void 0)]},`${i}-${o}`)))},void 0):(0,n.jsx)(f,Object.assign({},e,{desc:o,textExtra:r}),void 0):null}));var w=o(36425),x=o(37771);const k="inline-block",I=(0,h.Z)("div",{target:"ejg0rhn0"})((({ellipsis:e,ellispsisLine:t,theme:o,theme:{direction:n,colors:i},styleType:a})=>[Object.assign({},o.typography.P2),e?(0,w.f1)({max:479,style:w.wj}):null,t?1===t?[w.wj,(0,w.YJ)({direction:n,display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"pre-line"})]:(0,w.FC)(t):null,"tag"===a||"question"===a?[(0,w.GI)({theme:o,fontFamily:"Proxima",fontWeight:"semiBold"}),{lineHeight:"22px",color:i.TextPrimary,pointerEvents:"none","a:hover":[{textDecoration:"none"},(0,w.YJ)({direction:n,display:k,verticalAlign:"top",maxWidth:"100%"})],strong:{wordBreak:"break-word",fontWeight:600}}]:null]),"label:DivContainer;"),S=(0,h.Z)("strong",{target:"ejg0rhn1"})((({theme:e,styleType:t=""})=>({fontWeight:"kep"===t?e.fontWeights.bold:e.fontWeights.semiBold})),"label:StrongText;"),j=(0,h.Z)("svg",{target:"ejg0rhn2"})((({theme:{direction:e}})=>[{position:"absolute",top:"50%",marginTop:"-8px"},(0,w.YJ)({direction:e,start:"5px"})]),"label:SvgIcon;"),O=(0,h.Z)(x.v,{shouldForwardProp:e=>"styleType"!==e&&"inline"!==e,target:"ejg0rhn3"})((({styleType:e,inline:t,theme:{direction:o,colors:n}})=>[{background:n.BGPlaceholderDefault,display:t?"inline":k,padding:"1px 5px",position:"relative"},"tag"===e&&[{display:"initial",whiteSpace:"nowrap",fontSize:"14px",lineHeight:"20px"},(0,w.YJ)({direction:o,paddingStart:25})],("duet"===e||"question"===e)&&(0,w.YJ)({direction:o,paddingStart:25}),"kep"===e&&[{fontWeight:700}]]),"label:StyledLink;"),P=(0,h.Z)(x.v,{target:"ejg0rhn4"})((({theme:{colors:e}})=>[{display:k,"&:focus-visible":{display:"inline",outline:`2px solid ${e.Negative}`}}]),"label:StyledCommonLink;");function R({type:e,id:t,authorId:o,groupId:n,text:i,isDuet:s,reportParams:d,shouldReport:l,onSearchResultClick:c}){return(0,a.useCallback)((a=>{if(a.stopPropagation(),l)switch(e){case"tag":r.W.handleEnterTagDetail(Object.assign({tag_id:t,author_id:o,group_id:n,enter_method:s?"click_duet":"click_caption"},d)),null==c||c("tag");break;case"user":r.W.handleEnterUser(Object.assign({to_user_id:t,author_id:o,group_id:n,enter_method:s?"click_duet":"click_caption",to_user_name:i.substr(1)},d)),null==c||c("person");break;case"video":r.W.handleEnterVideo(Object.assign({author_id:o,group_id:n,to_group_id:t,enter_method:s?"click_duet":"click_caption"},d));break;case"question":r.W.handleEnterQuestion(Object.assign({author_id:o,group_id:n,question_id:t,enter_method:"click_anchor"},d))}}),[l,e,t,o,n,s,d,c,i])}const A=e=>{const{href:t,text:o,index:r,id:s,type:d,reportParams:l,shouldReport:c=!0,styleType:m,authorId:p,groupId:u,hasSpace:h=!0,onLinkClick:_,onSearchResultClick:g}=e,y=R({type:d,id:s,text:o,isDuet:!0,reportParams:l,shouldReport:c,authorId:p,groupId:u,onSearchResultClick:g}),v=(0,a.useCallback)((e=>{y(e),null==_||_(e,t)}),[y,t,_]),{colors:b}=(0,i.u)();return(0,n.jsxs)(O,Object.assign({to:t,onClick:v,styleType:m},{children:[(0,n.jsx)(j,Object.assign({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",fill:b.Primary2,width:16,height:16,styleType:m},{children:(0,n.jsx)("use",{xlinkHref:"#svg-play-fill"},void 0)}),void 0),(0,n.jsxs)(S,{children:[o,h?" ":""]},void 0)]}),o+r)},T=e=>{const{href:t,text:o,index:r,id:l,type:c,reportParams:m,shouldReport:p=!0,styleType:u,inline:h,authorId:_,groupId:g,onLinkClick:y,onSearchResultClick:v}=e,b=(0,d.Q)(),f=R({type:c,id:l,text:o,isDuet:!1,reportParams:m,shouldReport:p,authorId:_,groupId:g,onSearchResultClick:v}),C=(0,a.useCallback)((e=>{if(!l)return e.preventDefault(),s.h.destroy(),void s.h.open({content:b("qapage_webapp_error_title"),duration:3,widthType:"padding"});f(e),null==y||y(e,t)}),[f,t,l,y,b]),{colors:w}=(0,i.u)();return(0,n.jsxs)(O,Object.assign({"data-e2e":"question-video-anchor",to:t,onClick:C,styleType:u,inline:h},{children:[(0,n.jsx)(j,Object.assign({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:w.Primary2,width:16,height:16,styleType:u},{children:(0,n.jsx)("use",{xlinkHref:"#svg-question-fill"},void 0)}),void 0),(0,n.jsx)(S,{children:o},void 0)]}),o+r)},L=e=>{const{href:t,text:o,index:i,id:r,type:s,authorId:d,groupId:l,reportParams:c,shouldReport:m=!0,hasSpace:p=!0,styleType:u,ariaLabel:h,onLinkClick:_,onSearchResultClick:g}=e,y=(0,a.useRef)(null),v=R({type:s,id:r,authorId:d,groupId:l,text:o,isDuet:!1,reportParams:c,shouldReport:m,onSearchResultClick:g}),b=(0,a.useCallback)((e=>{v(e),null==_||_(e,t)}),[v,t,_]),f=(0,a.useCallback)((e=>{var t;13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),null===(t=y.current)||void 0===t||t.click())}),[]);return(0,n.jsx)(P,Object.assign({to:t,onClick:b,onKeyDown:f,ref:y,ariaLabel:h},{children:(0,n.jsxs)(S,Object.assign({styleType:u},{children:[o,p?" ":""]}),void 0)}),`${o}${i}`)},F=(0,a.memo)((function(e){const{item:t,ellispsisLine:o=0,ellipsisOnNarrow:i=!1,e2eTag:a,shouldReport:r=!0,reportParams:s,mode:d,styleType:l="default",style:c={}}=e;return(0,n.jsx)(I,Object.assign({style:c,ellipsis:i,ellispsisLine:o,styleType:l,"data-e2e":a},{children:(0,n.jsx)(C,{mode:d,item:t,DuetComp:A,LinkComp:L,QuestionComp:T,reportParams:s,shouldReport:r,styleType:l,onLinkClick:e.onLinkClick,onSearchResultClick:e.onSearchResultClick},void 0)}),void 0)}))},13321:(e,t,o)=>{o.d(t,{_:()=>k});var n,i=o(64047),a=o(11040),r=o(74820),s=o(91051),d=o(67636),l=o(15620),c=o(91034),m=o(60941),p=o(168),u=o(90211),h=o(87472),_=o(32913),g=o(36425),y=o(37771);!function(e){e[e.OneColumn=0]="OneColumn",e[e.BrowserMode=1]="BrowserMode",e[e.KEP=2]="KEP",e[e.OnColumnWithAds=3]="OnColumnWithAds",e[e.VideoDetail=4]="VideoDetail"}(n||(n={}));const v={0:e=>[(0,g.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{marginTop:"4px",marginBottom:"12px"},(0,g.f1)({max:767,style:{maxWidth:"250px"}})],3:e=>[(0,g.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{marginTop:"4px",marginBottom:"12px"},(0,g.f1)({max:767,style:{maxWidth:"250px"}}),{"a:link, a:active, a:visited, a:hover":{color:"#E95730"}}],1:e=>[(0,g.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),{marginTop:"10px",marginBottom:"16px",flex:"0 0 auto"}],4:e=>[(0,g.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"normal"}),{marginTop:"10px",marginBottom:"16px",flex:"0 0 auto"}],2:e=>[(0,g.GI)({theme:e,typography:"P3",fontFamily:"Proxima",fontWeight:"normal"}),{display:"inline",color:e.colors.TextSecondary},{a:{color:e.colors.TextSecondary}},(0,g.YJ)({direction:e.direction,marginStart:12})]},b=(0,_.Z)("h4",{target:"epjbyn0"})((({styleType:e,theme:t})=>v[e](t)),"label:H4Link;"),f={0:{marginRight:"5px"},1:{marginRight:"8px"},2:{marginRight:"4px"},4:{marginRight:"4px"}},C=(0,_.Z)("div",{target:"epjbyn1"})((({theme:{direction:e}})=>[{transform:"translateY(2px)",display:"inline-block"},(0,g.YJ)({direction:e,marginEnd:"5px"})]),"label:DivWrapper;"),w=(0,_.Z)("svg",{target:"epjbyn2"})((({styleType:e,theme:{direction:t}})=>[{transform:"translateY(4px)"},(0,g.YJ)({direction:t,marginEnd:f[e].marginRight})]),"label:SvgIcon;");w.defaultProps={width:"1em",height:"1em"};const x=(0,_.Z)(y.v,{target:"epjbyn3"})((({theme:{colors:e}})=>[{"&:focus-visible":{outline:`2px solid ${e.Negative}`}}]),"label:StyledLink;"),k=(0,s.memo)((function(e){var t,o,n,_,{item:g,styleType:y,e2eTag:v,teaParams:f={},onLinkClick:k,isTT4BAds:I=!1}=e,S=(0,i.__rest)(e,["item","styleType","e2eTag","teaParams","onLinkClick","isTT4BAds"]);const{music:j,id:O,authorId:P}=null!=g?g:{},R=null!==(t=null==j?void 0:j.title)&&void 0!==t?t:"",A=null!==(o=null==j?void 0:j.authorName)&&void 0!==o?o:"",T="Promoted Music"===R?R:R.replace(`- ${A}`,"")+(A?` - ${A}`:""),L=I?"":(0,c.MB)({musicId:null!==(n=null==j?void 0:j.id)&&void 0!==n?n:"",musicName:null!==(_=null==j?void 0:j.title)&&void 0!==_?_:""}),F=(0,m.Q)(),{openAdsHandler:D}=(0,h.m)(3,"hyperlink","one_column"),M=(0,s.useRef)(null),E=(0,s.useCallback)((e=>{if(I)return(0,p.NS)(e),void D();l.W.handleEnterMusicDetail(Object.assign(Object.assign({},f),{music_id:null==j?void 0:j.id,group_id:O,author_id:P,enter_method:"click_caption"})),null==k||k(e,L)}),[I,f,null==j?void 0:j.id,O,P,k,L,D]),$=(0,s.useCallback)((e=>{var t;13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),E(e),null===(t=M.current)||void 0===t||t.click())}),[E]),{colors:B}=(0,r.u)(),U=[1,4].includes(y);return j||I?(0,a.jsx)(b,Object.assign({styleType:y,"data-e2e":v},{children:(0,a.jsxs)(x,Object.assign({to:L,replace:U,onClick:E,onKeyDown:$,ref:M,ariaLabel:`Watch more videos with music ${T}`},S,{children:[I?(0,a.jsx)(C,{children:(0,a.jsx)(d.Z,{color:"#E95730",fontSize:"14px"},void 0)},void 0):(0,a.jsx)(w,Object.assign({fill:B.Primary2,styleType:y,viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},{children:(0,a.jsx)("use",{xlinkHref:"#svg-music-note"},void 0)}),void 0),I?F("pcad_share_body"):T]}),void 0)}),void 0):(0,u.G)(["music"])}))},35499:(e,t,o)=>{o.d(t,{p:()=>S});var n=o(64047),i=o(73566),a=o(48185),r=o(19630),s=o(35167),d=o(82346),l=o(60595),c=o(20948),m=o(49584),p=o(93859),u=o(53095),h=o(15754),_=o(55481),g=o(44848),y=o(53468),v=o(97265),b=o(9653),f=o(7278),C=o(57244),w=o(59674),x=o(71332);let k=class{constructor(e){this.fetch=e}publishRequest(e){return this.fetch.post("/api/comment/publish/",{query:e,baseUrlType:8,headers:{[w.eD]:this.fetch.csrfToken}})}};k=(0,n.__decorate)([(0,C.G)(),(0,n.__metadata)("design:paramtypes",[x.r])],k);const I={nickname:"",replyId:void 0,replyToReplyId:void 0,position:-1};let S=class extends i.D{constructor(e,t,o,n){super(),this.service=e,this.comment=t,this.commentV2=o,this.t=n,this.defaultState={reply:Object.assign({},I),mentionUserList:[],isInputEmpty:!0,isInputFocus:!1,needClearInput:!1,needResetKeyword:!1}}setReply(e,t){e.reply=null===t?Object.assign({},I):t}setMentionUserList(e,t){e.mentionUserList=null===t?[]:t}setIsInputEmpty(e,t){e.isInputEmpty=t}setIsInputFocus(e,t){e.isInputFocus=t}setNeedClearInput(e,t){e.needClearInput=t}setNeedResetKeyword(e,t){e.needResetKeyword=t}publishComment(e){return e.pipe((0,c.M)(this.state$),(0,m.z)((([e,t])=>{const{awemeId:o,inputText:n,textExtra:i,teaParams:a}=e,{reply:{replyId:r,replyToReplyId:s,nickname:l,position:c}}=t,m={aweme_id:o,text:n,reply_id:r,reply_to_reply_id:s,text_extra:JSON.stringify(i)};return this.service.publishRequest(m).pipe((0,p.b)((({status_code:e,comment:t})=>{if(0===e){const e=Boolean(l)?"0"===s?"reply":"reply_to_reply":"original",o=l?this.t("comment_reply_success"):this.t("comment_post_success");_.h.destroy(),_.h.open({content:o,duration:3,getContainer:v.Z}),h.y.handlePostComment(Object.assign({comment_category:e,comment_id:t.cid},a))}else 22===e?(_.h.destroy(),_.h.open({content:this.t("comment_banned_toast"),duration:3,getContainer:v.Z})):e?(_.h.destroy(),_.h.open({content:this.t("comment_post_failed"),duration:3,getContainer:v.Z})):(_.h.destroy(),_.h.open({content:this.t("comment_nointernet_toast"),duration:3,getContainer:v.Z}))})),(0,u.z)((({status_code:t,comment:o})=>{if(0===t){const{isCommentV1:t=!0}=e;return l?t?(0,d.of)(this.getActions().setNeedClearInput(!0),this.comment.getActions().handleReplySuccess({comment:o,position:c})):(0,d.of)(this.getActions().setNeedClearInput(!0),this.commentV2.getActions().handleReplySuccess({comment:o,position:c})):t?(0,d.of)(this.getActions().setNeedClearInput(!0),this.comment.getActions().handlePostSuccess(o)):(0,d.of)(this.getActions().setNeedClearInput(!0),this.commentV2.getActions().handlePostSuccess(o))}return(0,d.of)(this.noop())})),(0,g.n)({}))})))}};(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],S.prototype,"setReply",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],S.prototype,"setMentionUserList",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],S.prototype,"setIsInputEmpty",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],S.prototype,"setIsInputFocus",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],S.prototype,"setNeedClearInput",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],S.prototype,"setNeedResetKeyword",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[l.y]),(0,n.__metadata)("design:returntype",l.y)],S.prototype,"publishComment",null),S=(0,n.__decorate)([(0,r.Y)("CommentInputModule"),(0,n.__param)(3,(0,s.t)(y.s$)),(0,n.__metadata)("design:paramtypes",[k,b.x,f.r,Function])],S)},98793:(e,t,o)=>{o.d(t,{c:()=>r});var n=o(82484),i=o(71271),a=o(60931);const r=()=>{var e;const{abTestVersion:t}=(0,n.m7)((0,a.Lh)((()=>["abTestVersion"]),[])),o=null!==(e=(0,i.N8)(t,"comment_refactor_test"))&&void 0!==e?e:"v1";return{isCommentV1:"v1"===o,isCommentV2:"v2"===o,isCommentV3:"v3"===o}}},95570:(e,t,o)=>{o.d(t,{r:()=>m});var n=o(64047),i=o(73566),a=o(48185),r=o(19630),s=o(25855),d=o.n(s),l=o(40316),c=o.n(l);let m=class extends i.D{constructor(){super(...arguments),this.defaultState={}}setItem(e,t){e[t.cid]=t}setItemDiggState(e,t){e[t.cid]&&(e[t.cid].user_digged=t.digged)}setItemDiggCount(e,t){e[t.cid]&&(e[t.cid].digg_count=t.count)}removeItem(e,t){e[t]=void 0}multiSetCommentItem(e,t){t.forEach((t=>{e[t.cid]=d()({},e[t.cid],t)}))}multiRemoveCommentItem(e,t){return t.forEach((t=>{e[t]=void 0})),e}reduceOrIncreaseCommentCount(e,{cid:t,isReduce:o}){var n,i;if(!e[t])return;const a=Number(null!==(i=null===(n=e[t])||void 0===n?void 0:n.reply_comment_total)&&void 0!==i?i:0);e[t].reply_comment_total=o?a-1:a+1}getProcessedCommentItem(e,t={}){var o;const n=c()(e,"user","reply_comment");return n.user=null!==(o=e.user.unique_id)&&void 0!==o?o:"",!e.reply_comment||t.ignoreReply?[n]:[n,...e.reply_comment.reduce(((e,t)=>(this.getProcessedCommentItem(t).forEach((t=>{e.push(t)})),e)),[])]}};(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],m.prototype,"setItem",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],m.prototype,"setItemDiggState",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],m.prototype,"setItemDiggCount",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,String]),(0,n.__metadata)("design:returntype",void 0)],m.prototype,"removeItem",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],m.prototype,"multiSetCommentItem",null),(0,n.__decorate)([(0,a.j)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],m.prototype,"multiRemoveCommentItem",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],m.prototype,"reduceOrIncreaseCommentCount",null),m=(0,n.__decorate)([(0,r.Y)("CommentItem")],m)},7278:(e,t,o)=>{o.d(t,{C:()=>F,r:()=>D});var n,i=o(64047),a=o(73566),r=o(48185),s=o(19630),d=o(35167),l=o(80390),c=o.n(l),m=o(82346),p=o(11348),u=o(60595),h=o(53095),_=o(20948),g=o(56979),y=o(93859),v=o(49584),b=o(10026),f=o(5549),C=o(12167),w=o(15754),x=o(55481),k=o(90211),I=o(44848),S=o(53468),j=o(97265),O=o(82484),P=o(18814),R=o(53448),A=o(242),T=o(95570),L=o(43231);!function(e){e[e.Like=1]="Like",e[e.Unlike=2]="Unlike"}(n||(n={}));const F={awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!1};let D=class extends a.D{constructor(e,t,o,n,i,a){super(),this.service=e,this.commentItem=t,this.item=o,this.user=n,this.t=i,this.home=a,this.defaultState={}}setCommentItem(e,{itemId:t="",item:o}){var n;return o?(e[t]=Object.assign(Object.assign({},null!==(n=e[t])&&void 0!==n?n:F),o),e):e}setReplyLoading(e,t){var o,n,i;const a=e[t.itemId].comments.find((({cid:e})=>e===t.cid));if(!a)return e;a.replyCache?a.replyCache.loading=t.loading:a.replyCache={comments:null!==(o=a.reply_comment)&&void 0!==o?o:[],cursor:null!==(i=null===(n=a.reply_comment)||void 0===n?void 0:n.length)&&void 0!==i?i:"0",hasMore:!0,loading:t.loading}}setReplyComment(e,t){const o=this.getCommentItem(e,t.cid,t.itemId);if(!o)return e;o.reply_comment=t.comments}setReplyCommentCache(e,t){const o=this.getCommentItem(e,t.cid,t.itemId);if(!o)return e;o.replyCache?(o.replyCache.comments=t.comments,o.replyCache.hasMore=t.hasMore,o.replyCache.cursor=t.cursor):o.replyCache={comments:t.comments,cursor:t.cursor,hasMore:t.hasMore,loading:!1}}deleteCommentFromList(e,t){var o,n;const{index:i,subIndex:a,itemId:r}=t;void 0===a?e[r].comments.splice(i,1):(null===(o=e[r].comments[i].reply_comment)||void 0===o||o.splice(a,1),null===(n=e[r].comments[i].replyCache)||void 0===n||n.comments.splice(a,1))}addCommentToFirst(e,t){e[t.aweme_id].comments.unshift({cid:t.cid,reply_comment:[],replyCache:null})}addReplyToFirst(e,{comment:t,position:o}){var n,i;const{aweme_id:a}=t,r=e[a].comments[o];r&&(r.reply_comment=null!==(n=r.reply_comment)&&void 0!==n?n:[],r.reply_comment.unshift({cid:t.cid,reply_comment:null,replyCache:null}),null===(i=r.replyCache)||void 0===i||i.comments.unshift({cid:t.cid,reply_comment:null,replyCache:null}))}handlePostSuccess(e){return e.pipe((0,h.z)((e=>{const{users:t,commentItems:o}=this.processCommentList([e]);return(0,m.of)(this.getActions().addCommentToFirst(e),this.user.getActions().multiSetUser(t),this.commentItem.getActions().multiSetCommentItem(o),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}handleReplySuccess(e){return e.pipe((0,h.z)((({comment:e,position:t})=>{const{users:o,commentItems:n}=this.processCommentList([e],{ignoreReply:!0});return(0,m.of)(this.getActions().addReplyToFirst({comment:e,position:t,itemId:e.aweme_id}),this.user.getActions().multiSetUser(o),this.commentItem.getActions().multiSetCommentItem(n),this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:e.reply_id}),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}fetchComment(e){return e.pipe((0,h.z)((e=>this.fetchComment$(e))))}fetchComment$(e){return(0,m.of)(e).pipe((0,_.M)(this.state$,this.home.state$),(0,g.U)((([e,t])=>{var o;return{query:e,item:null!==(o=t[e.aweme_id])&&void 0!==o?o:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0}}})),(0,y.b)((({item:e})=>{})),(0,v.z)((({query:{aweme_id:e,insert_ids:t},item:o})=>{var n;if(!(null==o?void 0:o.hasMore))return p.E;const i=null!==(n=null==o?void 0:o.cursor)&&void 0!==n?n:"0";return this.service.getCommentList({insert_ids:"0"===i?t:void 0,aweme_id:e,cursor:i}).pipe((0,y.b)((e=>{(0,k.k)(e.status_code,[0])})),(0,h.z)((t=>{var n,i,a;if(0===t.status_code&&(null===(n=t.comments)||void 0===n?void 0:n.length)){const{users:n,comments:a,commentItems:r}=this.processCommentList(t.comments),s=null!==(i=null==o?void 0:o.comments)&&void 0!==i?i:[],d=c()(s.concat(a),"cid"),l=[this.user.getActions().multiSetUser(n),this.commentItem.getActions().multiSetCommentItem(r),this.getActions().setCommentItem({item:{comments:d,hasMore:Boolean(t.has_more),cursor:t.cursor,loading:!1},itemId:e})];return t.total&&l.push(this.item.getActions().setCommentCount({id:e,commentCount:Number(t.total)})),(0,m.of)(...l)}return 0!==t.status_code||(null===(a=t.comments)||void 0===a?void 0:a.length)||t.has_more?(0,m.of)(this.noop()):(0,m.of)(this.getActions().setCommentItem({item:{hasMore:Boolean(t.has_more),loading:!1},itemId:e}))})),(0,b.O)(this.getActions().setCommentItem({item:{awemeId:e,loading:!0},itemId:e})),(0,f.l)(this.getActions().setCommentItem({item:{loading:!1},itemId:e})),(0,I.n)({shouldShowMsg:!1}),(0,C.R)(this.dispose$))})))}fetchCommentReply(e){return e.pipe((0,_.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,y.b)((([e,t])=>{t||console.warn("No item here in fetch commoent reply")})),(0,h.z)((([e,t])=>{var o,n;return t?this.service.getCommentReply({comment_id:e.cid,item_id:e.itemId,cursor:null!==(n=null===(o=t.replyCache)||void 0===o?void 0:o.cursor)&&void 0!==n?n:"0"}).pipe((0,y.b)((e=>{(0,k.k)(e.status_code,[0])})),(0,h.z)((o=>{var n;if(0===o.status_code){const{users:i,comments:a,commentItems:r}=this.processCommentList(o.comments),s=null!==(n=null==t?void 0:t.reply_comment)&&void 0!==n?n:[],d=c()(s.concat(a),"cid");return(0,m.of)(this.user.getActions().multiSetUser(i),this.commentItem.getActions().multiSetCommentItem(r),this.getActions().setReplyComment(Object.assign({comments:[...d]},e)),this.getActions().setReplyCommentCache(Object.assign({comments:[...d],hasMore:Boolean(o.has_more),cursor:o.cursor},e)))}return(0,m.of)(this.noop())})),(0,b.O)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!0}))),(0,f.l)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!1}))),(0,I.n)({})):p.E})))}handleCollapseReply(e){return e.pipe((0,_.M)(this.state$),(0,y.b)((([e,t])=>{this.getCommentItem(t,e.cid,e.itemId)||console.warn("item is null")})),(0,g.U)((([e,t])=>this.getCommentItem(t,e.cid,e.itemId)?this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:[]})):this.noop())))}handleShowMoreReply(e){return e.pipe((0,_.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,y.b)((([{cid:e,itemId:t}])=>{w.y.handleShowMoreReply({parent_comment_id:e,group_id:t})})),(0,y.b)((([e,t])=>{t||console.warn("item is null")})),(0,g.U)((([e,t])=>{if(!t)return this.noop();if(!t.reply_comment||!t.replyCache)return this.getActions().fetchCommentReply(e);const o=t.reply_comment.length,n=t.replyCache.comments.length;if(o<n){const i=o+3>n?n:o+3;return this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:t.replyCache.comments.slice(0,i)}))}return this.getActions().fetchCommentReply(e)})))}handleCommentLike(e){return e.pipe((0,_.M)(this.commentItem.state$,this.user.state$),(0,g.U)((([e,t,o])=>{var n;const i=t[e.cid];return{query:e,commentItem:i,user:o.users[null!==(n=null==i?void 0:i.user)&&void 0!==n?n:""]}})),(0,y.b)((({commentItem:e})=>{e||console.warn("No comment item here in hendle comment like")})),(0,v.z)((({query:e,commentItem:t,user:o})=>{if(!t)return p.E;const n=t.user_digged?2:1;return this.service.postCommentLike({aweme_id:e.itemId,cid:e.cid,digg_type:n}).pipe((0,y.b)((t=>{var i;0===(null==t?void 0:t.status_code)?w.y.handleCommentLike({isLike:1===n,comment_id:e.cid,group_id:e.itemId,comment_user_id:null!==(i=null==o?void 0:o.id)&&void 0!==i?i:"",author_id:e.teaAuthorId}):3002043===(null==t?void 0:t.status_code)?(x.h.destroy(),x.h.open({content:this.t(2===n?"comment_turnoff_unlike":"comment_turnoff_like"),duration:3,getContainer:j.Z})):(null==t?void 0:t.status_code)?(x.h.destroy(),x.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half",getContainer:j.Z})):(x.h.destroy(),x.h.open({content:this.t("comment_nointernet_toast"),duration:3,widthType:"half",getContainer:j.Z}))})),(0,h.z)((o=>{if(0===o.status_code){let o,i;return 1===n?(o=1,i=t.digg_count+1):(o=0,i=Math.max(t.digg_count-1,0)),(0,m.of)(this.commentItem.getActions().setItemDiggState({cid:e.cid,digged:o}),this.commentItem.getActions().setItemDiggCount({cid:e.cid,count:i}))}return 3002043===o.status_code?(0,m.of)(this.item.getActions().updateItem({id:e.itemId,itemCommentStatus:3})):p.E})),(0,I.n)({}))})))}handleCommentDelete(e){return e.pipe((0,h.z)((e=>{const{itemId:t,cid:o,parentCid:n,subIndex:i}=e;return this.service.postCommentDelete({cid:o}).pipe((0,y.b)((({status_code:e})=>{0===e?x.h.open({content:this.t("comment_delete_success"),duration:3,widthType:"half",getContainer:j.Z}):x.h.open({content:this.t("comment_delete_failed"),duration:3,widthType:"half",getContainer:j.Z})})),(0,h.z)((a=>{if(0===a.status_code){const a=[this.getActions().deleteCommentFromList(e),this.commentItem.getActions().removeItem(o),this.item.getActions().reduceOrIncreaseCommentCount({id:t,isReduce:!0})];return void 0!==i&&n&&a.push(this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:n,isReduce:!0})),(0,m.of)(...a)}return(0,m.of)(this.noop())})),(0,I.n)({}))})))}switchVideo(e){return e.pipe((0,h.z)((({currId:e,insertCid:t})=>(0,m.of)(this.getActions().dispose$(),this.getActions().fetchComment({insert_ids:t,aweme_id:e})))))}mapCommentItemFromQuery([e,t]){return[e,this.getCommentItem(t,e.cid,e.itemId)]}getCommentItem(e,t,o){return e[o].comments.find((({cid:e})=>e===t))}processCommentList(e=[],t={}){return e.reduce(((e,o)=>{const{user:n,reply_comment:i}=o;return e.users.push((0,O.yk)(n)),(null!=i?i:[]).forEach((({user:t})=>{e.users.push((0,O.yk)(t))})),e.comments.push(this.processComment(o,t)),this.commentItem.getProcessedCommentItem(o,t).forEach((t=>{e.commentItems.push(t)})),e}),{users:[],comments:[],commentItems:[]})}processComment(e,t={}){var o;return{cid:e.cid,reply_comment:null===(o=e.reply_comment)||void 0===o?void 0:o.map((e=>this.processComment(e,t))),replyCache:null}}};(0,i.__decorate)([(0,r.cQ)(),(0,i.__metadata)("design:type",u.y)],D.prototype,"dispose$",void 0),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"setCommentItem",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"setReplyLoading",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"setReplyComment",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"setReplyCommentCache",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"deleteCommentFromList",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"addCommentToFirst",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"addReplyToFirst",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"handlePostSuccess",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"handleReplySuccess",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"fetchComment",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"fetchCommentReply",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"handleCollapseReply",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"handleShowMoreReply",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"handleCommentLike",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"handleCommentDelete",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],D.prototype,"switchVideo",null),D=(0,i.__decorate)([(0,s.Y)("CommentV2"),(0,i.__param)(4,(0,d.t)(S.s$)),(0,i.__metadata)("design:paramtypes",[L.O,T.r,A.A,R.z,Function,P.G])],D)},9653:(e,t,o)=>{o.d(t,{x:()=>F});var n,i=o(64047),a=o(73566),r=o(48185),s=o(19630),d=o(35167),l=o(80390),c=o.n(l),m=o(82346),p=o(11348),u=o(60595),h=o(53095),_=o(20948),g=o(56979),y=o(93859),v=o(49584),b=o(10026),f=o(5549),C=o(12167),w=o(15754),x=o(55481),k=o(90211),I=o(44848),S=o(53468),j=o(97265),O=o(82484),P=o(18814),R=o(53448),A=o(242),T=o(95570),L=o(43231);!function(e){e[e.Like=1]="Like",e[e.Unlike=2]="Unlike"}(n||(n={}));let F=class extends a.D{constructor(e,t,o,n,i,a){super(),this.service=e,this.commentItem=t,this.item=o,this.user=n,this.t=i,this.home=a,this.defaultState={awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0}}setCommentItem(e,t){return t?e=Object.assign(Object.assign({},e),t):e}setReplyLoading(e,t){var o,n,i;const a=e.comments.find((({cid:e})=>e===t.cid));if(!a)return e;a.replyCache?a.replyCache.loading=t.loading:a.replyCache={comments:null!==(o=a.reply_comment)&&void 0!==o?o:[],cursor:null!==(i=null===(n=a.reply_comment)||void 0===n?void 0:n.length)&&void 0!==i?i:"0",hasMore:!0,loading:t.loading}}setReplyComment(e,t){const o=this.getCommentItem(e,t.cid);if(!o)return e;o.reply_comment=t.comments}setReplyCommentCache(e,t){const o=this.getCommentItem(e,t.cid);if(!o)return e;o.replyCache?(o.replyCache.comments=t.comments,o.replyCache.hasMore=t.hasMore,o.replyCache.cursor=t.cursor):o.replyCache={comments:t.comments,cursor:t.cursor,hasMore:t.hasMore,loading:!1}}deleteCommentFromList(e,t){var o,n;const{index:i,subIndex:a}=t;void 0===a?e.comments.splice(i,1):(null===(o=e.comments[i].reply_comment)||void 0===o||o.splice(a,1),null===(n=e.comments[i].replyCache)||void 0===n||n.comments.splice(a,1))}addCommentToFirst(e,t){e.comments.unshift({cid:t.cid,reply_comment:[],replyCache:null})}addReplyToFirst(e,{comment:t,position:o}){var n,i;const a=e.comments[o];a&&(a.reply_comment=null!==(n=a.reply_comment)&&void 0!==n?n:[],a.reply_comment.unshift({cid:t.cid,reply_comment:null,replyCache:null}),null===(i=a.replyCache)||void 0===i||i.comments.unshift({cid:t.cid,reply_comment:null,replyCache:null}))}handlePostSuccess(e){return e.pipe((0,h.z)((e=>{const{users:t,commentItems:o}=this.processCommentList([e]);return(0,m.of)(this.getActions().addCommentToFirst(e),this.user.getActions().multiSetUser(t),this.commentItem.getActions().multiSetCommentItem(o),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}handleReplySuccess(e){return e.pipe((0,h.z)((({comment:e,position:t})=>{const{users:o,commentItems:n}=this.processCommentList([e],{ignoreReply:!0});return(0,m.of)(this.getActions().addReplyToFirst({comment:e,position:t}),this.user.getActions().multiSetUser(o),this.commentItem.getActions().multiSetCommentItem(n),this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:e.reply_id}),this.item.getActions().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1}))})))}fetchComment(e){return e.pipe((0,h.z)((e=>this.fetchComment$(e))))}fetchComment$(e){return(0,m.of)(e).pipe((0,_.M)(this.state$,this.home.state$),(0,g.U)((([e,t])=>({query:e,item:t}))),(0,y.b)((({item:e})=>{})),(0,v.z)((({query:{aweme_id:e,insert_ids:t},item:o})=>{var n;if(!(null==o?void 0:o.hasMore))return p.E;const i=null!==(n=null==o?void 0:o.cursor)&&void 0!==n?n:"0";return this.service.getCommentList({insert_ids:"0"===i?t:void 0,aweme_id:e,cursor:i}).pipe((0,y.b)((e=>{(0,k.k)(e.status_code,[0])})),(0,h.z)((t=>{var n,i,a;if(0===t.status_code&&(null===(n=t.comments)||void 0===n?void 0:n.length)){const{users:n,comments:a,commentItems:r}=this.processCommentList(t.comments),s=null!==(i=null==o?void 0:o.comments)&&void 0!==i?i:[],d=c()(s.concat(a),"cid"),l=[this.user.getActions().multiSetUser(n),this.commentItem.getActions().multiSetCommentItem(r),this.getActions().setCommentItem({comments:d,hasMore:Boolean(t.has_more),cursor:t.cursor,loading:!1})];return t.total&&l.push(this.item.getActions().setCommentCount({id:e,commentCount:Number(t.total)})),(0,m.of)(...l)}return 0!==t.status_code||(null===(a=t.comments)||void 0===a?void 0:a.length)||t.has_more?(0,m.of)(this.noop()):(0,m.of)(this.getActions().setCommentItem({hasMore:Boolean(t.has_more),loading:!1}))})),(0,b.O)(this.getActions().setCommentItem({awemeId:e,loading:!0})),(0,f.l)(this.getActions().setCommentItem({loading:!1})),(0,I.n)({shouldShowMsg:!1}),(0,C.R)(this.dispose$))})))}fetchCommentReply(e){return e.pipe((0,_.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,y.b)((([e,t])=>{t||console.warn("No item here in fetch commoent reply")})),(0,h.z)((([e,t])=>{var o,n;return t?this.service.getCommentReply({comment_id:e.cid,item_id:e.itemId,cursor:null!==(n=null===(o=t.replyCache)||void 0===o?void 0:o.cursor)&&void 0!==n?n:"0"}).pipe((0,y.b)((e=>{(0,k.k)(e.status_code,[0])})),(0,h.z)((o=>{var n;if(0===o.status_code){const{users:i,comments:a,commentItems:r}=this.processCommentList(o.comments),s=null!==(n=null==t?void 0:t.reply_comment)&&void 0!==n?n:[],d=c()(s.concat(a),"cid");return(0,m.of)(this.user.getActions().multiSetUser(i),this.commentItem.getActions().multiSetCommentItem(r),this.getActions().setReplyComment(Object.assign({comments:[...d]},e)),this.getActions().setReplyCommentCache(Object.assign({comments:[...d],hasMore:Boolean(o.has_more),cursor:o.cursor},e)))}return(0,m.of)(this.noop())})),(0,b.O)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!0}))),(0,f.l)(this.getActions().setReplyLoading(Object.assign(Object.assign({},e),{loading:!1}))),(0,I.n)({})):p.E})))}handleCollapseReply(e){return e.pipe((0,_.M)(this.state$),(0,y.b)((([e,t])=>{this.getCommentItem(t,e.cid)||console.warn("item is null")})),(0,g.U)((([e,t])=>this.getCommentItem(t,e.cid)?this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:[]})):this.noop())))}handleShowMoreReply(e){return e.pipe((0,_.M)(this.state$),(0,g.U)(this.mapCommentItemFromQuery.bind(this)),(0,y.b)((([{cid:e,itemId:t}])=>{w.y.handleShowMoreReply({parent_comment_id:e,group_id:t})})),(0,y.b)((([e,t])=>{t||console.warn("item is null")})),(0,g.U)((([e,t])=>{if(!t)return this.noop();if(!t.reply_comment||!t.replyCache)return this.getActions().fetchCommentReply(e);const o=t.reply_comment.length,n=t.replyCache.comments.length;if(o<n){const i=o+3>n?n:o+3;return this.getActions().setReplyComment(Object.assign(Object.assign({},e),{comments:t.replyCache.comments.slice(0,i)}))}return this.getActions().fetchCommentReply(e)})))}handleCommentLike(e){return e.pipe((0,_.M)(this.commentItem.state$,this.user.state$),(0,g.U)((([e,t,o])=>{var n;const i=t[e.cid];return{query:e,commentItem:i,user:o.users[null!==(n=null==i?void 0:i.user)&&void 0!==n?n:""]}})),(0,y.b)((({commentItem:e})=>{e||console.warn("No comment item here in hendle comment like")})),(0,v.z)((({query:e,commentItem:t,user:o})=>{if(!t)return p.E;const n=t.user_digged?2:1;return this.service.postCommentLike({aweme_id:e.itemId,cid:e.cid,digg_type:n}).pipe((0,y.b)((t=>{var i;0===(null==t?void 0:t.status_code)?w.y.handleCommentLike({isLike:1===n,comment_id:e.cid,group_id:e.itemId,comment_user_id:null!==(i=null==o?void 0:o.id)&&void 0!==i?i:"",author_id:e.teaAuthorId}):3002043===(null==t?void 0:t.status_code)?(x.h.destroy(),x.h.open({content:this.t(2===n?"comment_turnoff_unlike":"comment_turnoff_like"),duration:3,getContainer:j.Z})):(null==t?void 0:t.status_code)?(x.h.destroy(),x.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half",getContainer:j.Z})):(x.h.destroy(),x.h.open({content:this.t("comment_nointernet_toast"),duration:3,widthType:"half",getContainer:j.Z}))})),(0,h.z)((o=>{if(0===o.status_code){let o,i;return 1===n?(o=1,i=t.digg_count+1):(o=0,i=Math.max(t.digg_count-1,0)),(0,m.of)(this.commentItem.getActions().setItemDiggState({cid:e.cid,digged:o}),this.commentItem.getActions().setItemDiggCount({cid:e.cid,count:i}))}return 3002043===o.status_code?(0,m.of)(this.item.getActions().updateItem({id:e.itemId,itemCommentStatus:3})):p.E})),(0,I.n)({}))})))}handleCommentDelete(e){return e.pipe((0,h.z)((e=>{const{itemId:t,cid:o,parentCid:n,subIndex:i}=e;return this.service.postCommentDelete({cid:o}).pipe((0,y.b)((({status_code:e})=>{0===e?x.h.open({content:this.t("comment_delete_success"),duration:3,widthType:"half",getContainer:j.Z}):x.h.open({content:this.t("comment_delete_failed"),duration:3,widthType:"half",getContainer:j.Z})})),(0,h.z)((a=>{if(0===a.status_code){const a=[this.getActions().deleteCommentFromList(e),this.commentItem.getActions().removeItem(o),this.item.getActions().reduceOrIncreaseCommentCount({id:t,isReduce:!0})];return void 0!==i&&n&&a.push(this.commentItem.getActions().reduceOrIncreaseCommentCount({cid:n,isReduce:!0})),(0,m.of)(...a)}return(0,m.of)(this.noop())})),(0,I.n)({}))})))}switchVideo(e){return e.pipe((0,h.z)((({currId:e,insertCid:t})=>(0,m.of)(this.getActions().dispose$(),this.getActions().setCommentItem({awemeId:e,cursor:"0",hasMore:!0,loading:!1,comments:[]}),this.getActions().fetchComment({insert_ids:t,aweme_id:e})))))}mapCommentItemFromQuery([e,t]){return[e,this.getCommentItem(t,e.cid)]}getCommentItem(e,t){return e.comments.find((({cid:e})=>e===t))}processCommentList(e=[],t={}){return e.reduce(((e,o)=>{const{user:n,reply_comment:i}=o;return e.users.push((0,O.yk)(n)),(null!=i?i:[]).forEach((({user:t})=>{e.users.push((0,O.yk)(t))})),e.comments.push(this.processComment(o,t)),this.commentItem.getProcessedCommentItem(o,t).forEach((t=>{e.commentItems.push(t)})),e}),{users:[],comments:[],commentItems:[]})}processComment(e,t={}){var o;return{cid:e.cid,reply_comment:null===(o=e.reply_comment)||void 0===o?void 0:o.map((e=>this.processComment(e,t))),replyCache:null}}};(0,i.__decorate)([(0,r.cQ)(),(0,i.__metadata)("design:type",u.y)],F.prototype,"dispose$",void 0),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"setCommentItem",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"setReplyLoading",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"setReplyComment",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"setReplyCommentCache",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"deleteCommentFromList",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"addCommentToFirst",null),(0,i.__decorate)([(0,r.lF)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Object,Object]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"addReplyToFirst",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"handlePostSuccess",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"handleReplySuccess",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"fetchComment",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"fetchCommentReply",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"handleCollapseReply",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"handleShowMoreReply",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"handleCommentLike",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"handleCommentDelete",null),(0,i.__decorate)([(0,r.Qm)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[u.y]),(0,i.__metadata)("design:returntype",void 0)],F.prototype,"switchVideo",null),F=(0,i.__decorate)([(0,s.Y)("Comment"),(0,i.__param)(4,(0,d.t)(S.s$)),(0,i.__metadata)("design:paramtypes",[L.O,T.r,A.A,R.z,Function,P.G])],F)},43231:(e,t,o)=>{o.d(t,{O:()=>s});var n=o(64047),i=o(57244),a=o(59674),r=o(71332);let s=class{constructor(e){this.fetch=e}getCommentList(e){return this.fetch.get("/api/comment/list/",{query:Object.assign(Object.assign({},e),{count:20,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1}),baseUrlType:2})}getCommentReply(e){return this.fetch.get("/api/comment/list/reply/",{query:Object.assign(Object.assign({},e),{count:3,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1}),baseUrlType:2})}postCommentLike(e){return this.fetch.post("/api/comment/digg/",{query:Object.assign(Object.assign({},e),{aid:1988,channel_id:0}),headers:{[a.eD]:this.fetch.csrfToken},baseUrlType:2})}postCommentDelete(e){return this.fetch.post("/api/comment/delete/",{query:e,baseUrlType:2,headers:{[a.eD]:this.fetch.csrfToken}})}};s=(0,n.__decorate)([(0,i.G)(),(0,n.__metadata)("design:paramtypes",[r.r])],s)},4269:(e,t,o)=>{o.d(t,{_:()=>m,J:()=>p});var n=o(64047),i=o(9236),a=o(25615),r=o.n(a),s=o(91051),d=o(7330),l=o(21622),c=o(39392);const m=(0,s.createContext)({isBrowserModeShowing:!1,showBrowserMode:r(),closeBrowserMode:r()});function p(){const[e,t]=(0,s.useState)(!1),[o,a]=(0,s.useState)({}),{showBrowserMode:r,closeBrowserMode:m}=(0,i.qj)(c.O),{itemListKey:p,currentIndex:u,enterWindowTimeSec:h}=(0,i.mp)(c.O),_=(0,s.useRef)(0),g=(0,s.useRef)(0),y=(0,s.useRef)(0),v=(0,s.useRef)(0),b=(0,s.useRef)(0),f=(0,s.useRef)(null),C=(0,s.useRef)(null),{authorId:w,groupId:x}=(0,l.wx)({itemListKey:p,currentIndex:u}),k=(0,s.useMemo)((()=>({author_id:w,group_id:x})),[w,x]),I=(0,s.useCallback)((()=>{const e=Math.floor((Number(new Date)-g.current)/1e3),t=Object.assign(Object.assign(Object.assign({},d.r.getScreenRatio()),{duration:e}),k);d.r.handleExitBrowser(t)}),[k]),S=()=>{null!==C.current&&window.removeEventListener("resize",C.current)};(0,s.useEffect)((()=>{let t;const o=()=>{if(!e)return;const{height_max:t,width_max:o,width:n,height:i,height_ratio:a,width_ratio:r}=d.r.getScreenRatio(),s=Number(new Date),l=Object.assign({height_ratio_after:a,width_ratio_after:r,height_ratio:v.current/t,width_ratio:b.current/o,height_after:i,width_after:n,height:v.current,width:b.current,height_max:t,width_max:o,duration:(s-y.current)/1e3},k);y.current=s,v.current=i,b.current=n,d.r.handleAdjustBrowserSize(l)};if(S(),e){const e=()=>{clearTimeout(t),t=setTimeout(o,500)};window.addEventListener("resize",e),C.current=e}if(0===_.current){const e=Number(new Date);_.current=e,g.current=e,y.current=e}return()=>{S()}}),[e,k]);const j=(0,s.useMemo)((()=>({capture:!0})),[]),O=(0,s.useCallback)((()=>{null!==f.current&&window.removeEventListener("beforeunload",f.current,j)}),[j]);(0,s.useEffect)((()=>{const t=()=>{const t=Math.floor((Number(new Date)-h)/1e3),o=Object.assign(Object.assign(Object.assign({},d.r.getScreenRatio()),{duration:t}),e?k:{});d.r.handleCloseWindow(o),e&&I()};return O(),f.current=t,window.addEventListener("beforeunload",t,j),()=>{O()}}),[O,h,e,j,I,k]);const P=(0,s.useCallback)((e=>{const{teaParams:o,reportTeaParams:i}=e,s=(0,n.__rest)(e,["teaParams","reportTeaParams"]);r(s),t(!0),a(null!=o?o:{});const l=d.r.getScreenRatio(),c=Object.assign(Object.assign(Object.assign({},null!=i?i:o),l),k),{width:m,height:p}=l;v.current=p,b.current=m;const u=Number(new Date);g.current=u,y.current=u,d.r.handleEnterBrowserOpt(c)}),[r,k]);return{showBrowserMode:P,closeBrowserMode:(0,s.useCallback)((e=>{t(!1),m(e),I()}),[m,I]),isBrowserModeShowing:e,teaParams:o}}},21622:(e,t,o)=>{o.d(t,{xf:()=>F,q5:()=>M,Ui:()=>E,_0:()=>$,om:()=>B,zX:()=>U,AS:()=>V,pe:()=>z,wx:()=>Z});var n,i=o(11040),a=o(9236),r=o(40316),s=o.n(r),d=o(53586),l=o.n(d),c=o(34950),m=o(91051),p=o(21041),u=o(41864),h=o(18677),_=o(7330),g=o(15754),y=o(59002),v=o(91034),b=o(99230),f=o(22295),C=o(69437),w=o(82484),x=o(60931),k=o(6858),I=o(27147),S=o(8444),j=o(242),O=o(35499),P=o(98793),R=o(7278),A=o(9653),T=o(39392),L=o(87321);function F({itemListKey:e,item:t,author:o,needUrlDelegate:n,onCloseBrowserMode:i,isTT4BAds:a=!1}){const{search:r}=(0,p.TH)(),d=(0,p.k6)(),l=(0,m.useRef)(!1);(0,m.useEffect)((()=>{const e=()=>{i({fromPopState:!0})};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),(0,m.useEffect)((()=>{if(!t||!e||!n)return;const{scheduleTime:i,id:d,author:m=""}=t,p=s()((0,c.parse)(r),"sender_device","sender_web_id","item_id");let u=i?(0,v.yl)({uniqueId:m,secUid:null==o?void 0:o.secUid}):(0,c.stringifyUrl)({url:(0,v.fH)({uniqueId:m,videoId:d,secUid:null==o?void 0:o.secUid}),query:p},{skipNull:!0});a&&(u=(0,c.stringifyUrl)({url:"/foryou",query:p},{skipNull:!0})),l.current?window.history.replaceState(window.history.state,"video-detail",u):(window.history.pushState(window.history.state,"video-detail",u),l.current=!0)}),[null==o?void 0:o.secUid,d,t,e,n,r,a])}!function(e){e[e.Null=0]="Null",e[e.Close=1]="Close",e[e.Prev=2]="Prev",e[e.Next=3]="Next",e[e.Redirect=4]="Redirect"}(n||(n={}));const D=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()};function M({onCloseBrowserMode:e,onNextVideo:t,onPrevVideo:o,pause:n,setPause:i,embedVisibleRef:r,group_id:s,handleLikeClick:d,author_id:l,itemListKey:c,onJumpSamePage:u,shouldPause:y,photoVideoRef:v,isPhotoMode:C,photoTeaParams:w,setIsShowPhoto:x}){const[I,S]=(0,m.useState)(!1),[j,P]=(0,m.useState)(0),[{isInputEmpty:R,noReplyUser:A},{setNeedClearInput:T}]=(0,a.b7)(O.p,{selector:({isInputEmpty:e,reply:t})=>({isInputEmpty:e,noReplyUser:0===t.nickname.length}),dependencies:[]}),{mute:L,setMute:F}=(0,f.s_)(2),M=(0,m.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),F(!L,"keydown",w)}),[L,F,w]),E=(0,a.mp)(b.bg,{selector:({showing:e})=>e,dependencies:[]}),$=(0,a.mp)(k.r,{selector:e=>e.isOpen,dependencies:[]}),B=(0,m.useRef)(null),U=(0,m.useCallback)((e=>{var t,o,a,r,s,d,l,c,m,p,u,h,_,g,y,b;C?n?(null===(a=null===(o=null===(t=v.current)||void 0===t?void 0:t.swiper)||void 0===o?void 0:o.play)||void 0===a||a.call(o),null===(d=null===(s=null===(r=v.current)||void 0===r?void 0:r.audio)||void 0===s?void 0:s.play)||void 0===d||d.call(s)):(null===(m=null===(c=null===(l=v.current)||void 0===l?void 0:l.swiper)||void 0===c?void 0:c.pause)||void 0===m||m.call(c,e),null===(h=null===(u=null===(p=v.current)||void 0===p?void 0:p.audio)||void 0===u?void 0:u.pause)||void 0===h||h.call(u)):n?null===(g=null===(_=B.current)||void 0===_?void 0:_.play)||void 0===g||g.call(_):null===(b=null===(y=B.current)||void 0===y?void 0:y.pause)||void 0===b||b.call(y),i(!n)}),[n,i,C,v]),{pathname:V}=(0,p.TH)(),z=(0,p.k6)(),Z=(0,m.useCallback)((t=>{var o;D(t),R&&A?e({playProgress:null===(o=B.current)||void 0===o?void 0:o.currentTime,shouldPause:y}):(P(1),S(!0))}),[R,A,y,e]),W=(0,m.useRef)(""),N=(0,m.useCallback)(((e,t)=>{if(t.includes(V)&&V!==h.Ad.home)return Z(e),void u();R&&A||(D(e),P(4),S(!0),W.current=t)}),[Z,R,A,V,u]),q=(0,m.useCallback)((()=>{C&&(x(!1),setTimeout((()=>{x(!0)}),0))}),[C,x]),Q=(0,m.useCallback)(((e,o="click")=>{if(e&&D(e),R&&A){t(),i(!1);const e=Object.assign({enter_method:o,play_mode:"browser_mode",group_id:s,author_id:l,skipped_group_num:0,skipped_group_ids:""},w);_.r.handleVideoChange(e,"next"),"foryou"===c&&_.r.handleHotVideoChange(e,"next"),q()}else P(3),S(!0)}),[R,A,t,i,s,l,w,c,q]),K=(0,m.useCallback)(((e,t="click")=>{if(e&&D(e),R&&A){o(),i(!1);const e=Object.assign({enter_method:t,play_mode:"browser_mode",group_id:s,author_id:l,skipped_group_num:0,skipped_group_ids:""},w);_.r.handleVideoChange(e,"prev"),"foryou"===c&&_.r.handleHotVideoChange(e,"prev"),q()}else P(2),S(!0)}),[R,A,o,i,s,l,w,c,q]),H=(0,m.useCallback)((e=>{if(27!==e.keyCode&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||$)return;const t=new Map([[27,()=>{E||r.current||Z(e)}],[40,()=>{Q(e,"keydown")}],[32,()=>{U("keyboard")}],[38,()=>{K(e,"keydown")}],[76,()=>{d("keydown")}],[77,()=>{M(e)}]]),{keyCode:o}=e;t.has(o)&&(e.preventDefault(),t.get(o)())}),[r,Z,d,Q,K,M,$,E,U]),G=(0,m.useCallback)((()=>{var n;switch(j){case 1:e({playProgress:null===(n=B.current)||void 0===n?void 0:n.currentTime,shouldPause:y});break;case 2:o(),i(!1);break;case 3:t(),i(!1);break;case 4:W.current&&z.push(W.current)}S(!1),T(!0),g.y.handleLeaveComment({group_id:s})}),[j,s,z,y,e,t,o,T,i]),Y=(0,m.useCallback)((()=>{P(0),S(!1),g.y.handleKeepComment({group_id:s})}),[s]);return(0,m.useEffect)((()=>(document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)})),[H]),{handleLinkClick:N,handleClose:Z,handleNext:Q,handlePrev:K,preventDefault:D,togglePlay:U,videoPlayerRef:B,showLeaveModal:I,isInputEmpty:R,handleConfirmLeave:G,handleCancelLeave:Y}}function E({id:e,needDispose:t=!0}){const o=(0,a.qj)(A.x),n=(0,a.qj)(R.r),{isCommentV1:i}=(0,P.c)(),r=(0,m.useRef)(null),s=(0,m.useCallback)((()=>{i?o.fetchComment({aweme_id:e}):n.fetchComment({aweme_id:e})}),[o,n,e,i]);return(0,m.useEffect)((()=>()=>{t&&(i?(o.dispose$(),o.setCommentItem({awemeId:""})):(n.dispose$(),n.setCommentItem({itemId:e,item:R.C})))}),[o,n,e,i,t]),(0,C.s)({elemRef:r,onHitBottom:s,bottomThreshold:200,throttle:200}),r}function $({showLeaveModal:e,group_id:t}){(0,m.useEffect)((()=>{e&&g.y.handleClose({group_id:t})}),[t,e]),(0,m.useEffect)((()=>()=>{g.y.handleClose({group_id:t})}),[t])}const B=({currentIndex:e,handlePrev:t,hasNext:o,handleNext:n,itemListKey:a,isUiOptimise:r=!1})=>{const s=(0,m.useCallback)(l()((e=>{a&&e.srcElement.classList.value.includes("BasicVideo")&&(e.deltaY>=1?n(e,"scroll"):e.deltaY<=-1&&t(e,"scroll"))}),100),[n,t]);(0,m.useEffect)((()=>(window.addEventListener("wheel",s),()=>{window.removeEventListener("wheel",s)})));const d={isUiOptimise:r};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.o1,Object.assign({disabled:0===e,isPrev:!0,onClick:t,"data-e2e":"arrow-left"},d,{children:(0,i.jsx)(u.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0),(0,i.jsx)(L.o1,Object.assign({disabled:!o,isPrev:!1,onClick:n,"data-e2e":"arrow-right"},d,{children:(0,i.jsx)(u.Z,{width:26,height:26,fill:"#fff"},void 0)}),void 0)]},void 0)},U=e=>{var t,o;let n=!0;const i=(0,I.pu)(null==e?void 0:e.author),{user:a={}}=null!==(t=(0,x.Lh)((()=>["user"]),[]))&&void 0!==t?t:{},[r,s]=(0,m.useState)(!1),d=(0,m.useCallback)((e=>{e.stopPropagation(),y.F.handleClickAnalyticsButton(),s(!0)}),[]),l=(0,m.useCallback)((()=>{s(!1)}),[]);a||(n=!1);const{secUid:c,analyticsOn:p}=null!=a?a:{};return c===(null!==(o=null==i?void 0:i.secUid)&&void 0!==o?o:"")&&p||(n=!1),{showAnalyticsButton:n,showAnalyticsModal:r,handleOpenAnalyticsModal:d,handleCloseAnalyticsModal:l}};function V(e,t){const{listLength:o,statusCode:n}=(0,a.mp)(S.h,{selector:t=>{var o,n,i;return{listLength:null!==(n=null===(o=t[e])||void 0===o?void 0:o.list.length)&&void 0!==n?n:0,statusCode:null===(i=t[e])||void 0===i?void 0:i.statusCode}},dependencies:[]}),i=(0,a.mp)(T.O,{selector:e=>e.currentIndex,dependencies:[]});(0,m.useEffect)((()=>{0===n&&(!o||o-i<=3)&&t()}),[i,t,o,n])}const z=({itemListKey:e,currentIndex:t})=>{const{isCommentV3:o}=(0,P.c)();return(0,a.mp)(S.h,{selector:n=>{var i,a;const r=n[null!=e?e:""];return r?{currentId:r.browserList[t],prefetchId1:null!==(i=r.browserList[t+1])&&void 0!==i?i:"",prefetchId2:o&&null!==(a=r.browserList[t+2])&&void 0!==a?a:"",listLength:r.browserList.length}:null},dependencies:[e,t,o]})},Z=({itemListKey:e,currentIndex:t})=>{var o;const{currentId:n=""}=(0,w.m7)(z({itemListKey:e,currentIndex:t})),[i]=(0,a.b7)(j.A,{selector:e=>e[n],dependencies:[n]}),r=null!==(o=null==i?void 0:i.id)&&void 0!==o?o:"";return{authorId:null==i?void 0:i.authorId,groupId:r}}},39392:(e,t,o)=>{o.d(t,{O:()=>R});var n=o(64047),i=o(73566),a=o(48185),r=o(19630),s=o(35167),d=o(82346),l=o(11348),c=o(68854),m=o(60595),p=o(20948),u=o(56979),h=o(53095),_=o(93859),g=o(49584),y=o(84616),v=o(93494),b=o(55481),f=o(5633),C=o(44848),w=o(90211),x=o(53468),k=o(89123),I=o(8444),S=o(242),j=o(34435);const O={foryou:0,topic:0,following:0,video:0,music:1,music_new:1,challenge:1,challenge_new:1,sticker:1,user:1,"user-post":1,"user-liked":1,search_top:1,search_video:1,question:1,playlist:1,live_event:1,video_playlist:0,create_video_playlist:0,messages:0,discover:1,poi:1,collection:1},P={3:"friends",2:"private",1:"public"};let R=class extends i.D{constructor(e,t,o,n,i,a){super(),this.service=e,this.itemList=t,this.item=o,this.videoPlayer=n,this.videoExperience=i,this.t=a,this.defaultState={currentIndex:0,itemListKey:null,jumpSamePageTime:0,belowPlayMode:0,enterWindowTimeSec:Number(new Date)}}setItemListKey(e,t){e.itemListKey=t}setCurrentIndex(e,t){e.currentIndex=t}setBelowPlayMode(e,t){e.belowPlayMode=t}setClickSamePage(e){e.jumpSamePageTime=Date.now()}showBrowserMode(e){return e.pipe((0,p.M)(this.state$,this.itemList.state$),(0,u.U)((([{index:e,playProgress:t,belowPlayMode:o,forceUseIndexLocation:n},{itemListKey:i},a])=>({listInfo:a[i],itemListKey:i,index:e,playProgress:t,belowPlayMode:o,forceUseIndexLocation:n}))),(0,h.z)((({listInfo:e,index:t=0,playProgress:o=0,belowPlayMode:n,forceUseIndexLocation:i})=>{if(!e)return(0,d.of)(this.noop());const{browserList:a,list:r}=e,s=r[t],l=i?t:Math.max(0,Math.min(a.length-1,a.findIndex((e=>s===e)))),c=this.updateVideoIndex({newIndex:l,newId:s,isIndexInvalid:!1,playProgress:o});return n&&c.push(this.getActions().setBelowPlayMode(n)),(0,d.of)(...c)})))}closeBrowserMode(e){return e.pipe((0,p.M)(this.state$,this.itemList.state$),(0,h.z)((([e,{itemListKey:t,currentIndex:o,belowPlayMode:n},i])=>{var a,r,s;const{playProgress:l=0,shouldPause:c=!1}=null!=e?e:{},m=i[null!=t?t:""],p=null!==(a=null==m?void 0:m.browserList)&&void 0!==a?a:[],u=null!==(r=null==m?void 0:m.list)&&void 0!==r?r:[],h=null!==(s=p[o])&&void 0!==s?s:"",_=u.findIndex((e=>h===e));return(0,d.of)(this.videoPlayer.getActions().updateVideo({currentVideo:{index:c?-1:_,id:c?"":h,mode:null!=n?n:O[null!=t?t:""]},playProgress:l}),this.getActions().setBelowPlayMode(null))})))}handleNextVideo(e){return e.pipe((0,_.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"browser_mode_next"})})),(0,p.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{itemListKey:t,currentIndex:o},n])=>{var i,a,r;const s=null!==(a=null===(i=n[null!=t?t:""])||void 0===i?void 0:i.browserList)&&void 0!==a?a:[],d=Math.min(o+1,s.length-1);return{newIndex:d,isIndexInvalid:!(null==s?void 0:s.length)||d<0,newId:null!==(r=s[d])&&void 0!==r?r:""}})),(0,_.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to next video for some reasons")})),(0,h.z)((e=>(0,d.of)(...this.updateVideoIndex(e)))),(0,C.n)({}))}handlePrevVideo(e){return e.pipe((0,_.b)((()=>{this.videoExperience.reportVideoInteractStart({startTime:Date.now(),situation:"browser_mode_prev"})})),(0,p.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{itemListKey:t,currentIndex:o},n])=>{var i,a,r;const s=null!==(a=null===(i=n[null!=t?t:""])||void 0===i?void 0:i.browserList)&&void 0!==a?a:[],d=Math.max(o-1,0);return{newIndex:d,isIndexInvalid:!(null==s?void 0:s.length)||d>s.length-1,newId:null!==(r=s[d])&&void 0!==r?r:""}})),(0,_.b)((({isIndexInvalid:e})=>{e&&console.warn("cannot switch to prev video for some reasons")})),(0,h.z)((e=>(0,d.of)(...this.updateVideoIndex(e)))),(0,C.n)({}))}postCloseAds(e){return e.pipe((0,g.z)((e=>this.service.postAdsAction({biz:1,type:6,language:e}).pipe((0,u.U)((({status_code:e})=>(0!==e&&console.warn("postCloseAds failed"),this.noop()))),(0,C.n)({callback:this.commonToastError})))))}postVideoDelete(e){return e.pipe((0,g.z)((e=>this.service.postVideoDelete(e).pipe((0,_.b)((({status_code:e,status_msg:t})=>{b.h.destroy(),2752===e?b.h.open({content:t,duration:3,widthType:"half"}):0===e?(b.h.open({content:this.t("deleted"),duration:3,widthType:"half"}),y.o.handleVideoDelete("delete")):b.h.open({content:this.t(k.kU),duration:3,widthType:"half"})})),(0,u.U)((({status_code:t})=>0===t?this.getActions().updateDeleteVideo(e.aweme_id):this.noop())),(0,C.n)({callback:this.commonToastError})))))}postModifyVisibility(e){return e.pipe((0,h.z)((e=>this.service.postModifyVisibility(e).pipe((0,_.b)((({status_code:t,status_msg:o})=>{2752===t?(b.h.destroy(),b.h.open({content:o,duration:3,widthType:"half"})):0!==t?(b.h.destroy(),b.h.open({content:this.t(k.kU),duration:3,widthType:"half"})):(y.o.handleSelectPrivacySettingVideo({to_status:P[e.type]}),(0,w.k)(t,[0]))})),(0,u.U)((t=>0===t.status_code?this.item.getActions().setItemPrivateState({id:e.aweme_id,visibility:e.type}):2054===t.status_code?this.getActions().updateDeleteVideo(e.aweme_id):this.noop())),(0,C.n)({callback:this.commonToastError})))))}postUserSetting(e){return e.pipe((0,g.z)((e=>this.service.postUserSetting(e).pipe((0,_.b)((({status_code:t})=>{this.tapPrivateSettingErrorToast({status_code:t,target:"comment",to_status:0===e.private_setting?"on":"off"})})),(0,u.U)((({status_code:t})=>{var o,n;return 0===t?this.item.getActions().updateItem({id:null!==(o=e.aweme_id)&&void 0!==o?o:"",itemCommentStatus:e.private_setting}):2054===t?this.getActions().updateDeleteVideo(null!==(n=e.aweme_id)&&void 0!==n?n:""):this.noop()})),(0,C.n)({callback:()=>{this.tapPrivateSettingErrorToast({status_code:-1,target:"comment",to_status:0===e.private_setting?"on":"off"})}})))))}postDuetOrStitchChange(e){return e.pipe((0,g.z)((({type:e,enable:t,aweme_id:o})=>this.service.postDuetStitchChange({aweme_id:o,[e]:t}).pipe((0,_.b)((({status_code:o})=>{this.tapPrivateSettingErrorToast({status_code:o,target:e,to_status:t?"on":"off"})})),(0,u.U)((({status_code:n})=>0===n?"item_duet"===e?this.item.getActions().updateItem({id:o,duetEnabled:0===t}):this.item.getActions().updateItem({id:o,stitchEnabled:0===t}):2054===n?this.getActions().updateDeleteVideo(o):this.noop())),(0,C.n)({callback:()=>{this.tapPrivateSettingErrorToast({status_code:-1,target:e,to_status:t?"on":"off"})}})))))}updateDeleteVideo(e){return e.pipe((0,p.M)(this.state$,this.itemList.state$),(0,u.U)((([e,{currentIndex:t,itemListKey:o},n])=>{var i,a,r;const s=null===(i=n[null!=o?o:""])||void 0===i?void 0:i.browserList,d=null!==(a=null==s?void 0:s.length)&&void 0!==a?a:0,l=!s||d-1<=0,c=d-1===t;return{id:e,isIndexInvalid:l,newIndex:c?t-1:t,newId:l?"":null!==(r=null==s?void 0:s[c?t-1:t+1])&&void 0!==r?r:""}})),(0,h.z)((({id:e,isIndexInvalid:t,newIndex:o,newId:n})=>e?(0,d.of)(this.itemList.getActions().setDeleteVideo(e),this.item.getActions().setDeleteVideo(e),...this.updateVideoIndex({newIndex:o,newId:n,isIndexInvalid:t})):l.E)))}clickSamePage(e){return e.pipe((0,h.z)((()=>(0,d.of)(this.getActions().setClickSamePage()))))}postScheduleDelete(e){return e.pipe((0,g.z)((e=>this.service.postScheduleDelete({aweme_id:e}).pipe((0,_.b)((()=>{b.h.destroy(),b.h.open({content:this.t("deleted"),duration:3,widthType:"half"})})),(0,h.z)((()=>(0,d.of)(this.getActions().updateDeleteVideo(e))))))),(0,c.K)((()=>(b.h.destroy(),b.h.open({content:this.t("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half"}),(0,d.of)(this.noop())))),(0,_.b)((()=>{y.o.handleScheduleDelete("delete")})))}updateVideoIndex({newIndex:e,isIndexInvalid:t,newId:o,playProgress:n}){return t?[this.noop()]:[this.videoPlayer.getActions().updateVideo({currentVideo:{index:e,id:o,mode:2},playProgress:null!=n?n:0}),this.getActions().setCurrentIndex(e)]}commonToastError(){b.h.destroy(),b.h.open({content:this.t(k.kU),duration:3,widthType:"half"})}tapPrivateSettingErrorToast({target:e,to_status:t,status_code:o}){0===o?y.o.handlePrivateSetting({target:e,to_status:t}):2054===o?(b.h.destroy(),b.h.open({content:this.t("video_unavailable_deleted"),duration:3,widthType:"half"})):(b.h.destroy(),b.h.open({content:this.t(k.kU),duration:3,widthType:"half"}))}};(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"setItemListKey",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Number]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"setCurrentIndex",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"setBelowPlayMode",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"setClickSamePage",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"showBrowserMode",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"closeBrowserMode",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"handleNextVideo",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"handlePrevVideo",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"postCloseAds",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"postVideoDelete",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"postModifyVisibility",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"postUserSetting",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"postDuetOrStitchChange",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"updateDeleteVideo",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"clickSamePage",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[m.y]),(0,n.__metadata)("design:returntype",void 0)],R.prototype,"postScheduleDelete",null),R=(0,n.__decorate)([(0,r.Y)("BrowserMode"),(0,n.__param)(5,(0,s.t)(x.s$)),(0,n.__metadata)("design:paramtypes",[j.o,I.h,S.A,f.f,v.KF,Function])],R)},87321:(e,t,o)=>{o.d(t,{wh:()=>L,b7:()=>v,sL:()=>P,lI:()=>b,E9:()=>p,qq:()=>u,uc:()=>h,vN:()=>y,Vz:()=>_,Eb:()=>g,Q9:()=>S,ik:()=>A,L7:()=>f,oT:()=>R,zo:()=>T,Sf:()=>x,ps:()=>k,o1:()=>I,Y1:()=>j,Sd:()=>C});var n,i,a=o(32913),r=o(36425),s=o(91051);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},d.apply(this,arguments)}const l=function(e){return s.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),n||(n=s.createElement("g",{fillRule:"evenodd",clipPath:"url(#logo-icon_svg__a)",clipRule:"evenodd"},s.createElement("path",{fill:"#000",d:"M0 36c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12V12c0-6.628-5.373-12-12-12H12C5.373 0 0 5.372 0 12v24z"}),s.createElement("path",{fill:"#25F4EE",d:"M30.636 6.288A9.23 9.23 0 0130.35 4h-6.97v26.133c0 3.014-2.056 5.457-5.062 5.457-3.006 0-5.443-2.443-5.443-5.456 0-3.014 2.437-5.457 5.443-5.457.6 0 .797.098 1.337.278v-7.051c-.562-.079-.754-.12-1.337-.12C11.515 17.785 6 23.315 6 30.135c0 6.82 5.515 12.349 12.318 12.349 6.708 0 12.357-5.375 12.51-12.062V17.049c2.528 1.733 5.395 2.746 8.689 2.746V13.19c-4.275 0-7.866-2.933-8.88-6.902z"}),s.createElement("path",{fill:"#fff",d:"M33.12 8.77a9.23 9.23 0 01-.287-2.288h-6.971v26.134c0 3.014-2.055 5.456-5.061 5.456s-5.443-2.442-5.443-5.456a5.45 5.45 0 015.443-5.456c.6 0 .797.097 1.337.277v-7.05c-.562-.08-.754-.12-1.337-.12-6.803 0-12.318 5.529-12.318 12.349S13.998 44.965 20.8 44.965c6.707 0 12.357-5.374 12.51-12.062V19.531c2.528 1.733 5.395 2.747 8.689 2.747v-6.606c-4.275 0-7.866-2.933-8.88-6.901z"}),s.createElement("path",{fill:"#FE2C55",d:"M15.92 35.033a5.446 5.446 0 01-.562-2.416c0-3.014 2.437-5.457 5.443-5.457.523 0 .739.074 1.143.212l.194.066v-7.051l-.21-.03c-.411-.059-.623-.09-1.127-.09-.386 0-.769.018-1.146.053v4.635l-.194-.066c-.404-.138-.62-.212-1.143-.212-3.006 0-5.443 2.443-5.443 5.457a5.46 5.46 0 003.045 4.9zm-4.972 4.997a12.29 12.29 0 009.853 4.935c6.707 0 12.357-5.374 12.51-12.061V19.532c2.528 1.733 5.395 2.746 8.689 2.746v-6.605a9.2 9.2 0 01-2.483-.341v4.463c-3.294 0-6.161-1.013-8.69-2.746v13.372c-.152 6.688-5.802 12.062-12.509 12.062-2.763 0-5.314-.912-7.37-2.453zm23.455-28.401a9.206 9.206 0 01-3.715-5.146h2.145a9.155 9.155 0 001.57 5.146z"}))),i||(i=s.createElement("defs",null,s.createElement("clipPath",{id:"logo-icon_svg__a"},s.createElement("rect",{width:48,height:48,fill:"#fff",rx:10.5})))))};var c=o(32492),m=o(31537);const p=(0,a.Z)("div",{target:"e11s2kul0"})((({theme:{colors:e}})=>({position:"fixed",left:0,top:0,right:0,bottom:0,background:e.BGPrimary,zIndex:1e3,display:"flex",flexDirection:"row"})),"label:DivBrowserModeContainer;"),u=(0,a.Z)("div",{target:"e11s2kul2"})((({theme:e})=>({height:"100%",left:"-80px",right:"-80px",top:"0",backdropFilter:"blur(50px)",backgroundColor:e.colors.SDSecondary,position:"absolute",zIndex:1})),"label:DivMask;"),h=(0,a.Z)("div",{target:"e11s2kul3"})({position:"absolute",top:"50%",transform:"translate(0, -50%)",width:"100%"},"label:DivMaskContainer;"),_=(0,a.Z)("div",{target:"e11s2kul4"})((({theme:e})=>({width:"106px",height:"106px",padding:"33px",margin:"0 auto 0",borderRadius:"50%",backgroundColor:e.colors.LineSecondary,color:e.colors.Positive})),"label:DivMaskIcon;"),g=(0,a.Z)("div",{target:"e11s2kul5"})((({theme:e})=>({maxWidth:"419px",margin:"24px auto 0",fontSize:"24px",lineHeight:"32px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskTitle;"),y=(0,a.Z)("div",{target:"e11s2kul6"})((({theme:e})=>({maxWidth:"419px",margin:"16px auto 0",fontSize:"18px",lineHeight:"24px",textAlign:"center",color:e.colors.BGPrimary})),"label:DivMaskDetail;"),v=(0,a.Z)("button",{target:"e11s2kul7"})((({theme:e})=>({maxWidth:"419px",height:"56px",cursor:"pointer",margin:"224px auto 0",borderRadius:"2px",backgroundColor:e.colors.ConstBGContainer,color:e.colors.BGPrimary,padding:"16px",fontSize:"18px",lineHeight:"24px",textAlign:"center",border:"none",display:"block"})),"label:ButtonMask;"),b=(0,a.Z)("div",{target:"e11s2kul8"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",left:"50%",top:"50%",transform:"scale(11)",opacity:"0.3",background:"center no-repeat",backgroundSize:"cover"},"label:DivBlurBackground;"),f=(0,a.Z)("div",{target:"e11s2kul9"})((({isUiOptimise:e})=>({position:e?"absolute":"relative",left:e?0:"",width:"100%",height:"100%",cursor:"pointer",":hover":{[`${c.ov}`]:{opacity:1}}})),"label:DivVideoWrapper;"),C=(0,a.Z)("svg",{target:"e11s2kul10"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:SvgPlayIcon;");C.defaultProps=Object.assign(Object.assign({},C.defaultProps),{"data-e2e":"browse-video-play"});const w=(0,a.Z)("button",{target:"e11s2kul11"})((({theme:{colors:e}})=>({position:"absolute",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",background:e.ConstLineInverse,borderRadius:"50%",cursor:"pointer",border:"none",outline:"none",fontsize:0})),(({theme:e,isUiOptimise:t})=>(0,r.ZD)({theme:e,isUiOptimise:t})),"label:ButtonBasicButtonContainer;"),x=(0,a.Z)(w,{target:"e11s2kul12"})((({theme:e,isUiOptimise:t})=>({top:"20px",transition:"opacity .3s",backgroundColor:t?"":e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.YJ)({direction:e,start:"20px"})),"label:StyledCloseIconContainer;");x.defaultProps=Object.assign(Object.assign({},x.defaultProps),{"data-e2e":"browse-close"});const k=(0,a.Z)(l,{target:"e11s2kul13"})({position:"absolute",zIndex:1,top:"20px",borderRadius:"100px"},(({theme:{direction:e}})=>(0,r.YJ)({direction:e,start:"84px"})),"label:StyledLogo;");k.defaultProps=Object.assign(Object.assign({},k.defaultProps),{"data-e2e":"browse-logo"});const I=(0,a.Z)(w,{target:"e11s2kul14"})((({isPrev:e,theme:{colors:t},isUiOptimise:o})=>({transform:e?"rotate(-90deg)":"rotate(90deg)",top:e?"calc(50% - 48px)":"calc(50% + 8px)",marginTop:"-24px",":disabled":{display:"none"},background:o?"":t.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.YJ)({direction:e,end:"20px"})),"label:StyledVideoSwitch;"),S=(0,a.Z)("div",{target:"e11s2kul21"})((({theme:e,isUiOptimise:t=!1})=>[(0,r.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse4",fontFamily:"Sofia"}),{padding:"10px 16px",backgroundColor:e.colors.ConstBGContainer,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"100px",position:"absolute",top:"20px",cursor:"pointer",color:e.colors.ConstTextInverse,":hover":{opacity:.7},":active":{opacity:.5}},(0,r.ZD)({theme:e,isUiOptimise:t}),(0,r.YJ)({direction:e.direction,end:"20px"})]),"label:DivReportText;");S.defaultProps=Object.assign(Object.assign({},S.defaultProps),{"data-e2e":"browse-report"});const j=(0,a.Z)("svg",{target:"e11s2kul22"})((({theme:{direction:e}})=>(0,r.YJ)({direction:e,marginEnd:"5px"})),{verticalAlign:"middle"},"label:SvgIconFlag;");j.defaultProps={fill:"currentColor",width:"1em",height:"1em"};const O=(0,a.Z)("button",{target:"e11s2kul23"})(r.Ph,(({theme:e,widerBottom:t=!1})=>({position:"absolute",bottom:t?"60px":"20px",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,r.YJ)({direction:e,end:"20px"})),"label:ButtonVoiceControl;");O.defaultProps=Object.assign(Object.assign({},O.defaultProps),{"data-e2e":"browse-sound"});const P=(0,a.Z)("button",{target:"e11s2kul24"})(r.Ph,(({theme:e})=>({display:"flex",transition:"opacity 0.3s",cursor:"pointer",fontsize:0,lineHeight:0,borderRadius:"100px",backgroundColor:e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:e,isUiOptimise:t})=>(0,r.ZD)({theme:e,isUiOptimise:t})),"label:ButtonVoiceControlNew;");P.defaultProps=Object.assign(Object.assign({},P.defaultProps),{"data-e2e":"browse-sound"});const R=(0,a.Z)("div",{target:"e11s2kul25"})((({widerBottom:e=!1})=>({position:"absolute",zIndex:1,bottom:e?"60px":"20px",[`:hover ${m.nW}`]:{opacity:"1"}})),(({theme:{direction:e}})=>(0,r.YJ)({direction:e,end:"20px"})),"label:DivVoiceControlContainer;"),A=(0,a.Z)("div",{target:"e11s2kul26"})((({theme:{colors:e},isUiOptimise:t=!1})=>({flex:t?"1 0 600px":"1 1 896px",maxWidth:t?"100%":"",background:e.ConstBGInverse,position:"relative",overflow:"hidden",padding:"0 80px"})),"label:DivVideoContainer;"),T=(0,a.Z)("div",{target:"e11s2kul27"})({position:"absolute",bottom:0,left:0,right:0},"label:DivWarnInfoPosition;"),L=(0,a.Z)("a",{target:"e11s2kul29"})((({theme:{colors:e}})=>({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",bottom:"84px",left:"50%",transform:"translateX(-50%)",fontWeight:500,fontSize:"18px",padding:"11.5px 24px",borderRadius:"52px",color:e.ConstTextInverse,background:e.ToastDefault,cursor:"pointer",textDecoration:"none",":hover":{opacity:.7,color:e.ConstTextInverse,textDecoration:"none"},":active":{opacity:.5,color:e.ConstTextInverse,textDecoration:"none"},":visited":{opacity:1,color:e.ConstTextInverse,textDecoration:"none"}})),"label:AAnalyticsWrapper;")},32492:(e,t,o)=>{o.d(t,{yx:()=>a,F7:()=>r,MT:()=>s,$_:()=>d,FL:()=>l,ov:()=>p,Gb:()=>u,Am:()=>h});var n=o(32913),i=o(36425);const a=(0,n.Z)("div",{target:"e1rpry1m0"})({width:"100%",height:"24px",flex:"1 1 auto",position:"relative"},"label:DivSeekBarContainer;"),r=(0,n.Z)("div",{target:"e1rpry1m1"})({flex:"0 0 88px",maxWidth:"88px",marginInlineStart:"8px",fontSize:"14px",lineHeight:"24px",color:"#ffffff",textAlign:"end",whiteSpace:"nowrap",fontFeatureSettings:'"tnum"',fontVariantNumeric:"tabular-nums",fontFamily:"Tahoma, PingFangSC, sans-serif"},"label:DivSeekBarTimeContainer;"),s=(0,n.Z)("div",{target:"e1rpry1m2"})((({theme:{colors:e}})=>({height:"4px",width:"100%",backgroundColor:e.ConstTextInverse5,position:"absolute",left:"0",top:"50%",transform:"translateY(-50%)",cursor:"pointer"})),"label:DivSeekBarProgress;"),d=(0,n.Z)("div",{target:"e1rpry1m3"})((({theme:{direction:e,colors:t}})=>({height:"4px",width:"100%",backgroundColor:t.ConstTextInverse,position:"absolute",top:"50%",transform:"translateY(-50%)",cursor:"pointer",transformOrigin:"rtl"===e?"right":"left"})),"label:DivSeekBar;"),l=(0,n.Z)("div",{target:"e1rpry1m4"})((({theme:{direction:e}})=>(0,i.YJ)({direction:e})),(({theme:{direction:e}})=>({display:"none",width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",top:"50%",transform:`translate(${"rtl"===e?"50%":"-50%"}, -50%)`,cursor:"pointer",zIndex:1})),"label:DivSeekBarCircle;"),c="calc(100% - 160px)",m="translateX(-50%)",p=(0,n.Z)("div",{target:"e1rpry1m5"})((({show:e,extraBottomSpace:t,isDisplayForAnyWidth:o})=>({width:c,height:"24px",paddingInline:"16px",position:"absolute",opacity:e?"1":"0",transition:"opacity .3s",bottom:t?"68px":"28px",cursor:"initial",display:"flex",alignItems:"center",left:"50%",transform:m,maxWidth:"56.25vh",[`:hover ${s}`]:{height:"6px"},[`:hover ${d}`]:{height:"6px"},[`:hover ${l}`]:{display:"block"},"@media (max-width: 900px)":{display:o?"":"none"}})),"label:DivVideoControlContainer;"),u=(0,n.Z)("div",{target:"e1rpry1m6"})({width:c,height:"28px",position:"absolute",bottom:0,left:"50%",transform:m,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlBottom;"),h=(0,n.Z)("div",{target:"e1rpry1m7"})({width:c,height:"10px",position:"absolute",bottom:"52px",left:"50%",transform:m,cursor:"initial",maxWidth:"56.25vh"},"label:DivVideoControlTop;")},31537:(e,t,o)=>{o.d(t,{nW:()=>a,CY:()=>r,SM:()=>s,tP:()=>d});var n=o(32913),i=o(36425);const a=(0,n.Z)("div",{target:"e1exqkaz0"})((({dragging:e})=>({width:"28px",height:"96px",margin:"8px 6px",display:"block",opacity:e?"1":"0",position:"relative",background:"rgba(255, 255, 255, 0.12)",borderRadius:"32px"})),(({theme:e})=>(0,i.ZD)({theme:e,isUiOptimise:!0})),"label:DivVolumeControlContainer;"),r=(0,n.Z)("div",{target:"e1exqkaz1"})((({theme:{colors:e}})=>({width:"4px",height:"80px",backgroundColor:e.ConstTextInverse5,position:"absolute",left:"12px",top:"8px",bottom:"8px",cursor:"pointer"})),"label:DivVolumeControlProgress;"),s=(0,n.Z)("div",{target:"e1exqkaz2"})((({theme:{colors:e}})=>({width:"4px",height:"80px",backgroundColor:e.ConstTextInverse,position:"absolute",left:"12px",bottom:"8px",cursor:"pointer",transform:"scaleY(0)",transformOrigin:"bottom"})),"label:DivVolumeControlBar;"),d=(0,n.Z)("div",{target:"e1exqkaz3"})({width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",left:"6px",bottom:"0",cursor:"pointer",zIndex:1},"label:DivVolumeControlCircle;")},19650:(e,t,o)=>{o.d(t,{fp:()=>x,Lb:()=>w,vq:()=>I,ny:()=>k,Od:()=>O,IG:()=>S});var n=o(25615),i=o.n(n),a=o(34950),r=o(70955),s=o(61698),d=o(46947),l=o(18541),c=o(72853),m=o(40135),p=o(11298),u=o(99625),h=o(92628),_=o(65804),g=o(44828),y=o(62447),v=o(63202),b=o(97265),f=o(11040);let C=0;const w={copy:"copy",whatsapp:"whatsapp",facebook:"facebook",twitter:"twitter",reddit:"reddit",pinterest:"pinterest",vk:"vk",sms:"sms",embed:"embed",telegram:"telegram",line:"line",linkedin:"linkedin",email:"email",message:"message"},x=Object.assign(Object.assign({},w),{viber:"viber",kakaotalk:"kakaotalk",messenger:"messenger"}),k={facebook:"{Share to} Facebook",pinterest:"{Share to} Pinterest",twitter:"{Share to} Twitter",copy:"{copy_link}",embed:"{embed}",whatsapp:"{Share to} WhatsApp",reddit:"{Share to} Reddit",vk:"{Share to} VK",sms:"{Share to} Sms",telegram:"{Share to} Telegram",line:"{Share to} Line",linkedin:"{Share to} LinkedIn",email:"{Share to} Email",message:"{support_webapp_sharing_option_button}"},I={facebook:r.Z,pinterest:s.Z,twitter:d.Z,copy:l.Z,embed:c.Z,whatsapp:m.Z,reddit:p.Z,vk:u.Z,telegram:h.Z,line:_.Z,linkedin:g.Z,email:y.Z,message:v.Z,sms:function({width:e="1em",height:t="1em",style:o={}}){return C++,(0,f.jsxs)("svg",Object.assign({width:e,height:t,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:o},{children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0002 47.001C36.7028 47.001 47.0002 36.7035 47.0002 24.001C47.0002 11.2984 36.7028 1.00098 24.0002 1.00098C11.2977 1.00098 1.00024 11.2984 1.00024 24.001C1.00024 36.7035 11.2977 47.001 24.0002 47.001Z",fill:`url(#sms_icon_paint0_linear_${C})`},void 0),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36.6501 23.569C36.6501 29.3645 30.9865 34.0628 24.0001 34.0628C23.1537 34.0628 22.3267 33.9938 21.5269 33.8623C20.826 33.7948 20.4086 33.8602 19.689 34.0827C19.4224 34.1652 19.1109 34.3318 18.7539 34.5226C17.9542 34.9503 16.9262 35.5 15.6626 35.5C15.6388 35.5 15.7188 35.4207 15.8558 35.285C16.3095 34.8358 17.3876 33.7682 17.3876 32.9125V32.5167C13.7656 30.6708 11.3501 27.3539 11.3501 23.569C11.3501 17.7735 17.0137 13.0753 24.0001 13.0753C30.9865 13.0753 36.6501 17.7735 36.6501 23.569Z",fill:"white"},void 0),(0,f.jsx)("defs",{children:(0,f.jsxs)("linearGradient",Object.assign({id:`sms_icon_paint0_linear_${C}`,x1:"73.7964",y1:"64.0399",x2:"58.9088",y2:"-4.65515",gradientUnits:"userSpaceOnUse"},{children:[(0,f.jsx)("stop",{stopColor:"#43E6A2"},void 0),(0,f.jsx)("stop",{offset:"1",stopColor:"#18D037"},void 0)]}),void 0)},void 0)]}),void 0)}};function S({platform:e,url:t}){switch(e){case"facebook":return(0,a.stringifyUrl)({url:"https://www.facebook.com/sharer/sharer.php",query:{app_id:0x67903d22b9a8,u:t,display:"popup",sdk:"joey"}});case"twitter":return(0,a.stringifyUrl)({url:"https://twitter.com/intent/tweet",query:{refer_source:t,text:t}});case"pinterest":return(0,a.stringifyUrl)({url:"https://pinterest.com/pin/create/button/",query:{url:t,media:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png",desc:t}});case"whatsapp":return(0,a.stringifyUrl)({url:"https://wa.me/",query:{text:t}});case"reddit":return(0,a.stringifyUrl)({url:"https://www.reddit.com/submit",query:{url:t}});case"vk":return(0,a.stringifyUrl)({url:"https://vk.com/share.php",query:{url:t}});case"copy":return function(){var e;const o=document.createElement("input");let n=!1;o.style.fontSize="16px",(null!==(e=document[b.H.fullscreenElement])&&void 0!==e?e:document.body).appendChild(o),o.value=t||"",o.select(),o.setSelectionRange(0,t.length),document.execCommand&&document.execCommand("copy"),o.remove()};case"telegram":return(0,a.stringifyUrl)({url:"https://t.me/share/url",query:{url:t,text:t}});case"line":return(0,a.stringifyUrl)({url:"https://lineit.line.me/share/ui",query:{url:t,text:t}});case"linkedin":return(0,a.stringifyUrl)({url:"https://www.linkedin.com/sharing/share-offsite",query:{url:t}});case"email":return(0,a.stringifyUrl)({url:"mailto:",query:{subject:t,body:t}});case"embed":case"message":return i();default:return"#"}}const j={pc:{US:["copy","sms","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","facebook","twitter","embed"],UA:["copy","whatsapp","vk","facebook","twitter","embed"],JP:["copy","twitter","facebook","whatsapp","embed"],default:["copy","whatsapp","facebook","twitter","embed"]},mobile:{US:["copy","facebook","reddit","pinterest","twitter","whatsapp","embed"],RU:["copy","whatsapp","vk","sms","facebook","twitter","embed"],UA:["copy","whatsapp","vk","sms","facebook","twitter","embed"],JP:["copy","twitter","facebook","sms","whatsapp","embed"],default:["copy","whatsapp","sms","facebook","twitter","embed"]}};function O({region:e,isMobile:t=!1}){const o=t?"mobile":"pc";return j[o][e]||j[o].default}var P;!function(e){e[e.Video=0]="Video",e[e.Creator=1]="Creator",e[e.Music=2]="Music",e[e.Tag=3]="Tag"}(P||(P={}))},83717:(e,t,o)=>{o.d(t,{gR:()=>l,gL:()=>c,j4:()=>m,V7:()=>p,UI:()=>u});var n=o(9236),i=o(91034),a=o(53448),r=o(242);const s="https://www.tiktok.com";function d(e){const t={"<":"&lt",">":"&gt;",'"':"&#34;","'":"&#39;","&":"&#38;","/":"&#47;"};let o=`(${Object.keys(t).toString()})`;o=o.replace(/,/g,")|(");const n=new RegExp(o,"g");return e.replace(n,(e=>t[e]))}function l(e){var t,o,l;const c=(0,n.mp)(r.A,{selector:t=>t[e],dependencies:[e]}),m=(0,n.mp)(a.z,{selector:e=>{var t;return e.users[null!==(t=null==c?void 0:c.author)&&void 0!==t?t:""]},dependencies:[null==c?void 0:c.author]}),{music:p,textExtra:u,desc:h}=null!=c?c:{},{uniqueId:_="",secUid:g}=null!=m?m:{},y=null!==(t=null==p?void 0:p.title)&&void 0!==t?t:"",v=null!==(o=null==p?void 0:p.id)&&void 0!==o?o:"",b=null!==(l=null==p?void 0:p.authorName)&&void 0!==l?l:"",f=(0,i.yl)({uniqueId:_,secUid:g}),C=(0,i.MB)({musicName:y,musicId:v}),w=(0,i.fH)({uniqueId:_,secUid:g,videoId:e}),x=y.replace(`- ${b}`,"")+(b?` - ${b}`:""),k=`${s}${f.split("?")[0]}`,I=`${s}${C.split("?")[0]}`,S=`${s}${w.split("?")[0]}`,j=`${s}/embed.js`,O=`@${_}`,P=` ${d(x)}`;return`\n    <blockquote class="tiktok-embed"\n      cite="${S}"\n      data-video-id="${e}" style="max-width: 605px;min-width: 325px;" >\n      <section>\n          <a target="_blank" title="${O}" href="${k}?refer=embed">${O}</a>\n          ${function(e,t=[]){return t.length?[...t].sort(((e,t)=>e.start-t.start)).reduce(((t,o,n,a)=>{const{start:r,end:l,hashtagName:c,type:m}=o,p=0===n?0:a[n-1].end,u=r,h=e.substring(p,u);h&&(t+=d(h));const _=e.substring(r,l);return t+(1===m&&c?`<a title="${c}" target="_blank" href="${s}${(0,i.JD)({tagName:c})}?refer=embed">${d(_)}</a>`:d(_))}),""):`<p>${d(e)}</p>`}(null!=h?h:"",u)}\n          <a target="_blank" title="${P}" href="${I}?refer=embed">${P}</a>\n      </section>\n    </blockquote>\n    <script async src="${j}"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function c(e){if(e)return`\n    <blockquote class="tiktok-embed"\n      cite="${s}/@${e}"\n      data-unique-id="${e}"\n      data-embed-type="creator" style="max-width: 780px; min-width: 288px;" >\n      <section>\n        <a target="_blank" href="${s}/@${e}?refer=creator_embed">@${e}</a>\n      </section>\n    </blockquote>\n    <script async src="${s}/embed.js"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function m(e){if(e)return`\n    <blockquote class="tiktok-embed"\n      cite="${s}/tag/${e}"\n      data-tag-id="${e}"\n      data-embed-type="tag" style="max-width: 780px; min-width: 288px;" >\n      <section>\n        <a target="_blank" href="${s}/tag/${e}?refer=tag_embed">#${e}</a>\n      </section>\n    </blockquote>\n    <script async src="${s}/embed.js"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function p(e,t,o){if(!e||!t)return;const n=(0,i.MB)({musicName:e,musicId:t}),a=n.split("/")[2],r=`${s}${n.split("?")[0]}`,d=` ${e} - ${null!=o?o:""}`;return`\n    <blockquote class="tiktok-embed"\n      cite="${s}/${n}"\n      data-music-id="${a}"\n      data-embed-from="embed"\n      data-embed-type="music" style="max-width: 780px; min-width: 288px;" >\n      <section>\n        <a target="_blank" title="${d}" href="${r}?refer=music_embed">${d}</a>\n      </section>\n    </blockquote>\n    <script async src="${s}/embed.js"><\/script>\n  `.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()}function u(e){return`?lang=${e}&embedFrom=webapp_preview`}},82962:(e,t,o)=>{o.d(t,{JW:()=>m,c1:()=>p});var n,i=o(9236),a=o(91051),r=o(21041),s=o(41174),d=o(60931),l=o(4269),c=o(86955);function m(){var e;const{region:t=""}=null!==(e=(0,d.Lh)((()=>["region"]),[]))&&void 0!==e?e:{},o=(0,i.qj)(c.N);return(0,a.useCallback)((()=>{o.initShareSettings({isMobile:!1,region:t})}),[t,o])}function p(){const{isBrowserModeShowing:e}=(0,a.useContext)(l._),{pathname:t}=(0,r.TH)();return(0,a.useMemo)((()=>{const o=((0,s.bf)(t)||(0,s.Dj)(t)||(0,s.ws)(t)||(0,s.Qu)(t)||(0,s.u7)(t)||(0,s.wy)(t))&&!e,n=(0,s.oC)(t)||(0,s.Io)(t)||(0,s.FZ)(t)||(0,s.cQ)(t);let i="none";return e?i="expand":(o||n)&&(i="short"),{additionShareOptions:!0,expanded:i}}),[t,e])}!function(e){e.None="none",e.Simple="short",e.Expanded="expand"}(n||(n={}))},86955:(e,t,o)=>{o.d(t,{N:()=>f});var n=o(64047),i=o(73566),a=o(48185),r=o(19630),s=o(82346),d=o(60595),l=o(49584),c=o(56979),m=o(10026),p=o(20948),u=o(68854),h=o(71332),_=o(99510),g=o(19650),y=o(57244),v=o(53095);let b=class{get Kakao$(){return window.Kakao?(0,s.of)(null):new d.y((e=>{o.e(5187).then(o.t.bind(o,55187,23)).then((()=>{window.Kakao.init("4954e33ea2a4395e59ecbc20761bd889"),e.next(),e.complete()})).catch((t=>{console.error(t),e.next(),e.complete()}))}))}share(e){return this.Kakao$.pipe((0,v.z)((()=>new d.y((t=>{window.Kakao.Share.sendScrap({requestUrl:e,callback:()=>{t.next(),t.complete()}})})))),(0,u.K)((()=>(0,s.of)(null))))}};b=(0,n.__decorate)([(0,y.G)()],b);let f=class extends i.D{constructor(e,t){super(),this.fetch=e,this.kakaoSdk=t,this.defaultState={platforms:null,platformsForAdditionOnly:null,isFlip:!1,loading:!1}}setPlatforms(e,t){e.platforms=t}setLoading(e,t){e.loading=t}setIsFlip(e,t){e.isFlip===t||t&&!function(){var e;const t=_.l_.getItem("flip_timestamp"),o=(null!==(e=_.l_.getItem("flip_count"))&&void 0!==e?e:0)+1,n=(new Date).setHours(0,0,0,0);return!(t&&t===n&&o>7||(_.l_.setItem("flip_timestamp",n),_.l_.setItem("flip_count",o),0))}()||(e.isFlip=t)}handleKakaoShare(e){return e.pipe((0,l.z)((({requestUrl:e})=>this.kakaoSdk.share(e).pipe((0,c.U)((()=>this.getActions().setLoading(!1))),(0,m.O)(this.getActions().setLoading(!0))))))}initShareSettings(e){return e.pipe((0,p.M)(this.state$),(0,l.z)((([e,{platforms:t}])=>t?(0,s.of)(this.getActions().setPlatforms(t)):this.fetch.get("/api/share/settings/",{query:{device_platform:e.isMobile?"webapp_mobile":"webapp_pc",mode:1}}).pipe((0,c.U)((({status_code:t,share_platforms:o})=>{if(0===t&&(null==o?void 0:o.length)){const t=o.map((({platform_id:e})=>e)).filter((t=>{return o=t,e.isMobile?o in g.fp:o in g.Lb;var o}));return this.getActions().setPlatforms(t)}return this.getActions().setPlatforms((0,g.Od)(e))})),(0,m.O)(this.getActions().setPlatforms([])),(0,u.K)((()=>(0,s.of)(this.getActions().setPlatforms((0,g.Od)(e)))))))))}};(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Array]),(0,n.__metadata)("design:returntype",void 0)],f.prototype,"setPlatforms",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],f.prototype,"setLoading",null),(0,n.__decorate)([(0,a.lF)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],f.prototype,"setIsFlip",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[d.y]),(0,n.__metadata)("design:returntype",d.y)],f.prototype,"handleKakaoShare",null),(0,n.__decorate)([(0,a.Qm)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[d.y]),(0,n.__metadata)("design:returntype",d.y)],f.prototype,"initShareSettings",null),f=(0,n.__decorate)([(0,r.Y)("TTShare"),(0,n.__metadata)("design:paramtypes",[h.r,b])],f)},79296:(e,t,o)=>{o.d(t,{mB:()=>me});var n,i,a=o(64047),r=o(11040),s=o(74820),d=o(9236),l=o(16926),c=o(91051),m=o(67949),p=o(8136),u=o(55481),h=o(68716),_=o(60941),g=o(97265),y=o(69319),v=o(60931),b=o(4269),f=o(6858),C=o(242);function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},w.apply(this,arguments)}const x=function(e){return c.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),n||(n=c.createElement("g",{clipPath:"url(#pinterest_svg__clip0_20690_126897)"},c.createElement("circle",{cx:12,cy:12,r:12,fill:"white"}),c.createElement("path",{fill:"#E60019",d:"M12.01 0C5.377 0 0 5.368 0 11.99c0 5.082 3.163 9.425 7.631 11.171-.109-.947-.198-2.408.04-3.444.217-.937 1.403-5.96 1.403-5.96s-.356-.72-.356-1.777c0-1.668.969-2.91 2.175-2.91 1.028 0 1.522.769 1.522 1.687 0 1.026-.652 2.565-.998 3.996-.287 1.194.603 2.171 1.779 2.171 2.135 0 3.776-2.25 3.776-5.486 0-2.872-2.066-4.876-5.022-4.876-3.42 0-5.426 2.556-5.426 5.201 0 1.027.395 2.132.89 2.734a.357.357 0 01.079.345c-.09.375-.297 1.194-.337 1.362-.049.217-.177.266-.405.158-1.502-.7-2.441-2.882-2.441-4.648 0-3.78 2.748-7.253 7.937-7.253 4.162 0 7.404 2.96 7.404 6.927 0 4.135-2.61 7.46-6.228 7.46-1.215 0-2.362-.63-2.748-1.38l-.75 2.851c-.268 1.046-1 2.349-1.493 3.148A12.08 12.08 0 0011.99 24C18.623 24 24 18.632 24 12.01 24.02 5.368 18.642 0 12.01 0z"}))),i||(i=c.createElement("defs",null,c.createElement("clipPath",{id:"pinterest_svg__clip0_20690_126897"},c.createElement("path",{fill:"white",d:"M0 0h24v24H0z"})))))};var k,I;function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},S.apply(this,arguments)}const j=function(e){return c.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),k||(k=c.createElement("path",{fill:"#383838",fillOpacity:.95,fillRule:"evenodd",d:"M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z",clipRule:"evenodd"})),I||(I=c.createElement("path",{fill:"white",fillRule:"evenodd",d:"M12.313 7.966a.562.562 0 111.108.194l-1.37 7.835a.562.562 0 11-1.109-.194l1.371-7.835zm3.927.808a.7.7 0 00-1.014 0 .76.76 0 000 1.05l2.228 2.307-2.228 2.305a.76.76 0 000 1.05.7.7 0 001.015 0l3.214-3.326a.042.042 0 000-.058l-.231-.24-.005-.004-.003-.004-2.976-3.08zm-7.351 0c.29.29.29.76 0 1.05L6.583 12.13l2.307 2.307a.742.742 0 11-1.05 1.05L5.423 13.07l-.002-.002-.91-.91a.04.04 0 010-.057L7.84 8.775c.29-.29.76-.29 1.05 0z",clipRule:"evenodd"})))};var O=o(19650);const P=function({width:e="1em",height:t="1em",style:o={}}){return(0,r.jsxs)("svg",Object.assign({width:e,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:o},{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z",fill:"gray"},void 0),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.313 7.96568C12.3665 7.65966 12.658 7.45498 12.964 7.50851C13.27 7.56203 13.4747 7.8535 13.4211 8.15951L12.0506 15.9952C11.997 16.3012 11.7056 16.5059 11.3996 16.4523C11.0936 16.3988 10.8889 16.1073 10.9424 15.8013L12.313 7.96568ZM16.2402 8.77448C15.96 8.48453 15.5058 8.48453 15.2256 8.77448C14.9454 9.06443 14.9454 9.53454 15.2256 9.82449L17.454 12.1307L15.2262 14.4364C14.946 14.7263 14.946 15.1964 15.2262 15.4864C15.5063 15.7763 15.9606 15.7763 16.2407 15.4864L19.4551 12.1598C19.4704 12.1439 19.4704 12.1182 19.4551 12.1023L19.2233 11.8623L19.2201 11.8586L19.2158 11.854L16.2402 8.77448ZM8.88972 15.4867C8.59977 15.7766 8.12966 15.7766 7.83971 15.4867L5.4207 13.0677L4.76017 12.4071L4.51191 12.1589C4.49603 12.143 4.49603 12.1173 4.51191 12.1014L7.83853 8.77477C8.12848 8.48482 8.59859 8.48482 8.88854 8.77477C9.17849 9.06472 9.17849 9.53482 8.88854 9.82478L6.58318 12.1301L8.88972 14.4367C9.17967 14.7266 9.17967 15.1967 8.88972 15.4867Z",fill:"white"},void 0)]}),void 0)};var R=o(33761),A=o(18814),T=o(83717),L=o(32913);const F=(0,L.Z)("div",{target:"echcjyx0"})({width:"322px",borderRadius:"9px",height:"389px;",margin:"0px"},"label:DivPreviewContainer;"),D=(0,L.Z)("iframe",{target:"echcjyx1"})({display:"block",visibility:"unset",width:"100%",height:"389px"},"label:IframePlaylistEmbedPreview;"),M="https://www.tiktok.com",E=function(e){var t;const{language:o}=null!==(t=(0,v.Lh)((()=>["language"]),[]))&&void 0!==t?t:{},{uniqueId:n,tagTitle:i,musicId:a,musicTitle:s,type:d}=e;if(!d||!n&&!i&&!a)return(0,r.jsx)("div",{},void 0);const l=null!=o?o:"en",c=(0,T.UI)(l);let m;switch(d){case 1:m=`${M}/embed/@${n}${c}`;break;case 3:m=`${M}/embed/tag/${i}${c}`;break;case 2:m=`${M}/embed/music/${s}-${a}${c}`}return(0,r.jsx)(F,Object.assign({style:{pointerEvents:"none"}},{children:(0,r.jsx)(D,{src:m,frameBorder:"0"},void 0)}),void 0)};var $=o(36425);const B=(0,L.Z)("div",{target:"e172cezw0"})((({theme:e,isVideoEmbedPreview:t})=>[(0,$.YJ)({direction:e.direction}),{width:t?"550px":"700px"}]),{borderRadius:"9px","@media(max-width: 1000px)":{width:"400px"}},"label:DivModalContainer;"),U=(0,L.Z)("div",{target:"e172cezw2"})((({theme:{colors:e}})=>({padding:"24px 24px 12px 24px",borderBottom:`0.5px solid ${e.LineSecondary}`})),"label:DivEmbedTitle;"),V=(0,L.Z)("h3",{target:"e172cezw3"})((({theme:e})=>(0,$.GI)({theme:e,typography:"P1",fontWeight:"bold"})),{fontSize:"20px",lineHeight:"24px",textAlign:"start"},"label:H3EmbedTitle;"),z=(0,L.Z)("div",{target:"e172cezw4"})((({theme:{direction:e}})=>(0,$.YJ)({direction:e,end:"23px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:23,cursor:"pointer"},"label:DivXMarkWrapper;"),Z=(0,L.Z)("div",{target:"e172cezw5"})({display:"flex",justifyContent:"space-between",padding:"24px","@media(max-width: 1000px)":{paddingTop:0}},"label:DivModalInnerContainer;"),W=(0,L.Z)("div",{target:"e172cezw6"})({width:310,paddingTop:10,"@media(max-width: 1000px)":{width:"400px"}},"label:DivTextArea;"),N=(0,L.Z)("div",{target:"e172cezw7"})((({theme:e})=>[(0,$.GI)({theme:e,fontWeight:"semiBold"}),{fontSize:16,lineHeight:"24px"}]),{display:"block",width:"100%",marginBottom:"20px",border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word"},"label:DivAreaDescription;"),q=(0,L.Z)("textarea",{target:"e172cezw8"})((({theme:e})=>[(0,$.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{display:"block",padding:"12px 12px 12px 12px",width:"100%",height:148,marginBottom:20,border:"none",resize:"none",outline:"none",wordBreak:"break-all",overflowWrap:"break-word",background:"rgba(22, 24, 35, 0.06)",borderRadius:2}]),"label:TextareaEmbedCode;"),Q=(0,L.Z)("button",{target:"e172cezw9"})($.Ph,(({theme:e,primary:t})=>[(0,$.GI)({theme:e,fontWeight:t?"semiBold":"normal",color:"TextPrimary"}),{fontSize:16,border:`1px solid ${e.colors.LineSecondary}`,background:e.colors.BGTertiary},{":after":{content:'""',width:"100%",height:"1px",position:"absolute",left:0,top:0,background:e.colors.LineSecondary,transform:"scaleY(0.5)"}}]),{borderRadius:2,display:"block",width:"100%",textAlign:"center",cursor:"pointer",height:"36px",marginBottom:"20px"},"label:Button;"),K=(0,L.Z)("p",{target:"e172cezw10"})((({theme:e})=>[(0,$.GI)({theme:e,typography:"P2",color:"TextTertiary"}),{a:{textDecoration:"underline","&, &:hover, &:active, &:link":{color:e.colors.TextTertiary}}}]),{fontSize:"12px",lineHeight:"18px"},"label:PHint;"),H=(0,L.Z)("div",{target:"e1rggtg60"})({borderRadius:"4.5px",width:"163px",height:"379px",overflow:"hidden"},"label:DivPreviewContainer;"),G="scale(0.5)",Y=e=>"rtl"===e?"top right":"top left",J=(0,L.Z)("iframe",{target:"e1rggtg61"})((({theme:e})=>[{display:"block",visibility:"unset",width:"326px",height:"758px",msTransform:G,msTRANSFORM_ORIGIN_ZERO:Y(e.direction),MozTransform:G,MozTRANSFORM_ORIGIN_ZERO:Y(e.direction),WebkitTransform:G,WebkitTRANSFORM_ORIGIN_ZERO:Y(e.direction),transform:G,transformOrigin:Y(e.direction),border:"none"}]),"label:IframeVideoEmbedPreview;"),X=function(e){var t;const{videoId:o}=e,{language:n}=null!==(t=(0,v.Lh)((()=>["language"]),[]))&&void 0!==t?t:{};return(0,r.jsx)(H,Object.assign({style:{pointerEvents:"none"}},{children:(0,r.jsx)(J,{src:(()=>{const e=null!=n?n:"en",t=(0,T.UI)(e);return`https://www.tiktok.com/embed/v2/${o}${t}`})(),frameBorder:"0"},void 0)}),void 0)},ee=function(e){const{code:t,onCopy:o,uniqueId:n,videoId:i,type:a,musicId:s,tagTitle:l,musicTitle:m}=e,p=(0,_.Q)(),u=(0,d.mp)(A.G,{selector:e=>e.lang,dependencies:[]}),h=(0,c.useRef)(null),g=(0,c.useCallback)((()=>{var e;null===(e=h.current)||void 0===e||e.select(),document.execCommand&&document.execCommand("copy"),null==o||o()}),[o]),y=`"https://www.tiktok.com/legal/terms-of-service?lang=${u}" target="_blank"`,v='"https://www.tiktok.com/legal/privacy-policy" target="_blank"';let b;const f=1===a||3===a||2===a;let C,w;switch(a){case 1:C=p("embed_profile_popup_title"),w=p("embed_profile_popup_desc");break;case 3:C=p("embeds_popup_hashtag_header"),w=p("embeds_popup_hashtag_body");break;case 2:C=p("embeds_popup_sound_header"),w=p("embeds_popup_sound_body");break;default:C=p("Embed video"),w=p("embed_popup_embed_body")}try{b=f?p("embeds_popup_tns").replace("{Terms of Service}",`<a href=${y}>${p("embed_profile_popup_bottom_desc_tos")}</a>`).replace("{Privacy Policy}",`<a href=${v}>${p("embed_profile_card_desc_privacy_policy")}</a>`):p("By embedding this video, you confirm that you agree to our <a href={TermsHref}>Terms of Use</a> and acknowledge you have read and understood our <a href={PolicyHref}> Privacy Policy.</a>").replace("{TermsHref}",y).replace("{PolicyHref}",v)}catch(e){b=`By embedding this page, you confirm that you agree to our <a href="https://www.tiktok.com/legal/terms-of-service?lang=${u}" target="_blank">Terms of Service</a> and acknowledge that you have read and understood our <a href="https://www.tiktok.com/legal/privacy-policy" target="_blank"> Privacy Policy.</a>`}const[x,k]=(0,c.useState)(!0);return(0,c.useEffect)((()=>{var e;const t=window.matchMedia("(max-width: 1000px)");null===(e=null==t?void 0:t.addEventListener)||void 0===e||e.call(t,"change",(e=>k(e.matches))),k(null==t?void 0:t.matches)}),[]),(0,r.jsxs)(B,Object.assign({isVideoEmbedPreview:!x&&!f},{children:[(0,r.jsxs)(U,{children:[(0,r.jsx)(V,{children:C},void 0),(0,r.jsx)(z,Object.assign({onClick:e.onClose},{children:(0,r.jsx)(R.Z,{width:20,height:20},void 0)}),void 0)]},void 0),(0,r.jsxs)(Z,{children:[!x&&(0,r.jsx)(r.Fragment,{children:f?(0,r.jsx)(E,{type:a,uniqueId:n,tagTitle:l,musicId:s,musicTitle:m},void 0):(0,r.jsx)(X,{videoId:i},void 0)},void 0),(0,r.jsxs)(W,{children:[(0,r.jsx)(N,{children:w},void 0),(0,r.jsx)(q,{defaultValue:t,readOnly:!0,rows:7,ref:h},void 0),(0,r.jsx)(Q,Object.assign({primary:!0,onClick:g},{children:p("embed_profile_popup_btn")}),void 0),(0,r.jsx)(K,{dangerouslySetInnerHTML:{__html:b}},void 0)]},void 0)]},void 0)]}),void 0)};var te,oe=o(82962),ne=o(86955);!function(e){e[e.Icon=0]="Icon",e[e.Entry=1]="Entry",e[e.Corner=2]="Corner"}(te||(te={}));const ie={0:({theme:{direction:e}})=>[{display:"block",fontSize:0},(0,$.YJ)({direction:e,marginEnd:"8px"})],2:()=>[{display:"block",fontSize:0,margin:"4px auto"}],1:({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"11px 16px",margin:"0px 3px 0px 4px",position:"relative",":hover":{background:e.BGView,textDecoration:"none"},"&:focus-visible":{outline:`2px solid ${e.Negative}`}})},ae=(0,L.Z)("a",{target:"e15mchsh0"})((({mode:e,theme:t})=>ie[e]({theme:t})),"label:AShareLink;"),re=(0,L.Z)("a",{target:"e15mchsh1"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 16px",position:"relative",margin:"0px 4px 0px 4px",":hover":{background:e.BGView,textDecoration:"none"},"&:focus-visible":{outline:`2px solid ${e.Negative}`}})),"label:AShareArrow;"),se=(0,L.Z)("span",{target:"e15mchsh2"})((({theme:{direction:e}})=>(0,$.YJ)({direction:e,marginStart:"12px"})),"label:SpanShareText;"),de=(0,L.Z)("div",{target:"e15mchsh3"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"11px 16px",position:"relative",background:"rgba(22, 24, 35, 0.1)",textDecoration:"none",color:e.LineInput})),"label:DivDisabledArea;");var le;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.HEADER=1]="HEADER",e[e.BOTTOM=2]="BOTTOM",e[e.BrowserModePopup=3]="BrowserModePopup"}(le||(le={}));const ce={0:24,2:24,1:26},me=(0,c.memo)((function(e){var t,{videoId:o="",uniqueId:n="",musicId:i="",tagTitle:w="",musicTitle:k="",onClickShare:I,mode:S,embedCode:R,embedType:A,isEmbedDisabled:T=!1,isEmbedBanned:L=!1,onEmbedModalVisibleChange:F,enabled:D=!0,url:M=""}=e,E=e.teaParams,$=void 0===E?{}:E,{group_id:B,author_id:U}=$,V=(0,a.__rest)($,["group_id","author_id"]),{from:z=0,onOtherModalOpen:Z,onSendMessagePanelOpen:W,onPlatformCountChange:N}=e;const q=(0,_.Q)(),[Q,K]=(0,c.useState)(!1),{isBrowserModeShowing:H}=(0,c.useContext)(b._),{expanded:G}=(0,oe.c1)(),Y=(0,l.fz)(p.p),J=(0,c.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),K(!0),Y.handleSharePanelClick(Object.assign({group_id:B,author_id:U},V))}),[B,Y,U,V]),{user:X}=null!==(t=(0,v.Lh)((()=>["abTestVersion","user"]),[]))&&void 0!==t?t:{},{vl1:te,forFriend:ie}=(0,d.mp)(C.A,{selector:e=>{var t;return null!==(t=e[o])&&void 0!==t?t:{}},dependencies:[o]}),le=(!X||(null==X?void 0:X.hasIMPermission))&&!(te&&!ie)&&!(1===z||2===z),me=Boolean(X),pe=(0,d.qj)(f.r),ue=(0,c.useCallback)((e=>{const t=e.indexOf(O.Lb.copy);e.length>5&&"short"===G&&t>4&&(e.splice(t,1),e.splice(4,0,O.Lb.copy))}),[G]),{platforms:he}=(0,d.mp)(ne.N,{selector:e=>{var t;let{platforms:o}=e;le||(o=null!==(t=null==o?void 0:o.filter((e=>e!==O.Lb.message)))&&void 0!==t?t:[]);const n=(null!=o?o:[]).filter((e=>e!==O.Lb.sms&&e!==O.Lb.embed));R&&!L&&n.unshift("embed");const i=n.filter((e=>e!==O.Lb.copy));switch(S){case 0:return{platforms:i};case 1:return o=[...n].reverse(),ue(n),o=n,H&&(o=i),{platforms:o};default:return{platforms:n}}},dependencies:[S,R,H,ue,A,le]}),_e=(0,c.useMemo)((()=>he.length>5&&!Q&&1===S&&"expand"!==G),[he,Q,S,G]),[ge,ye]=(0,c.useState)(!1);(0,c.useEffect)((()=>{null==F||F(ge)}),[ge,F]);const ve=(0,c.useCallback)((e=>e.replace(/(.*?){(.*?)}(.*?)/g,((e,t,o,n)=>t+q(o)+n))),[q]),be=ce[S],fe=(0,s.u)(),Ce=(0,c.useCallback)(((e,t)=>o=>{if(t&&(o.preventDefault(),o.stopPropagation(),t()),D||(o.preventDefault(),u.h.destroy(),u.h.open({content:q("web_sharing_disable_toast"),duration:3,widthType:"half",getContainer:g.Z})),null==I||I(e),Y.handleShare(Object.assign({platform:e,group_id:B,author_id:U,share_option_type:G,share_click_from:Q||3===z?"long":"short"},V)),"copy"===e&&D)u.h.open({content:q("Copied"),duration:1.2,widthType:"half",getContainer:g.Z});else if("embed"===e)ye(!0),null==Z||Z(!0);else if("message"===e){if(!me)return void pe.openModal({query:{enter_method:"share_button"}});null==W||W()}}),[D,I,Y,B,U,G,Q,V,q,me,W,pe,z]),we=(0,c.useCallback)((()=>{ye(!1),null==Z||Z(!1)}),[Z]),xe=(0,c.useCallback)((()=>{Y.handleClickShare(Object.assign({platform:"embed",group_id:B,author_id:U,share_option_type:G,share_click_from:Q?"long":"short"},V)),u.h.open({content:q("embed_success"),duration:1.2,widthType:"half",getContainer:g.Z}),ye(!1)}),[U,G,B,Y,V,Q,q]),ke=(0,c.useMemo)((()=>0===S?[0,5]:H?[5,void 0]:Q||2===S||"expand"===G?[0,void 0]:[0,5]),[H,Q,S,G]);(0,c.useEffect)((()=>{var e,t;const o=null!==(t=null===(e=null==he?void 0:he.slice(...ke))||void 0===e?void 0:e.length)&&void 0!==t?t:0;null==N||N(o)}),[N,he,ke]);const Ie=(0,g.Z)(),Se=(0,c.useCallback)((e=>{if(13===e.keyCode||32===e.keyCode){e.preventDefault(),e.stopPropagation(),K(!0);const t=null==he?void 0:he.slice(...ke).pop();document.querySelector(`#icon-element-${t}`).focus(),Y.handleSharePanelClick(Object.assign({group_id:B,author_id:U},V))}}),[B,Y,U,V,ke,he]),je=(0,c.useCallback)(((e,t)=>o=>{13===o.keyCode&&(o.preventDefault(),o.stopPropagation(),Ce(e,t)(o),document.querySelector(`#icon-element-${e}`).click())}),[Ce]);return(0,r.jsxs)(r.Fragment,{children:[null==he?void 0:he.slice(...ke).map((e=>{const t="ltr"===fe.direction?"left":"right",o=2===S?t:"top",n=O.vq[e],i=fe.isDark&&"embed"===e,a=fe.isDark&&"pinterest"===e,s=(0,O.IG)({platform:e,url:M}),d="string"==typeof s?{href:s,target:"_blank",rel:"noopener noreferrer",onClick:Ce(e),onKeyDown:je(e,void 0,s)}:{href:"#",onClick:Ce(e,s),onKeyDown:je(e,s)};let l=(0,r.jsx)(n,{width:be,height:be},void 0);i?l=(0,r.jsx)(j,{width:be,height:be},void 0):a&&(l=(0,r.jsx)(x,{width:be,height:be},void 0));const c=(0,r.jsxs)(ae,Object.assign({id:`icon-element-${e}`,mode:S},d,{"data-e2e":`video-share-${e}`,"aria-label":ve(O.ny[e])},{children:[l,1===S&&(0,r.jsx)(se,{children:ve(O.ny[e])},void 0)]}),e);return T&&"embed"===e?(0,r.jsx)(h.u,Object.assign({fullscreenAdjust:!0,overlay:q("embed_profile_tooltip"),placement:"bottom"},{children:(0,r.jsxs)(de,{children:[(0,r.jsx)(P,{width:be,height:be},void 0),(0,r.jsx)(se,{children:ve(O.ny[e])},void 0)]},void 0)}),e):0===S||2===S?(0,r.jsx)(h.u,Object.assign({fullscreenAdjust:!0,overlay:ve(O.ny[e]),placement:o},{children:c}),e):c})),_e&&(0,r.jsx)(re,Object.assign({"data-e2e":"share-arrow","aria-label":q("accessibilityLabels_forYou_share_moreOptions_btn"),href:"#",onClick:J,onKeyDown:Se},{children:(0,r.jsx)(m.Z,{width:24,height:24},void 0)}),void 0),(0,r.jsx)(y.u_,Object.assign({parentRef:Ie,visible:ge,onClose:we,maskCloseable:!1},{children:(0,r.jsx)(ee,{onCopy:xe,onClose:we,code:R,type:A,videoId:o,uniqueId:n,musicId:i,tagTitle:w,musicTitle:k},void 0)}),void 0)]},void 0)}))},15754:(e,t,o)=>{o.d(t,{y:()=>s});var n,i,a=o(64047),r=o(40666);!function(e){e.ClickComment="click_comment_button",e.LikeComment="like_comment",e.CancelLikeComment="cancel_like_comment",e.PostComment="post_comment",e.SearchCommentEmoji="search_comment_emoji",e.SearchCommentAt="search_comment_at",e.AddCommentAt="add_comment_at",e.VideoCommentShow="video_comment_show",e.ShowMoreReply="show_more_reply",e.TapComment="tap_comment",e.CloseCommentTab="close_comment_tab",e.CloseComment="close_comment",e.KeepEditingComment="keep_editing_comment",e.LeaveCommentPage="leave_comment_page",e.CopyCommentUrl="web_comment_url",e.CloseCommentPanel="close_comment_panel",e.MentionItemShow="tag_mention_head_show"}(n||(n={})),function(e){e.Original="original",e.Reply="reply",e.ReplyToReply="reply_to_reply"}(i||(i={}));const s={handleCommentClick:e=>{r.W.event("click_comment_button",e)},handleCommentLike:e=>{var{isLike:t}=e,o=(0,a.__rest)(e,["isLike"]);const n=t?"like_comment":"cancel_like_comment";r.W.event(n,o)},handlePostComment:e=>{r.W.event("post_comment",e)},handleShowMoreReply:e=>{r.W.event("show_more_reply",e)},handleCommentShow:e=>{r.W.event("video_comment_show",e)},handleSearchAt:e=>{r.W.event("search_comment_at",e)},handleSelectAt:e=>{r.W.event("add_comment_at",e)},handleEmojiSelect:e=>{r.W.event("search_comment_emoji",e)},handleClose:e=>{r.W.event("close_comment",e)},handleLeaveComment:e=>{r.W.event("leave_comment_page",e)},handleKeepComment:e=>{r.W.event("keep_editing_comment",e)},handleCopyCommentUrl:e=>{r.W.event("web_comment_url",e)},handleTapComment:e=>{r.W.event("tap_comment",e)},handleCloseCommentTab:()=>{r.W.event("close_comment_tab",{enter_method:"click_cancel"})},handleCloseCommentPanel:e=>{r.W.event("close_comment_panel",e)},handleMentionItemShow:e=>{r.W.event("tag_mention_head_show",Object.assign(Object.assign({},e),{function:"mention"}))}}},21070:(e,t,o)=>{o.d(t,{y:()=>a});var n,i=o(40666);!function(e){e.Report="click_report",e.ReportSubmit="web_report_submit",e.ReportNext="web_choose_report_reason_next"}(n||(n={}));const a={handleShowReport:e=>{i.W.event("click_report",Object.assign(Object.assign({},e),{channel:"web"}))},handleReportSubmit:e=>{i.W.event("web_report_submit",e)},handleReportNext:e=>{i.W.event("web_choose_report_reason_next",e)}}},8136:(e,t,o)=>{o.d(t,{p:()=>s});var n,i=o(64047),a=o(57244),r=o(40666);!function(e){e.Share="share",e.ShareVideo="share_video",e.SharePanelShow="share_panel_show",e.SharePanelClick="share_panel_click",e.ClickShare="click_share_button",e.ExpandSubtitle="expand_subtitle",e.ClickClosePanel="click_close_panel"}(n||(n={}));let s=class{handleEvent(e,t={}){r.W.event(e,Object.assign(Object.assign({},t),{type:t.group_id?"video":this.type}))}handleSubtitleExpand(e){r.W.event("expand_subtitle",{page_url:e.pageUrl,item_id:e.itemId,type:this.type})}handleSharePanelShow(e){this.handleEvent("share_panel_show",e)}handleSharePanelClick(e){this.handleEvent("share_panel_click",e)}handleShare(e){const t=e.group_id?"share_video":"share";this.handleEvent(t,e)}handleClickClosePannel(e){this.handleEvent("click_close_panel",e)}handleClickShare(e){this.handleEvent("click_share_button",e)}get type(){const{page_name:e}=r.W.commonParams;switch(e){case"video_detail":return"video";case"single_song":return"music";case"challenge":return"tag";case"others_homepage":case"personal_homepage":return"profile";case"discover_kw":return"kep";case"collection":return"collection";case"poi_detail":return"poi";case"channel":return"channel";default:return}}};s=(0,i.__decorate)([(0,a.G)()],s)},84616:(e,t,o)=>{o.d(t,{o:()=>a});var n,i=o(40666);!function(e){e.ClickPrivacySettingVideo="click_privacy_setting_video",e.SelectPrivacySettingVideo="select_privacy_setting_video",e.PrivacySettingAllowInteraction="privacy_setting_allow_interaction",e.ClickDeleteVideo="click_delete_video",e.ActionOnDeleteVideo="action_on_delete_video",e.ScheduleDeleteClick="click_delete_scheduled_video",e.ScheduleDeleteAction="action_on_delete_scheduled_video"}(n||(n={}));const a={handleClickPrivacySettingVideo:e=>{i.W.event("click_privacy_setting_video",e)},handleSelectPrivacySettingVideo:e=>{i.W.event("select_privacy_setting_video",e)},handlePrivateSetting:e=>{i.W.event("privacy_setting_allow_interaction",e)},handleClickDeleteVideo:e=>{i.W.event("click_delete_video",e)},handleVideoDelete:e=>{i.W.event("action_on_delete_video",{action:e})},handleScheduleConfirm:e=>{i.W.event("click_delete_scheduled_video",{group_id:e})},handleScheduleDelete:e=>{i.W.event("action_on_delete_scheduled_video",{action:e})}}},10571:(e,t,o)=>{o.d(t,{$:()=>r});var n,i=o(40666);!function(e){e.SwitchSound="switch_sound",e.UnmuteButtonShow="unmute_show",e.UnmuteButtonClicked="unmute_click",e.VolumeChange="volume_change"}(n||(n={}));const a={0:"one-column",1:"three-column",2:"browser-mode",3:"swiper_mode",4:"video-detail",6:"pip",5:"fullscreen"},r={handleSwitchSound:e=>{const{muted:t,playMode:o,enter_method:n="click",volume_from:r,volume_to:s,aweme_type:d,pic_cnt:l}=e;void 0!==r&&void 0!==s?i.W.event("switch_sound",{sound_mode:s>r?"adjust_up":"adjust_down",play_mode:a[o],enter_method:n,volume_from:r,volume_to:s,aweme_type:null!=d?d:0,pic_cnt:l}):i.W.event("switch_sound",{sound_mode:t?"off":"on",play_mode:a[o],enter_method:n,aweme_type:null!=d?d:0,pic_cnt:l})},handleVideoUnmuteButtonShow:()=>{i.W.event("unmute_show")},handleVideoUnmuteButtonClicked:()=>{i.W.event("unmute_click")},handleVolumeChange:e=>{const{volume_from:t=0,volume_to:o=0,click_mute:n=!1}=e;i.W.event("volume_change",{volume_change:n?0:Number((o-t).toFixed(4)),volume_level:o,click_mute:n})}}}}]);